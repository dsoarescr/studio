"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@genkit-ai";
exports.ids = ["vendor-chunks/@genkit-ai"];
exports.modules = {

/***/ "(action-browser)/./node_modules/@genkit-ai/googleai/lib/common.js":
/*!********************************************************!*\
  !*** ./node_modules/@genkit-ai/googleai/lib/common.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar common_exports = {};\n__export(common_exports, {\n  getApiKeyFromEnvVar: () => getApiKeyFromEnvVar\n});\nmodule.exports = __toCommonJS(common_exports);\nvar import_process = __toESM(__webpack_require__(/*! process */ \"process\"));\nfunction getApiKeyFromEnvVar() {\n  return import_process.default.env.GEMINI_API_KEY || import_process.default.env.GOOGLE_API_KEY || import_process.default.env.GOOGLE_GENAI_API_KEY;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=common.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9jb21tb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxtR0FBbUc7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsOEJBQThCO0FBQ3ZHO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsNkJBQTZCLG1CQUFPLENBQUMsd0JBQVM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLENBRUw7QUFDRCIsInNvdXJjZXMiOlsiL2hvbWUvcHJvamVjdC9ub2RlX21vZHVsZXMvQGdlbmtpdC1haS9nb29nbGVhaS9saWIvY29tbW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2dldFByb3RvT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4ge1xuICBmb3IgKHZhciBuYW1lIGluIGFsbClcbiAgICBfX2RlZlByb3AodGFyZ2V0LCBuYW1lLCB7IGdldDogYWxsW25hbWVdLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvRVNNID0gKG1vZCwgaXNOb2RlTW9kZSwgdGFyZ2V0KSA9PiAodGFyZ2V0ID0gbW9kICE9IG51bGwgPyBfX2NyZWF0ZShfX2dldFByb3RvT2YobW9kKSkgOiB7fSwgX19jb3B5UHJvcHMoXG4gIC8vIElmIHRoZSBpbXBvcnRlciBpcyBpbiBub2RlIGNvbXBhdGliaWxpdHkgbW9kZSBvciB0aGlzIGlzIG5vdCBhbiBFU01cbiAgLy8gZmlsZSB0aGF0IGhhcyBiZWVuIGNvbnZlcnRlZCB0byBhIENvbW1vbkpTIGZpbGUgdXNpbmcgYSBCYWJlbC1cbiAgLy8gY29tcGF0aWJsZSB0cmFuc2Zvcm0gKGkuZS4gXCJfX2VzTW9kdWxlXCIgaGFzIG5vdCBiZWVuIHNldCksIHRoZW4gc2V0XG4gIC8vIFwiZGVmYXVsdFwiIHRvIHRoZSBDb21tb25KUyBcIm1vZHVsZS5leHBvcnRzXCIgZm9yIG5vZGUgY29tcGF0aWJpbGl0eS5cbiAgaXNOb2RlTW9kZSB8fCAhbW9kIHx8ICFtb2QuX19lc01vZHVsZSA/IF9fZGVmUHJvcCh0YXJnZXQsIFwiZGVmYXVsdFwiLCB7IHZhbHVlOiBtb2QsIGVudW1lcmFibGU6IHRydWUgfSkgOiB0YXJnZXQsXG4gIG1vZFxuKSk7XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcbnZhciBjb21tb25fZXhwb3J0cyA9IHt9O1xuX19leHBvcnQoY29tbW9uX2V4cG9ydHMsIHtcbiAgZ2V0QXBpS2V5RnJvbUVudlZhcjogKCkgPT4gZ2V0QXBpS2V5RnJvbUVudlZhclxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fdG9Db21tb25KUyhjb21tb25fZXhwb3J0cyk7XG52YXIgaW1wb3J0X3Byb2Nlc3MgPSBfX3RvRVNNKHJlcXVpcmUoXCJwcm9jZXNzXCIpKTtcbmZ1bmN0aW9uIGdldEFwaUtleUZyb21FbnZWYXIoKSB7XG4gIHJldHVybiBpbXBvcnRfcHJvY2Vzcy5kZWZhdWx0LmVudi5HRU1JTklfQVBJX0tFWSB8fCBpbXBvcnRfcHJvY2Vzcy5kZWZhdWx0LmVudi5HT09HTEVfQVBJX0tFWSB8fCBpbXBvcnRfcHJvY2Vzcy5kZWZhdWx0LmVudi5HT09HTEVfR0VOQUlfQVBJX0tFWTtcbn1cbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRBcGlLZXlGcm9tRW52VmFyXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@genkit-ai/googleai/lib/common.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/constants.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@genkit-ai/googleai/lib/context-caching/constants.js ***!
  \***************************************************************************/
/***/ ((module) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar constants_exports = {};\n__export(constants_exports, {\n  CONTEXT_CACHE_SUPPORTED_MODELS: () => CONTEXT_CACHE_SUPPORTED_MODELS,\n  DEFAULT_TTL: () => DEFAULT_TTL,\n  INVALID_ARGUMENT_MESSAGES: () => INVALID_ARGUMENT_MESSAGES\n});\nmodule.exports = __toCommonJS(constants_exports);\nconst CONTEXT_CACHE_SUPPORTED_MODELS = [\n  \"gemini-1.5-flash-001\",\n  \"gemini-1.5-pro-001\"\n];\nconst INVALID_ARGUMENT_MESSAGES = {\n  modelVersion: `Model version is required for context caching, supported only in ${CONTEXT_CACHE_SUPPORTED_MODELS.join(\",\")} models.`,\n  tools: \"Context caching cannot be used simultaneously with tools.\",\n  codeExecution: \"Context caching cannot be used simultaneously with code execution.\"\n};\nconst DEFAULT_TTL = 300;\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=constants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9jb250ZXh0LWNhY2hpbmcvY29uc3RhbnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRkFBb0YsMENBQTBDO0FBQzlIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLENBSUw7QUFDRCIsInNvdXJjZXMiOlsiL2hvbWUvcHJvamVjdC9ub2RlX21vZHVsZXMvQGdlbmtpdC1haS9nb29nbGVhaS9saWIvY29udGV4dC1jYWNoaW5nL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgY29uc3RhbnRzX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGNvbnN0YW50c19leHBvcnRzLCB7XG4gIENPTlRFWFRfQ0FDSEVfU1VQUE9SVEVEX01PREVMUzogKCkgPT4gQ09OVEVYVF9DQUNIRV9TVVBQT1JURURfTU9ERUxTLFxuICBERUZBVUxUX1RUTDogKCkgPT4gREVGQVVMVF9UVEwsXG4gIElOVkFMSURfQVJHVU1FTlRfTUVTU0FHRVM6ICgpID0+IElOVkFMSURfQVJHVU1FTlRfTUVTU0FHRVNcbn0pO1xubW9kdWxlLmV4cG9ydHMgPSBfX3RvQ29tbW9uSlMoY29uc3RhbnRzX2V4cG9ydHMpO1xuY29uc3QgQ09OVEVYVF9DQUNIRV9TVVBQT1JURURfTU9ERUxTID0gW1xuICBcImdlbWluaS0xLjUtZmxhc2gtMDAxXCIsXG4gIFwiZ2VtaW5pLTEuNS1wcm8tMDAxXCJcbl07XG5jb25zdCBJTlZBTElEX0FSR1VNRU5UX01FU1NBR0VTID0ge1xuICBtb2RlbFZlcnNpb246IGBNb2RlbCB2ZXJzaW9uIGlzIHJlcXVpcmVkIGZvciBjb250ZXh0IGNhY2hpbmcsIHN1cHBvcnRlZCBvbmx5IGluICR7Q09OVEVYVF9DQUNIRV9TVVBQT1JURURfTU9ERUxTLmpvaW4oXCIsXCIpfSBtb2RlbHMuYCxcbiAgdG9vbHM6IFwiQ29udGV4dCBjYWNoaW5nIGNhbm5vdCBiZSB1c2VkIHNpbXVsdGFuZW91c2x5IHdpdGggdG9vbHMuXCIsXG4gIGNvZGVFeGVjdXRpb246IFwiQ29udGV4dCBjYWNoaW5nIGNhbm5vdCBiZSB1c2VkIHNpbXVsdGFuZW91c2x5IHdpdGggY29kZSBleGVjdXRpb24uXCJcbn07XG5jb25zdCBERUZBVUxUX1RUTCA9IDMwMDtcbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBDT05URVhUX0NBQ0hFX1NVUFBPUlRFRF9NT0RFTFMsXG4gIERFRkFVTFRfVFRMLFxuICBJTlZBTElEX0FSR1VNRU5UX01FU1NBR0VTXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/constants.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@genkit-ai/googleai/lib/context-caching/index.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar context_caching_exports = {};\n__export(context_caching_exports, {\n  handleCacheIfNeeded: () => handleCacheIfNeeded,\n  handleContextCache: () => handleContextCache\n});\nmodule.exports = __toCommonJS(context_caching_exports);\nvar import_server = __webpack_require__(/*! @google/generative-ai/server */ \"(action-browser)/./node_modules/@google/generative-ai/dist/server/index.js\");\nvar import_genkit = __webpack_require__(/*! genkit */ \"genkit?8a2d\");\nvar import_logging = __webpack_require__(/*! genkit/logging */ \"genkit/logging?5628\");\nvar import_utils = __webpack_require__(/*! ./utils.js */ \"(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/utils.js\");\nasync function handleContextCache(apiKey, request, chatRequest, modelVersion, cacheConfigDetails) {\n  const cacheManager = new import_server.GoogleAICacheManager(apiKey);\n  const { cachedContent, chatRequest: newChatRequest } = (0, import_utils.getContentForCache)(\n    request,\n    chatRequest,\n    modelVersion,\n    cacheConfigDetails\n  );\n  cachedContent.model = modelVersion;\n  const cacheKey = (0, import_utils.generateCacheKey)(cachedContent);\n  cachedContent.displayName = cacheKey;\n  let cache = await (0, import_utils.lookupContextCache)(cacheManager, cacheKey);\n  import_logging.logger.debug(`Cache hit: ${cache ? \"true\" : \"false\"}`);\n  if (!cache) {\n    try {\n      import_logging.logger.debug(\"No cache found, creating one.\");\n      const createParams = {\n        ...cachedContent,\n        ttlSeconds: (0, import_utils.calculateTTL)(cacheConfigDetails)\n      };\n      cache = await cacheManager.create(createParams);\n      import_logging.logger.debug(`Created new cache entry with key: ${cacheKey}`);\n    } catch (cacheError) {\n      import_logging.logger.error(\n        `Failed to create cache with key ${cacheKey}: ${cacheError}`\n      );\n      throw new import_genkit.GenkitError({\n        status: \"INTERNAL\",\n        message: `Failed to create cache: ${cacheError}`\n      });\n    }\n  }\n  if (!cache) {\n    throw new import_genkit.GenkitError({\n      status: \"INTERNAL\",\n      message: \"Failed to use context cache feature\"\n    });\n  }\n  return { cache, newChatRequest };\n}\nasync function handleCacheIfNeeded(apiKey, request, chatRequest, modelVersion, cacheConfigDetails) {\n  if (!cacheConfigDetails || !(0, import_utils.validateContextCacheRequest)(request, modelVersion)) {\n    return { chatRequest, cache: null };\n  }\n  const { cache, newChatRequest } = await handleContextCache(\n    apiKey,\n    request,\n    chatRequest,\n    modelVersion,\n    cacheConfigDetails\n  );\n  return { chatRequest: newChatRequest, cache };\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9jb250ZXh0LWNhY2hpbmcvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLG9CQUFvQixtQkFBTyxDQUFDLGdIQUE4QjtBQUMxRCxvQkFBb0IsbUJBQU8sQ0FBQywyQkFBUTtBQUNwQyxxQkFBcUIsbUJBQU8sQ0FBQywyQ0FBZ0I7QUFDN0MsbUJBQW1CLG1CQUFPLENBQUMsb0dBQVk7QUFDdkM7QUFDQTtBQUNBLFVBQVUsNkNBQTZDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyx5QkFBeUI7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxTQUFTO0FBQ2hGLE1BQU07QUFDTjtBQUNBLDJDQUEyQyxTQUFTLElBQUksV0FBVztBQUNuRTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsV0FBVztBQUN2RCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFVBQVUsd0JBQXdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsTUFBTSxDQUdMO0FBQ0QiLCJzb3VyY2VzIjpbIi9ob21lL3Byb2plY3Qvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvZ29vZ2xlYWkvbGliL2NvbnRleHQtY2FjaGluZy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgY29udGV4dF9jYWNoaW5nX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGNvbnRleHRfY2FjaGluZ19leHBvcnRzLCB7XG4gIGhhbmRsZUNhY2hlSWZOZWVkZWQ6ICgpID0+IGhhbmRsZUNhY2hlSWZOZWVkZWQsXG4gIGhhbmRsZUNvbnRleHRDYWNoZTogKCkgPT4gaGFuZGxlQ29udGV4dENhY2hlXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKGNvbnRleHRfY2FjaGluZ19leHBvcnRzKTtcbnZhciBpbXBvcnRfc2VydmVyID0gcmVxdWlyZShcIkBnb29nbGUvZ2VuZXJhdGl2ZS1haS9zZXJ2ZXJcIik7XG52YXIgaW1wb3J0X2dlbmtpdCA9IHJlcXVpcmUoXCJnZW5raXRcIik7XG52YXIgaW1wb3J0X2xvZ2dpbmcgPSByZXF1aXJlKFwiZ2Vua2l0L2xvZ2dpbmdcIik7XG52YXIgaW1wb3J0X3V0aWxzID0gcmVxdWlyZShcIi4vdXRpbHMuanNcIik7XG5hc3luYyBmdW5jdGlvbiBoYW5kbGVDb250ZXh0Q2FjaGUoYXBpS2V5LCByZXF1ZXN0LCBjaGF0UmVxdWVzdCwgbW9kZWxWZXJzaW9uLCBjYWNoZUNvbmZpZ0RldGFpbHMpIHtcbiAgY29uc3QgY2FjaGVNYW5hZ2VyID0gbmV3IGltcG9ydF9zZXJ2ZXIuR29vZ2xlQUlDYWNoZU1hbmFnZXIoYXBpS2V5KTtcbiAgY29uc3QgeyBjYWNoZWRDb250ZW50LCBjaGF0UmVxdWVzdDogbmV3Q2hhdFJlcXVlc3QgfSA9ICgwLCBpbXBvcnRfdXRpbHMuZ2V0Q29udGVudEZvckNhY2hlKShcbiAgICByZXF1ZXN0LFxuICAgIGNoYXRSZXF1ZXN0LFxuICAgIG1vZGVsVmVyc2lvbixcbiAgICBjYWNoZUNvbmZpZ0RldGFpbHNcbiAgKTtcbiAgY2FjaGVkQ29udGVudC5tb2RlbCA9IG1vZGVsVmVyc2lvbjtcbiAgY29uc3QgY2FjaGVLZXkgPSAoMCwgaW1wb3J0X3V0aWxzLmdlbmVyYXRlQ2FjaGVLZXkpKGNhY2hlZENvbnRlbnQpO1xuICBjYWNoZWRDb250ZW50LmRpc3BsYXlOYW1lID0gY2FjaGVLZXk7XG4gIGxldCBjYWNoZSA9IGF3YWl0ICgwLCBpbXBvcnRfdXRpbHMubG9va3VwQ29udGV4dENhY2hlKShjYWNoZU1hbmFnZXIsIGNhY2hlS2V5KTtcbiAgaW1wb3J0X2xvZ2dpbmcubG9nZ2VyLmRlYnVnKGBDYWNoZSBoaXQ6ICR7Y2FjaGUgPyBcInRydWVcIiA6IFwiZmFsc2VcIn1gKTtcbiAgaWYgKCFjYWNoZSkge1xuICAgIHRyeSB7XG4gICAgICBpbXBvcnRfbG9nZ2luZy5sb2dnZXIuZGVidWcoXCJObyBjYWNoZSBmb3VuZCwgY3JlYXRpbmcgb25lLlwiKTtcbiAgICAgIGNvbnN0IGNyZWF0ZVBhcmFtcyA9IHtcbiAgICAgICAgLi4uY2FjaGVkQ29udGVudCxcbiAgICAgICAgdHRsU2Vjb25kczogKDAsIGltcG9ydF91dGlscy5jYWxjdWxhdGVUVEwpKGNhY2hlQ29uZmlnRGV0YWlscylcbiAgICAgIH07XG4gICAgICBjYWNoZSA9IGF3YWl0IGNhY2hlTWFuYWdlci5jcmVhdGUoY3JlYXRlUGFyYW1zKTtcbiAgICAgIGltcG9ydF9sb2dnaW5nLmxvZ2dlci5kZWJ1ZyhgQ3JlYXRlZCBuZXcgY2FjaGUgZW50cnkgd2l0aCBrZXk6ICR7Y2FjaGVLZXl9YCk7XG4gICAgfSBjYXRjaCAoY2FjaGVFcnJvcikge1xuICAgICAgaW1wb3J0X2xvZ2dpbmcubG9nZ2VyLmVycm9yKFxuICAgICAgICBgRmFpbGVkIHRvIGNyZWF0ZSBjYWNoZSB3aXRoIGtleSAke2NhY2hlS2V5fTogJHtjYWNoZUVycm9yfWBcbiAgICAgICk7XG4gICAgICB0aHJvdyBuZXcgaW1wb3J0X2dlbmtpdC5HZW5raXRFcnJvcih7XG4gICAgICAgIHN0YXR1czogXCJJTlRFUk5BTFwiLFxuICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGNyZWF0ZSBjYWNoZTogJHtjYWNoZUVycm9yfWBcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBpZiAoIWNhY2hlKSB7XG4gICAgdGhyb3cgbmV3IGltcG9ydF9nZW5raXQuR2Vua2l0RXJyb3Ioe1xuICAgICAgc3RhdHVzOiBcIklOVEVSTkFMXCIsXG4gICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1c2UgY29udGV4dCBjYWNoZSBmZWF0dXJlXCJcbiAgICB9KTtcbiAgfVxuICByZXR1cm4geyBjYWNoZSwgbmV3Q2hhdFJlcXVlc3QgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNhY2hlSWZOZWVkZWQoYXBpS2V5LCByZXF1ZXN0LCBjaGF0UmVxdWVzdCwgbW9kZWxWZXJzaW9uLCBjYWNoZUNvbmZpZ0RldGFpbHMpIHtcbiAgaWYgKCFjYWNoZUNvbmZpZ0RldGFpbHMgfHwgISgwLCBpbXBvcnRfdXRpbHMudmFsaWRhdGVDb250ZXh0Q2FjaGVSZXF1ZXN0KShyZXF1ZXN0LCBtb2RlbFZlcnNpb24pKSB7XG4gICAgcmV0dXJuIHsgY2hhdFJlcXVlc3QsIGNhY2hlOiBudWxsIH07XG4gIH1cbiAgY29uc3QgeyBjYWNoZSwgbmV3Q2hhdFJlcXVlc3QgfSA9IGF3YWl0IGhhbmRsZUNvbnRleHRDYWNoZShcbiAgICBhcGlLZXksXG4gICAgcmVxdWVzdCxcbiAgICBjaGF0UmVxdWVzdCxcbiAgICBtb2RlbFZlcnNpb24sXG4gICAgY2FjaGVDb25maWdEZXRhaWxzXG4gICk7XG4gIHJldHVybiB7IGNoYXRSZXF1ZXN0OiBuZXdDaGF0UmVxdWVzdCwgY2FjaGUgfTtcbn1cbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBoYW5kbGVDYWNoZUlmTmVlZGVkLFxuICBoYW5kbGVDb250ZXh0Q2FjaGVcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/index.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/types.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@genkit-ai/googleai/lib/context-caching/types.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar types_exports = {};\n__export(types_exports, {\n  cacheConfigDetailsSchema: () => cacheConfigDetailsSchema,\n  cacheConfigSchema: () => cacheConfigSchema\n});\nmodule.exports = __toCommonJS(types_exports);\nvar import_genkit = __webpack_require__(/*! genkit */ \"genkit?8a2d\");\nconst cacheConfigSchema = import_genkit.z.union([\n  import_genkit.z.boolean(),\n  import_genkit.z.object({ ttlSeconds: import_genkit.z.number().optional() }).passthrough()\n]);\nconst cacheConfigDetailsSchema = import_genkit.z.object({\n  cacheConfig: cacheConfigSchema,\n  endOfCachedContents: import_genkit.z.number()\n});\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9jb250ZXh0LWNhY2hpbmcvdHlwZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLG9CQUFvQixtQkFBTyxDQUFDLDJCQUFRO0FBQ3BDO0FBQ0E7QUFDQSwyQkFBMkIsaURBQWlEO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsTUFBTSxDQUdMO0FBQ0QiLCJzb3VyY2VzIjpbIi9ob21lL3Byb2plY3Qvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvZ29vZ2xlYWkvbGliL2NvbnRleHQtY2FjaGluZy90eXBlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgdHlwZXNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQodHlwZXNfZXhwb3J0cywge1xuICBjYWNoZUNvbmZpZ0RldGFpbHNTY2hlbWE6ICgpID0+IGNhY2hlQ29uZmlnRGV0YWlsc1NjaGVtYSxcbiAgY2FjaGVDb25maWdTY2hlbWE6ICgpID0+IGNhY2hlQ29uZmlnU2NoZW1hXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKHR5cGVzX2V4cG9ydHMpO1xudmFyIGltcG9ydF9nZW5raXQgPSByZXF1aXJlKFwiZ2Vua2l0XCIpO1xuY29uc3QgY2FjaGVDb25maWdTY2hlbWEgPSBpbXBvcnRfZ2Vua2l0LnoudW5pb24oW1xuICBpbXBvcnRfZ2Vua2l0LnouYm9vbGVhbigpLFxuICBpbXBvcnRfZ2Vua2l0Lnoub2JqZWN0KHsgdHRsU2Vjb25kczogaW1wb3J0X2dlbmtpdC56Lm51bWJlcigpLm9wdGlvbmFsKCkgfSkucGFzc3Rocm91Z2goKVxuXSk7XG5jb25zdCBjYWNoZUNvbmZpZ0RldGFpbHNTY2hlbWEgPSBpbXBvcnRfZ2Vua2l0Lnoub2JqZWN0KHtcbiAgY2FjaGVDb25maWc6IGNhY2hlQ29uZmlnU2NoZW1hLFxuICBlbmRPZkNhY2hlZENvbnRlbnRzOiBpbXBvcnRfZ2Vua2l0LnoubnVtYmVyKClcbn0pO1xuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNhY2hlQ29uZmlnRGV0YWlsc1NjaGVtYSxcbiAgY2FjaGVDb25maWdTY2hlbWFcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/types.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/utils.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@genkit-ai/googleai/lib/context-caching/utils.js ***!
  \***********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar utils_exports = {};\n__export(utils_exports, {\n  calculateTTL: () => calculateTTL,\n  extractCacheConfig: () => extractCacheConfig,\n  findLastIndex: () => findLastIndex,\n  generateCacheKey: () => generateCacheKey,\n  getContentForCache: () => getContentForCache,\n  lookupContextCache: () => lookupContextCache,\n  validateContextCacheRequest: () => validateContextCacheRequest\n});\nmodule.exports = __toCommonJS(utils_exports);\nvar import_crypto = __toESM(__webpack_require__(/*! crypto */ \"crypto\"));\nvar import_genkit = __webpack_require__(/*! genkit */ \"genkit?8a2d\");\nvar import_constants = __webpack_require__(/*! ./constants */ \"(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/constants.js\");\nvar import_types = __webpack_require__(/*! ./types */ \"(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/types.js\");\nfunction generateCacheKey(request) {\n  return import_crypto.default.createHash(\"sha256\").update(JSON.stringify(request)).digest(\"hex\");\n}\nfunction getContentForCache(request, chatRequest, modelVersion, cacheConfigDetails) {\n  if (!modelVersion) {\n    throw new Error(\"No model version provided for context caching\");\n  }\n  if (!chatRequest.history?.length) {\n    throw new Error(\"No history provided for context caching\");\n  }\n  validateHistoryLength(request, chatRequest);\n  const { endOfCachedContents, cacheConfig } = cacheConfigDetails;\n  const cachedContent = {\n    model: modelVersion,\n    contents: chatRequest.history.slice(0, endOfCachedContents + 1)\n  };\n  chatRequest.history = chatRequest.history.slice(endOfCachedContents + 1);\n  return { cachedContent, chatRequest, cacheConfig };\n}\nfunction validateHistoryLength(request, chatRequest) {\n  if (chatRequest.history?.length !== request.messages.length - 1) {\n    throw new import_genkit.GenkitError({\n      status: \"INTERNAL\",\n      message: \"Genkit request history and Gemini chat request history length do not match\"\n    });\n  }\n}\nasync function lookupContextCache(cacheManager, cacheKey, maxPages = 100, pageSize = 100) {\n  let currentPage = 0;\n  let pageToken;\n  try {\n    while (currentPage < maxPages) {\n      const { cachedContents, nextPageToken } = await cacheManager.list({\n        pageSize,\n        pageToken\n      });\n      const found = cachedContents?.find(\n        (content) => content.displayName === cacheKey\n      );\n      if (found) return found;\n      if (!nextPageToken) break;\n      pageToken = nextPageToken;\n      currentPage++;\n    }\n  } catch (error) {\n    const message = error instanceof Error ? error.message : \"Unknown Network Error\";\n    throw new import_genkit.GenkitError({\n      status: \"INTERNAL\",\n      message: `Error looking up context cache: ${message}`\n    });\n  }\n  return null;\n}\nconst extractCacheConfig = (request) => {\n  const endOfCachedContents = findLastIndex(\n    request.messages,\n    (message) => !!message.metadata?.cache\n  );\n  return endOfCachedContents === -1 ? null : {\n    endOfCachedContents,\n    cacheConfig: import_types.cacheConfigSchema.parse(\n      request.messages[endOfCachedContents].metadata?.cache\n    )\n  };\n};\nfunction validateContextCacheRequest(request, modelVersion) {\n  if (!modelVersion || !import_constants.CONTEXT_CACHE_SUPPORTED_MODELS.includes(modelVersion)) {\n    throw new import_genkit.GenkitError({\n      status: \"INVALID_ARGUMENT\",\n      message: import_constants.INVALID_ARGUMENT_MESSAGES.modelVersion\n    });\n  }\n  if (request.tools?.length)\n    throw new import_genkit.GenkitError({\n      status: \"INVALID_ARGUMENT\",\n      message: import_constants.INVALID_ARGUMENT_MESSAGES.tools\n    });\n  if (request.config?.codeExecution)\n    throw new import_genkit.GenkitError({\n      status: \"INVALID_ARGUMENT\",\n      message: import_constants.INVALID_ARGUMENT_MESSAGES.codeExecution\n    });\n  return true;\n}\nfunction findLastIndex(array, callback) {\n  for (let i = array.length - 1; i >= 0; i--) {\n    if (callback(array[i], i, array)) return i;\n  }\n  return -1;\n}\nfunction calculateTTL(cacheConfig) {\n  if (cacheConfig.cacheConfig === true) {\n    return import_constants.DEFAULT_TTL;\n  }\n  if (cacheConfig.cacheConfig === false) {\n    return 0;\n  }\n  return cacheConfig.cacheConfig.ttlSeconds || import_constants.DEFAULT_TTL;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9jb250ZXh0LWNhY2hpbmcvdXRpbHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtDQUFrQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQSxtR0FBbUc7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsOEJBQThCO0FBQ3ZHO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCLGFBQWE7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsNEJBQTRCLG1CQUFPLENBQUMsc0JBQVE7QUFDNUMsb0JBQW9CLG1CQUFPLENBQUMsMkJBQVE7QUFDcEMsdUJBQXVCLG1CQUFPLENBQUMseUdBQWE7QUFDNUMsbUJBQW1CLG1CQUFPLENBQUMsaUdBQVM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbUNBQW1DO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxnQ0FBZ0M7QUFDOUM7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxRQUFRO0FBQzFELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFFBQVE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sQ0FRTDtBQUNEIiwic291cmNlcyI6WyIvaG9tZS9wcm9qZWN0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9jb250ZXh0LWNhY2hpbmcvdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fZ2V0UHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9FU00gPSAobW9kLCBpc05vZGVNb2RlLCB0YXJnZXQpID0+ICh0YXJnZXQgPSBtb2QgIT0gbnVsbCA/IF9fY3JlYXRlKF9fZ2V0UHJvdG9PZihtb2QpKSA6IHt9LCBfX2NvcHlQcm9wcyhcbiAgLy8gSWYgdGhlIGltcG9ydGVyIGlzIGluIG5vZGUgY29tcGF0aWJpbGl0eSBtb2RlIG9yIHRoaXMgaXMgbm90IGFuIEVTTVxuICAvLyBmaWxlIHRoYXQgaGFzIGJlZW4gY29udmVydGVkIHRvIGEgQ29tbW9uSlMgZmlsZSB1c2luZyBhIEJhYmVsLVxuICAvLyBjb21wYXRpYmxlIHRyYW5zZm9ybSAoaS5lLiBcIl9fZXNNb2R1bGVcIiBoYXMgbm90IGJlZW4gc2V0KSwgdGhlbiBzZXRcbiAgLy8gXCJkZWZhdWx0XCIgdG8gdGhlIENvbW1vbkpTIFwibW9kdWxlLmV4cG9ydHNcIiBmb3Igbm9kZSBjb21wYXRpYmlsaXR5LlxuICBpc05vZGVNb2RlIHx8ICFtb2QgfHwgIW1vZC5fX2VzTW9kdWxlID8gX19kZWZQcm9wKHRhcmdldCwgXCJkZWZhdWx0XCIsIHsgdmFsdWU6IG1vZCwgZW51bWVyYWJsZTogdHJ1ZSB9KSA6IHRhcmdldCxcbiAgbW9kXG4pKTtcbnZhciBfX3RvQ29tbW9uSlMgPSAobW9kKSA9PiBfX2NvcHlQcm9wcyhfX2RlZlByb3Aoe30sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpO1xudmFyIHV0aWxzX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHV0aWxzX2V4cG9ydHMsIHtcbiAgY2FsY3VsYXRlVFRMOiAoKSA9PiBjYWxjdWxhdGVUVEwsXG4gIGV4dHJhY3RDYWNoZUNvbmZpZzogKCkgPT4gZXh0cmFjdENhY2hlQ29uZmlnLFxuICBmaW5kTGFzdEluZGV4OiAoKSA9PiBmaW5kTGFzdEluZGV4LFxuICBnZW5lcmF0ZUNhY2hlS2V5OiAoKSA9PiBnZW5lcmF0ZUNhY2hlS2V5LFxuICBnZXRDb250ZW50Rm9yQ2FjaGU6ICgpID0+IGdldENvbnRlbnRGb3JDYWNoZSxcbiAgbG9va3VwQ29udGV4dENhY2hlOiAoKSA9PiBsb29rdXBDb250ZXh0Q2FjaGUsXG4gIHZhbGlkYXRlQ29udGV4dENhY2hlUmVxdWVzdDogKCkgPT4gdmFsaWRhdGVDb250ZXh0Q2FjaGVSZXF1ZXN0XG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKHV0aWxzX2V4cG9ydHMpO1xudmFyIGltcG9ydF9jcnlwdG8gPSBfX3RvRVNNKHJlcXVpcmUoXCJjcnlwdG9cIikpO1xudmFyIGltcG9ydF9nZW5raXQgPSByZXF1aXJlKFwiZ2Vua2l0XCIpO1xudmFyIGltcG9ydF9jb25zdGFudHMgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG52YXIgaW1wb3J0X3R5cGVzID0gcmVxdWlyZShcIi4vdHlwZXNcIik7XG5mdW5jdGlvbiBnZW5lcmF0ZUNhY2hlS2V5KHJlcXVlc3QpIHtcbiAgcmV0dXJuIGltcG9ydF9jcnlwdG8uZGVmYXVsdC5jcmVhdGVIYXNoKFwic2hhMjU2XCIpLnVwZGF0ZShKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSkuZGlnZXN0KFwiaGV4XCIpO1xufVxuZnVuY3Rpb24gZ2V0Q29udGVudEZvckNhY2hlKHJlcXVlc3QsIGNoYXRSZXF1ZXN0LCBtb2RlbFZlcnNpb24sIGNhY2hlQ29uZmlnRGV0YWlscykge1xuICBpZiAoIW1vZGVsVmVyc2lvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIG1vZGVsIHZlcnNpb24gcHJvdmlkZWQgZm9yIGNvbnRleHQgY2FjaGluZ1wiKTtcbiAgfVxuICBpZiAoIWNoYXRSZXF1ZXN0Lmhpc3Rvcnk/Lmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGhpc3RvcnkgcHJvdmlkZWQgZm9yIGNvbnRleHQgY2FjaGluZ1wiKTtcbiAgfVxuICB2YWxpZGF0ZUhpc3RvcnlMZW5ndGgocmVxdWVzdCwgY2hhdFJlcXVlc3QpO1xuICBjb25zdCB7IGVuZE9mQ2FjaGVkQ29udGVudHMsIGNhY2hlQ29uZmlnIH0gPSBjYWNoZUNvbmZpZ0RldGFpbHM7XG4gIGNvbnN0IGNhY2hlZENvbnRlbnQgPSB7XG4gICAgbW9kZWw6IG1vZGVsVmVyc2lvbixcbiAgICBjb250ZW50czogY2hhdFJlcXVlc3QuaGlzdG9yeS5zbGljZSgwLCBlbmRPZkNhY2hlZENvbnRlbnRzICsgMSlcbiAgfTtcbiAgY2hhdFJlcXVlc3QuaGlzdG9yeSA9IGNoYXRSZXF1ZXN0Lmhpc3Rvcnkuc2xpY2UoZW5kT2ZDYWNoZWRDb250ZW50cyArIDEpO1xuICByZXR1cm4geyBjYWNoZWRDb250ZW50LCBjaGF0UmVxdWVzdCwgY2FjaGVDb25maWcgfTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlSGlzdG9yeUxlbmd0aChyZXF1ZXN0LCBjaGF0UmVxdWVzdCkge1xuICBpZiAoY2hhdFJlcXVlc3QuaGlzdG9yeT8ubGVuZ3RoICE9PSByZXF1ZXN0Lm1lc3NhZ2VzLmxlbmd0aCAtIDEpIHtcbiAgICB0aHJvdyBuZXcgaW1wb3J0X2dlbmtpdC5HZW5raXRFcnJvcih7XG4gICAgICBzdGF0dXM6IFwiSU5URVJOQUxcIixcbiAgICAgIG1lc3NhZ2U6IFwiR2Vua2l0IHJlcXVlc3QgaGlzdG9yeSBhbmQgR2VtaW5pIGNoYXQgcmVxdWVzdCBoaXN0b3J5IGxlbmd0aCBkbyBub3QgbWF0Y2hcIlxuICAgIH0pO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBsb29rdXBDb250ZXh0Q2FjaGUoY2FjaGVNYW5hZ2VyLCBjYWNoZUtleSwgbWF4UGFnZXMgPSAxMDAsIHBhZ2VTaXplID0gMTAwKSB7XG4gIGxldCBjdXJyZW50UGFnZSA9IDA7XG4gIGxldCBwYWdlVG9rZW47XG4gIHRyeSB7XG4gICAgd2hpbGUgKGN1cnJlbnRQYWdlIDwgbWF4UGFnZXMpIHtcbiAgICAgIGNvbnN0IHsgY2FjaGVkQ29udGVudHMsIG5leHRQYWdlVG9rZW4gfSA9IGF3YWl0IGNhY2hlTWFuYWdlci5saXN0KHtcbiAgICAgICAgcGFnZVNpemUsXG4gICAgICAgIHBhZ2VUb2tlblxuICAgICAgfSk7XG4gICAgICBjb25zdCBmb3VuZCA9IGNhY2hlZENvbnRlbnRzPy5maW5kKFxuICAgICAgICAoY29udGVudCkgPT4gY29udGVudC5kaXNwbGF5TmFtZSA9PT0gY2FjaGVLZXlcbiAgICAgICk7XG4gICAgICBpZiAoZm91bmQpIHJldHVybiBmb3VuZDtcbiAgICAgIGlmICghbmV4dFBhZ2VUb2tlbikgYnJlYWs7XG4gICAgICBwYWdlVG9rZW4gPSBuZXh0UGFnZVRva2VuO1xuICAgICAgY3VycmVudFBhZ2UrKztcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIE5ldHdvcmsgRXJyb3JcIjtcbiAgICB0aHJvdyBuZXcgaW1wb3J0X2dlbmtpdC5HZW5raXRFcnJvcih7XG4gICAgICBzdGF0dXM6IFwiSU5URVJOQUxcIixcbiAgICAgIG1lc3NhZ2U6IGBFcnJvciBsb29raW5nIHVwIGNvbnRleHQgY2FjaGU6ICR7bWVzc2FnZX1gXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5jb25zdCBleHRyYWN0Q2FjaGVDb25maWcgPSAocmVxdWVzdCkgPT4ge1xuICBjb25zdCBlbmRPZkNhY2hlZENvbnRlbnRzID0gZmluZExhc3RJbmRleChcbiAgICByZXF1ZXN0Lm1lc3NhZ2VzLFxuICAgIChtZXNzYWdlKSA9PiAhIW1lc3NhZ2UubWV0YWRhdGE/LmNhY2hlXG4gICk7XG4gIHJldHVybiBlbmRPZkNhY2hlZENvbnRlbnRzID09PSAtMSA/IG51bGwgOiB7XG4gICAgZW5kT2ZDYWNoZWRDb250ZW50cyxcbiAgICBjYWNoZUNvbmZpZzogaW1wb3J0X3R5cGVzLmNhY2hlQ29uZmlnU2NoZW1hLnBhcnNlKFxuICAgICAgcmVxdWVzdC5tZXNzYWdlc1tlbmRPZkNhY2hlZENvbnRlbnRzXS5tZXRhZGF0YT8uY2FjaGVcbiAgICApXG4gIH07XG59O1xuZnVuY3Rpb24gdmFsaWRhdGVDb250ZXh0Q2FjaGVSZXF1ZXN0KHJlcXVlc3QsIG1vZGVsVmVyc2lvbikge1xuICBpZiAoIW1vZGVsVmVyc2lvbiB8fCAhaW1wb3J0X2NvbnN0YW50cy5DT05URVhUX0NBQ0hFX1NVUFBPUlRFRF9NT0RFTFMuaW5jbHVkZXMobW9kZWxWZXJzaW9uKSkge1xuICAgIHRocm93IG5ldyBpbXBvcnRfZ2Vua2l0LkdlbmtpdEVycm9yKHtcbiAgICAgIHN0YXR1czogXCJJTlZBTElEX0FSR1VNRU5UXCIsXG4gICAgICBtZXNzYWdlOiBpbXBvcnRfY29uc3RhbnRzLklOVkFMSURfQVJHVU1FTlRfTUVTU0FHRVMubW9kZWxWZXJzaW9uXG4gICAgfSk7XG4gIH1cbiAgaWYgKHJlcXVlc3QudG9vbHM/Lmxlbmd0aClcbiAgICB0aHJvdyBuZXcgaW1wb3J0X2dlbmtpdC5HZW5raXRFcnJvcih7XG4gICAgICBzdGF0dXM6IFwiSU5WQUxJRF9BUkdVTUVOVFwiLFxuICAgICAgbWVzc2FnZTogaW1wb3J0X2NvbnN0YW50cy5JTlZBTElEX0FSR1VNRU5UX01FU1NBR0VTLnRvb2xzXG4gICAgfSk7XG4gIGlmIChyZXF1ZXN0LmNvbmZpZz8uY29kZUV4ZWN1dGlvbilcbiAgICB0aHJvdyBuZXcgaW1wb3J0X2dlbmtpdC5HZW5raXRFcnJvcih7XG4gICAgICBzdGF0dXM6IFwiSU5WQUxJRF9BUkdVTUVOVFwiLFxuICAgICAgbWVzc2FnZTogaW1wb3J0X2NvbnN0YW50cy5JTlZBTElEX0FSR1VNRU5UX01FU1NBR0VTLmNvZGVFeGVjdXRpb25cbiAgICB9KTtcbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBmaW5kTGFzdEluZGV4KGFycmF5LCBjYWxsYmFjaykge1xuICBmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAoY2FsbGJhY2soYXJyYXlbaV0sIGksIGFycmF5KSkgcmV0dXJuIGk7XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuZnVuY3Rpb24gY2FsY3VsYXRlVFRMKGNhY2hlQ29uZmlnKSB7XG4gIGlmIChjYWNoZUNvbmZpZy5jYWNoZUNvbmZpZyA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBpbXBvcnRfY29uc3RhbnRzLkRFRkFVTFRfVFRMO1xuICB9XG4gIGlmIChjYWNoZUNvbmZpZy5jYWNoZUNvbmZpZyA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuICByZXR1cm4gY2FjaGVDb25maWcuY2FjaGVDb25maWcudHRsU2Vjb25kcyB8fCBpbXBvcnRfY29uc3RhbnRzLkRFRkFVTFRfVFRMO1xufVxuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNhbGN1bGF0ZVRUTCxcbiAgZXh0cmFjdENhY2hlQ29uZmlnLFxuICBmaW5kTGFzdEluZGV4LFxuICBnZW5lcmF0ZUNhY2hlS2V5LFxuICBnZXRDb250ZW50Rm9yQ2FjaGUsXG4gIGxvb2t1cENvbnRleHRDYWNoZSxcbiAgdmFsaWRhdGVDb250ZXh0Q2FjaGVSZXF1ZXN0XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/utils.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@genkit-ai/googleai/lib/embedder.js":
/*!**********************************************************!*\
  !*** ./node_modules/@genkit-ai/googleai/lib/embedder.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar embedder_exports = {};\n__export(embedder_exports, {\n  GeminiEmbeddingConfigSchema: () => GeminiEmbeddingConfigSchema,\n  SUPPORTED_MODELS: () => SUPPORTED_MODELS,\n  TaskTypeSchema: () => TaskTypeSchema,\n  defineGoogleAIEmbedder: () => defineGoogleAIEmbedder,\n  textEmbedding004: () => textEmbedding004,\n  textEmbeddingGecko001: () => textEmbeddingGecko001\n});\nmodule.exports = __toCommonJS(embedder_exports);\nvar import_generative_ai = __webpack_require__(/*! @google/generative-ai */ \"(action-browser)/./node_modules/@google/generative-ai/dist/index.js\");\nvar import_genkit = __webpack_require__(/*! genkit */ \"genkit?8a2d\");\nvar import_embedder = __webpack_require__(/*! genkit/embedder */ \"genkit/embedder\");\nvar import_common = __webpack_require__(/*! ./common.js */ \"(action-browser)/./node_modules/@genkit-ai/googleai/lib/common.js\");\nconst TaskTypeSchema = import_genkit.z.enum([\n  \"RETRIEVAL_DOCUMENT\",\n  \"RETRIEVAL_QUERY\",\n  \"SEMANTIC_SIMILARITY\",\n  \"CLASSIFICATION\",\n  \"CLUSTERING\"\n]);\nconst GeminiEmbeddingConfigSchema = import_genkit.z.object({\n  /** Override the API key provided at plugin initialization. */\n  apiKey: import_genkit.z.string().optional(),\n  /**\n   * The `task_type` parameter is defined as the intended downstream application to help the model\n   * produce better quality embeddings.\n   **/\n  taskType: TaskTypeSchema.optional(),\n  title: import_genkit.z.string().optional(),\n  version: import_genkit.z.string().optional(),\n  /**\n   * The `outputDimensionality` parameter allows you to specify the dimensionality of the embedding output.\n   * By default, the model generates embeddings with 768 dimensions. Models such as\n   * `text-embedding-004`, `text-embedding-005`, and `text-multilingual-embedding-002`\n   * allow the output dimensionality to be adjusted between 1 and 768.\n   * By selecting a smaller output dimensionality, users can save memory and storage space, leading to more efficient computations.\n   **/\n  outputDimensionality: import_genkit.z.number().min(1).max(768).optional()\n});\nconst textEmbeddingGecko001 = (0, import_embedder.embedderRef)({\n  name: \"googleai/embedding-001\",\n  configSchema: GeminiEmbeddingConfigSchema,\n  info: {\n    dimensions: 768,\n    label: \"Google Gen AI - Text Embedding Gecko (Legacy)\",\n    supports: {\n      input: [\"text\"]\n    }\n  }\n});\nconst textEmbedding004 = (0, import_embedder.embedderRef)({\n  name: \"googleai/text-embedding-004\",\n  configSchema: GeminiEmbeddingConfigSchema,\n  info: {\n    dimensions: 768,\n    label: \"Google Gen AI - Text Embedding 001\",\n    supports: {\n      input: [\"text\"]\n    }\n  }\n});\nconst SUPPORTED_MODELS = {\n  \"embedding-001\": textEmbeddingGecko001,\n  \"text-embedding-004\": textEmbedding004\n};\nfunction defineGoogleAIEmbedder(ai, name, pluginOptions) {\n  let apiKey;\n  if (pluginOptions.apiKey !== false) {\n    apiKey = pluginOptions?.apiKey || (0, import_common.getApiKeyFromEnvVar)();\n    if (!apiKey)\n      throw new Error(\n        \"Please pass in the API key or set either GEMINI_API_KEY or GOOGLE_API_KEY environment variable.\\nFor more details see https://firebase.google.com/docs/genkit/plugins/google-genai\"\n      );\n  }\n  const embedder = SUPPORTED_MODELS[name] ?? (0, import_embedder.embedderRef)({\n    name,\n    configSchema: GeminiEmbeddingConfigSchema,\n    info: {\n      dimensions: 768,\n      label: `Google AI - ${name}`,\n      supports: {\n        input: [\"text\", \"image\", \"video\"]\n      }\n    }\n  });\n  const apiModelName = embedder.name.startsWith(\"googleai/\") ? embedder.name.substring(\"googleai/\".length) : embedder.name;\n  return ai.defineEmbedder(\n    {\n      name: embedder.name,\n      configSchema: GeminiEmbeddingConfigSchema,\n      info: embedder.info\n    },\n    async (input, options) => {\n      if (pluginOptions.apiKey === false && !options?.apiKey) {\n        throw new import_genkit.GenkitError({\n          status: \"INVALID_ARGUMENT\",\n          message: \"GoogleAI plugin was initialized with {apiKey: false} but no apiKey configuration was passed at call time.\"\n        });\n      }\n      const client = new import_generative_ai.GoogleGenerativeAI(\n        options?.apiKey || apiKey\n      ).getGenerativeModel({\n        model: options?.version || embedder.config?.version || embedder.version || apiModelName\n      });\n      const embeddings = await Promise.all(\n        input.map(async (doc) => {\n          const response = await client.embedContent({\n            taskType: options?.taskType,\n            title: options?.title,\n            content: {\n              role: \"\",\n              parts: [{ text: doc.text }]\n            },\n            outputDimensionality: options?.outputDimensionality\n          });\n          const values = response.embedding.values;\n          return { embedding: values };\n        })\n      );\n      return { embeddings };\n    }\n  );\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=embedder.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9lbWJlZGRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSwyQkFBMkIsbUJBQU8sQ0FBQyxrR0FBdUI7QUFDMUQsb0JBQW9CLG1CQUFPLENBQUMsMkJBQVE7QUFDcEMsc0JBQXNCLG1CQUFPLENBQUMsd0NBQWlCO0FBQy9DLG9CQUFvQixtQkFBTyxDQUFDLHNGQUFhO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixLQUFLO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxlQUFlO0FBQ3pFLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QyxhQUFhO0FBQ2I7QUFDQSxXQUFXO0FBQ1g7QUFDQSxtQkFBbUI7QUFDbkIsU0FBUztBQUNUO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxDQU9MO0FBQ0QiLCJzb3VyY2VzIjpbIi9ob21lL3Byb2plY3Qvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvZ29vZ2xlYWkvbGliL2VtYmVkZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0NvbW1vbkpTID0gKG1vZCkgPT4gX19jb3B5UHJvcHMoX19kZWZQcm9wKHt9LCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KSwgbW9kKTtcbnZhciBlbWJlZGRlcl9leHBvcnRzID0ge307XG5fX2V4cG9ydChlbWJlZGRlcl9leHBvcnRzLCB7XG4gIEdlbWluaUVtYmVkZGluZ0NvbmZpZ1NjaGVtYTogKCkgPT4gR2VtaW5pRW1iZWRkaW5nQ29uZmlnU2NoZW1hLFxuICBTVVBQT1JURURfTU9ERUxTOiAoKSA9PiBTVVBQT1JURURfTU9ERUxTLFxuICBUYXNrVHlwZVNjaGVtYTogKCkgPT4gVGFza1R5cGVTY2hlbWEsXG4gIGRlZmluZUdvb2dsZUFJRW1iZWRkZXI6ICgpID0+IGRlZmluZUdvb2dsZUFJRW1iZWRkZXIsXG4gIHRleHRFbWJlZGRpbmcwMDQ6ICgpID0+IHRleHRFbWJlZGRpbmcwMDQsXG4gIHRleHRFbWJlZGRpbmdHZWNrbzAwMTogKCkgPT4gdGV4dEVtYmVkZGluZ0dlY2tvMDAxXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKGVtYmVkZGVyX2V4cG9ydHMpO1xudmFyIGltcG9ydF9nZW5lcmF0aXZlX2FpID0gcmVxdWlyZShcIkBnb29nbGUvZ2VuZXJhdGl2ZS1haVwiKTtcbnZhciBpbXBvcnRfZ2Vua2l0ID0gcmVxdWlyZShcImdlbmtpdFwiKTtcbnZhciBpbXBvcnRfZW1iZWRkZXIgPSByZXF1aXJlKFwiZ2Vua2l0L2VtYmVkZGVyXCIpO1xudmFyIGltcG9ydF9jb21tb24gPSByZXF1aXJlKFwiLi9jb21tb24uanNcIik7XG5jb25zdCBUYXNrVHlwZVNjaGVtYSA9IGltcG9ydF9nZW5raXQuei5lbnVtKFtcbiAgXCJSRVRSSUVWQUxfRE9DVU1FTlRcIixcbiAgXCJSRVRSSUVWQUxfUVVFUllcIixcbiAgXCJTRU1BTlRJQ19TSU1JTEFSSVRZXCIsXG4gIFwiQ0xBU1NJRklDQVRJT05cIixcbiAgXCJDTFVTVEVSSU5HXCJcbl0pO1xuY29uc3QgR2VtaW5pRW1iZWRkaW5nQ29uZmlnU2NoZW1hID0gaW1wb3J0X2dlbmtpdC56Lm9iamVjdCh7XG4gIC8qKiBPdmVycmlkZSB0aGUgQVBJIGtleSBwcm92aWRlZCBhdCBwbHVnaW4gaW5pdGlhbGl6YXRpb24uICovXG4gIGFwaUtleTogaW1wb3J0X2dlbmtpdC56LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBUaGUgYHRhc2tfdHlwZWAgcGFyYW1ldGVyIGlzIGRlZmluZWQgYXMgdGhlIGludGVuZGVkIGRvd25zdHJlYW0gYXBwbGljYXRpb24gdG8gaGVscCB0aGUgbW9kZWxcbiAgICogcHJvZHVjZSBiZXR0ZXIgcXVhbGl0eSBlbWJlZGRpbmdzLlxuICAgKiovXG4gIHRhc2tUeXBlOiBUYXNrVHlwZVNjaGVtYS5vcHRpb25hbCgpLFxuICB0aXRsZTogaW1wb3J0X2dlbmtpdC56LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHZlcnNpb246IGltcG9ydF9nZW5raXQuei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogVGhlIGBvdXRwdXREaW1lbnNpb25hbGl0eWAgcGFyYW1ldGVyIGFsbG93cyB5b3UgdG8gc3BlY2lmeSB0aGUgZGltZW5zaW9uYWxpdHkgb2YgdGhlIGVtYmVkZGluZyBvdXRwdXQuXG4gICAqIEJ5IGRlZmF1bHQsIHRoZSBtb2RlbCBnZW5lcmF0ZXMgZW1iZWRkaW5ncyB3aXRoIDc2OCBkaW1lbnNpb25zLiBNb2RlbHMgc3VjaCBhc1xuICAgKiBgdGV4dC1lbWJlZGRpbmctMDA0YCwgYHRleHQtZW1iZWRkaW5nLTAwNWAsIGFuZCBgdGV4dC1tdWx0aWxpbmd1YWwtZW1iZWRkaW5nLTAwMmBcbiAgICogYWxsb3cgdGhlIG91dHB1dCBkaW1lbnNpb25hbGl0eSB0byBiZSBhZGp1c3RlZCBiZXR3ZWVuIDEgYW5kIDc2OC5cbiAgICogQnkgc2VsZWN0aW5nIGEgc21hbGxlciBvdXRwdXQgZGltZW5zaW9uYWxpdHksIHVzZXJzIGNhbiBzYXZlIG1lbW9yeSBhbmQgc3RvcmFnZSBzcGFjZSwgbGVhZGluZyB0byBtb3JlIGVmZmljaWVudCBjb21wdXRhdGlvbnMuXG4gICAqKi9cbiAgb3V0cHV0RGltZW5zaW9uYWxpdHk6IGltcG9ydF9nZW5raXQuei5udW1iZXIoKS5taW4oMSkubWF4KDc2OCkub3B0aW9uYWwoKVxufSk7XG5jb25zdCB0ZXh0RW1iZWRkaW5nR2Vja28wMDEgPSAoMCwgaW1wb3J0X2VtYmVkZGVyLmVtYmVkZGVyUmVmKSh7XG4gIG5hbWU6IFwiZ29vZ2xlYWkvZW1iZWRkaW5nLTAwMVwiLFxuICBjb25maWdTY2hlbWE6IEdlbWluaUVtYmVkZGluZ0NvbmZpZ1NjaGVtYSxcbiAgaW5mbzoge1xuICAgIGRpbWVuc2lvbnM6IDc2OCxcbiAgICBsYWJlbDogXCJHb29nbGUgR2VuIEFJIC0gVGV4dCBFbWJlZGRpbmcgR2Vja28gKExlZ2FjeSlcIixcbiAgICBzdXBwb3J0czoge1xuICAgICAgaW5wdXQ6IFtcInRleHRcIl1cbiAgICB9XG4gIH1cbn0pO1xuY29uc3QgdGV4dEVtYmVkZGluZzAwNCA9ICgwLCBpbXBvcnRfZW1iZWRkZXIuZW1iZWRkZXJSZWYpKHtcbiAgbmFtZTogXCJnb29nbGVhaS90ZXh0LWVtYmVkZGluZy0wMDRcIixcbiAgY29uZmlnU2NoZW1hOiBHZW1pbmlFbWJlZGRpbmdDb25maWdTY2hlbWEsXG4gIGluZm86IHtcbiAgICBkaW1lbnNpb25zOiA3NjgsXG4gICAgbGFiZWw6IFwiR29vZ2xlIEdlbiBBSSAtIFRleHQgRW1iZWRkaW5nIDAwMVwiLFxuICAgIHN1cHBvcnRzOiB7XG4gICAgICBpbnB1dDogW1widGV4dFwiXVxuICAgIH1cbiAgfVxufSk7XG5jb25zdCBTVVBQT1JURURfTU9ERUxTID0ge1xuICBcImVtYmVkZGluZy0wMDFcIjogdGV4dEVtYmVkZGluZ0dlY2tvMDAxLFxuICBcInRleHQtZW1iZWRkaW5nLTAwNFwiOiB0ZXh0RW1iZWRkaW5nMDA0XG59O1xuZnVuY3Rpb24gZGVmaW5lR29vZ2xlQUlFbWJlZGRlcihhaSwgbmFtZSwgcGx1Z2luT3B0aW9ucykge1xuICBsZXQgYXBpS2V5O1xuICBpZiAocGx1Z2luT3B0aW9ucy5hcGlLZXkgIT09IGZhbHNlKSB7XG4gICAgYXBpS2V5ID0gcGx1Z2luT3B0aW9ucz8uYXBpS2V5IHx8ICgwLCBpbXBvcnRfY29tbW9uLmdldEFwaUtleUZyb21FbnZWYXIpKCk7XG4gICAgaWYgKCFhcGlLZXkpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiUGxlYXNlIHBhc3MgaW4gdGhlIEFQSSBrZXkgb3Igc2V0IGVpdGhlciBHRU1JTklfQVBJX0tFWSBvciBHT09HTEVfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZS5cXG5Gb3IgbW9yZSBkZXRhaWxzIHNlZSBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9nZW5raXQvcGx1Z2lucy9nb29nbGUtZ2VuYWlcIlxuICAgICAgKTtcbiAgfVxuICBjb25zdCBlbWJlZGRlciA9IFNVUFBPUlRFRF9NT0RFTFNbbmFtZV0gPz8gKDAsIGltcG9ydF9lbWJlZGRlci5lbWJlZGRlclJlZikoe1xuICAgIG5hbWUsXG4gICAgY29uZmlnU2NoZW1hOiBHZW1pbmlFbWJlZGRpbmdDb25maWdTY2hlbWEsXG4gICAgaW5mbzoge1xuICAgICAgZGltZW5zaW9uczogNzY4LFxuICAgICAgbGFiZWw6IGBHb29nbGUgQUkgLSAke25hbWV9YCxcbiAgICAgIHN1cHBvcnRzOiB7XG4gICAgICAgIGlucHV0OiBbXCJ0ZXh0XCIsIFwiaW1hZ2VcIiwgXCJ2aWRlb1wiXVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGNvbnN0IGFwaU1vZGVsTmFtZSA9IGVtYmVkZGVyLm5hbWUuc3RhcnRzV2l0aChcImdvb2dsZWFpL1wiKSA/IGVtYmVkZGVyLm5hbWUuc3Vic3RyaW5nKFwiZ29vZ2xlYWkvXCIubGVuZ3RoKSA6IGVtYmVkZGVyLm5hbWU7XG4gIHJldHVybiBhaS5kZWZpbmVFbWJlZGRlcihcbiAgICB7XG4gICAgICBuYW1lOiBlbWJlZGRlci5uYW1lLFxuICAgICAgY29uZmlnU2NoZW1hOiBHZW1pbmlFbWJlZGRpbmdDb25maWdTY2hlbWEsXG4gICAgICBpbmZvOiBlbWJlZGRlci5pbmZvXG4gICAgfSxcbiAgICBhc3luYyAoaW5wdXQsIG9wdGlvbnMpID0+IHtcbiAgICAgIGlmIChwbHVnaW5PcHRpb25zLmFwaUtleSA9PT0gZmFsc2UgJiYgIW9wdGlvbnM/LmFwaUtleSkge1xuICAgICAgICB0aHJvdyBuZXcgaW1wb3J0X2dlbmtpdC5HZW5raXRFcnJvcih7XG4gICAgICAgICAgc3RhdHVzOiBcIklOVkFMSURfQVJHVU1FTlRcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIkdvb2dsZUFJIHBsdWdpbiB3YXMgaW5pdGlhbGl6ZWQgd2l0aCB7YXBpS2V5OiBmYWxzZX0gYnV0IG5vIGFwaUtleSBjb25maWd1cmF0aW9uIHdhcyBwYXNzZWQgYXQgY2FsbCB0aW1lLlwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgY2xpZW50ID0gbmV3IGltcG9ydF9nZW5lcmF0aXZlX2FpLkdvb2dsZUdlbmVyYXRpdmVBSShcbiAgICAgICAgb3B0aW9ucz8uYXBpS2V5IHx8IGFwaUtleVxuICAgICAgKS5nZXRHZW5lcmF0aXZlTW9kZWwoe1xuICAgICAgICBtb2RlbDogb3B0aW9ucz8udmVyc2lvbiB8fCBlbWJlZGRlci5jb25maWc/LnZlcnNpb24gfHwgZW1iZWRkZXIudmVyc2lvbiB8fCBhcGlNb2RlbE5hbWVcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZW1iZWRkaW5ncyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBpbnB1dC5tYXAoYXN5bmMgKGRvYykgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmVtYmVkQ29udGVudCh7XG4gICAgICAgICAgICB0YXNrVHlwZTogb3B0aW9ucz8udGFza1R5cGUsXG4gICAgICAgICAgICB0aXRsZTogb3B0aW9ucz8udGl0bGUsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgIHJvbGU6IFwiXCIsXG4gICAgICAgICAgICAgIHBhcnRzOiBbeyB0ZXh0OiBkb2MudGV4dCB9XVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG91dHB1dERpbWVuc2lvbmFsaXR5OiBvcHRpb25zPy5vdXRwdXREaW1lbnNpb25hbGl0eVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHJlc3BvbnNlLmVtYmVkZGluZy52YWx1ZXM7XG4gICAgICAgICAgcmV0dXJuIHsgZW1iZWRkaW5nOiB2YWx1ZXMgfTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICByZXR1cm4geyBlbWJlZGRpbmdzIH07XG4gICAgfVxuICApO1xufVxuLy8gQW5ub3RhdGUgdGhlIENvbW1vbkpTIGV4cG9ydCBuYW1lcyBmb3IgRVNNIGltcG9ydCBpbiBub2RlOlxuMCAmJiAobW9kdWxlLmV4cG9ydHMgPSB7XG4gIEdlbWluaUVtYmVkZGluZ0NvbmZpZ1NjaGVtYSxcbiAgU1VQUE9SVEVEX01PREVMUyxcbiAgVGFza1R5cGVTY2hlbWEsXG4gIGRlZmluZUdvb2dsZUFJRW1iZWRkZXIsXG4gIHRleHRFbWJlZGRpbmcwMDQsXG4gIHRleHRFbWJlZGRpbmdHZWNrbzAwMVxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWJlZGRlci5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@genkit-ai/googleai/lib/embedder.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@genkit-ai/googleai/lib/gemini.js":
/*!********************************************************!*\
  !*** ./node_modules/@genkit-ai/googleai/lib/gemini.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar gemini_exports = {};\n__export(gemini_exports, {\n  GENERIC_GEMINI_MODEL: () => GENERIC_GEMINI_MODEL,\n  GeminiConfigSchema: () => GeminiConfigSchema,\n  SUPPORTED_GEMINI_MODELS: () => SUPPORTED_GEMINI_MODELS,\n  SUPPORTED_V15_MODELS: () => SUPPORTED_V15_MODELS,\n  SUPPORTED_V1_MODELS: () => SUPPORTED_V1_MODELS,\n  cleanSchema: () => cleanSchema,\n  defineGoogleAIModel: () => defineGoogleAIModel,\n  fromGeminiCandidate: () => fromGeminiCandidate,\n  gemini: () => gemini,\n  gemini10Pro: () => gemini10Pro,\n  gemini15Flash: () => gemini15Flash,\n  gemini15Flash8b: () => gemini15Flash8b,\n  gemini15Pro: () => gemini15Pro,\n  gemini20Flash: () => gemini20Flash,\n  gemini20FlashExp: () => gemini20FlashExp,\n  gemini20FlashLite: () => gemini20FlashLite,\n  gemini20ProExp0205: () => gemini20ProExp0205,\n  gemini25FlashPreview0417: () => gemini25FlashPreview0417,\n  gemini25ProExp0325: () => gemini25ProExp0325,\n  gemini25ProPreview0325: () => gemini25ProPreview0325,\n  toGeminiMessage: () => toGeminiMessage,\n  toGeminiSystemInstruction: () => toGeminiSystemInstruction,\n  toGeminiTool: () => toGeminiTool\n});\nmodule.exports = __toCommonJS(gemini_exports);\nvar import_generative_ai = __webpack_require__(/*! @google/generative-ai */ \"(action-browser)/./node_modules/@google/generative-ai/dist/index.js\");\nvar import_genkit = __webpack_require__(/*! genkit */ \"genkit?8a2d\");\nvar import_model = __webpack_require__(/*! genkit/model */ \"genkit/model?236a\");\nvar import_middleware = __webpack_require__(/*! genkit/model/middleware */ \"genkit/model/middleware\");\nvar import_tracing = __webpack_require__(/*! genkit/tracing */ \"genkit/tracing\");\nvar import_common = __webpack_require__(/*! ./common */ \"(action-browser)/./node_modules/@genkit-ai/googleai/lib/common.js\");\nvar import_context_caching = __webpack_require__(/*! ./context-caching */ \"(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/index.js\");\nvar import_utils = __webpack_require__(/*! ./context-caching/utils */ \"(action-browser)/./node_modules/@genkit-ai/googleai/lib/context-caching/utils.js\");\nconst SafetySettingsSchema = import_genkit.z.object({\n  category: import_genkit.z.enum([\n    \"HARM_CATEGORY_UNSPECIFIED\",\n    \"HARM_CATEGORY_HATE_SPEECH\",\n    \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\n    \"HARM_CATEGORY_HARASSMENT\",\n    \"HARM_CATEGORY_DANGEROUS_CONTENT\",\n    \"HARM_CATEGORY_CIVIC_INTEGRITY\"\n  ]),\n  threshold: import_genkit.z.enum([\n    \"BLOCK_LOW_AND_ABOVE\",\n    \"BLOCK_MEDIUM_AND_ABOVE\",\n    \"BLOCK_ONLY_HIGH\",\n    \"BLOCK_NONE\"\n  ])\n});\nconst GeminiConfigSchema = import_model.GenerationCommonConfigSchema.extend({\n  apiKey: import_genkit.z.string().describe(\"Overrides the plugin-configured API key, if specified.\").optional(),\n  safetySettings: import_genkit.z.array(SafetySettingsSchema).describe(\n    \"Adjust how likely you are to see responses that could be harmful. Content is blocked based on the probability that it is harmful.\"\n  ).optional(),\n  codeExecution: import_genkit.z.union([import_genkit.z.boolean(), import_genkit.z.object({}).strict()]).describe(\"Enables the model to generate and run code.\").optional(),\n  contextCache: import_genkit.z.boolean().describe(\n    \"Context caching allows you to save and reuse precomputed input tokens that you wish to use repeatedly.\"\n  ).optional(),\n  functionCallingConfig: import_genkit.z.object({\n    mode: import_genkit.z.enum([\"MODE_UNSPECIFIED\", \"AUTO\", \"ANY\", \"NONE\"]).optional(),\n    allowedFunctionNames: import_genkit.z.array(import_genkit.z.string()).optional()\n  }).describe(\n    \"Controls how the model uses the provided tools (function declarations). With AUTO (Default) mode, the model decides whether to generate a natural language response or suggest a function call based on the prompt and context. With ANY, the model is constrained to always predict a function call and guarantee function schema adherence. With NONE, the model is prohibited from making function calls.\"\n  ).optional(),\n  responseModalities: import_genkit.z.array(import_genkit.z.enum([\"TEXT\", \"IMAGE\", \"AUDIO\"])).describe(\n    \"The modalities to be used in response. Only supported for 'gemini-2.0-flash-exp' model at present.\"\n  ).optional()\n}).passthrough();\nconst gemini10Pro = (0, import_model.modelRef)({\n  name: \"googleai/gemini-1.0-pro\",\n  info: {\n    label: \"Google AI - Gemini Pro\",\n    versions: [\"gemini-pro\", \"gemini-1.0-pro-latest\", \"gemini-1.0-pro-001\"],\n    supports: {\n      multiturn: true,\n      media: false,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\"\n    }\n  },\n  configSchema: GeminiConfigSchema\n});\nconst gemini15Pro = (0, import_model.modelRef)({\n  name: \"googleai/gemini-1.5-pro\",\n  info: {\n    label: \"Google AI - Gemini 1.5 Pro\",\n    supports: {\n      multiturn: true,\n      media: true,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\"\n    },\n    versions: [\n      \"gemini-1.5-pro-latest\",\n      \"gemini-1.5-pro-001\",\n      \"gemini-1.5-pro-002\"\n    ]\n  },\n  configSchema: GeminiConfigSchema\n});\nconst gemini15Flash = (0, import_model.modelRef)({\n  name: \"googleai/gemini-1.5-flash\",\n  info: {\n    label: \"Google AI - Gemini 1.5 Flash\",\n    supports: {\n      multiturn: true,\n      media: true,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\",\n      // @ts-ignore\n      contextCache: true\n    },\n    versions: [\n      \"gemini-1.5-flash-latest\",\n      \"gemini-1.5-flash-001\",\n      \"gemini-1.5-flash-002\"\n    ]\n  },\n  configSchema: GeminiConfigSchema\n});\nconst gemini15Flash8b = (0, import_model.modelRef)({\n  name: \"googleai/gemini-1.5-flash-8b\",\n  info: {\n    label: \"Google AI - Gemini 1.5 Flash\",\n    supports: {\n      multiturn: true,\n      media: true,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\"\n    },\n    versions: [\"gemini-1.5-flash-8b-latest\", \"gemini-1.5-flash-8b-001\"]\n  },\n  configSchema: GeminiConfigSchema\n});\nconst gemini20Flash = (0, import_model.modelRef)({\n  name: \"googleai/gemini-2.0-flash\",\n  info: {\n    label: \"Google AI - Gemini 2.0 Flash\",\n    versions: [],\n    supports: {\n      multiturn: true,\n      media: true,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\"\n    }\n  },\n  configSchema: GeminiConfigSchema\n});\nconst gemini20FlashExp = (0, import_model.modelRef)({\n  name: \"googleai/gemini-2.0-flash-exp\",\n  info: {\n    label: \"Google AI - Gemini 2.0 Flash (Experimental)\",\n    versions: [],\n    supports: {\n      multiturn: true,\n      media: true,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\"\n    }\n  },\n  configSchema: GeminiConfigSchema\n});\nconst gemini20FlashLite = (0, import_model.modelRef)({\n  name: \"googleai/gemini-2.0-flash-lite\",\n  info: {\n    label: \"Google AI - Gemini 2.0 Flash Lite\",\n    versions: [],\n    supports: {\n      multiturn: true,\n      media: true,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\"\n    }\n  },\n  configSchema: GeminiConfigSchema\n});\nconst gemini20ProExp0205 = (0, import_model.modelRef)({\n  name: \"googleai/gemini-2.0-pro-exp-02-05\",\n  info: {\n    label: \"Google AI - Gemini 2.0 Pro Exp 02-05\",\n    versions: [],\n    supports: {\n      multiturn: true,\n      media: true,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\"\n    }\n  },\n  configSchema: GeminiConfigSchema\n});\nconst gemini25FlashPreview0417 = (0, import_model.modelRef)({\n  name: \"googleai/gemini-2.5-flash-preview-04-17\",\n  info: {\n    label: \"Google AI - Gemini 2.5 Flash Preview 04-17\",\n    versions: [],\n    supports: {\n      multiturn: true,\n      media: true,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\"\n    }\n  },\n  configSchema: GeminiConfigSchema\n});\nconst gemini25ProExp0325 = (0, import_model.modelRef)({\n  name: \"googleai/gemini-2.5-pro-exp-03-25\",\n  info: {\n    label: \"Google AI - Gemini 2.5 Pro Exp 03-25\",\n    versions: [],\n    supports: {\n      multiturn: true,\n      media: true,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\"\n    }\n  },\n  configSchema: GeminiConfigSchema\n});\nconst gemini25ProPreview0325 = (0, import_model.modelRef)({\n  name: \"googleai/gemini-2.5-pro-preview-03-25\",\n  info: {\n    label: \"Google AI - Gemini 2.5 Pro Preview 03-25\",\n    versions: [],\n    supports: {\n      multiturn: true,\n      media: true,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\"\n    }\n  },\n  configSchema: GeminiConfigSchema\n});\nconst SUPPORTED_V1_MODELS = {\n  \"gemini-1.0-pro\": gemini10Pro\n};\nconst SUPPORTED_V15_MODELS = {\n  \"gemini-1.5-pro\": gemini15Pro,\n  \"gemini-1.5-flash\": gemini15Flash,\n  \"gemini-1.5-flash-8b\": gemini15Flash8b,\n  \"gemini-2.0-flash\": gemini20Flash,\n  \"gemini-2.0-flash-lite\": gemini20FlashLite,\n  \"gemini-2.0-pro-exp-02-05\": gemini20ProExp0205,\n  \"gemini-2.0-flash-exp\": gemini20FlashExp,\n  \"gemini-2.5-pro-exp-03-25\": gemini25ProExp0325,\n  \"gemini-2.5-pro-preview-03-25\": gemini25ProPreview0325,\n  \"gemini-2.5-flash-preview-04-17\": gemini25FlashPreview0417\n};\nconst GENERIC_GEMINI_MODEL = (0, import_model.modelRef)({\n  name: \"googleai/gemini\",\n  configSchema: GeminiConfigSchema,\n  info: {\n    label: \"Google Gemini\",\n    supports: {\n      multiturn: true,\n      media: true,\n      tools: true,\n      toolChoice: true,\n      systemRole: true,\n      constrained: \"no-tools\"\n    }\n  }\n});\nconst SUPPORTED_GEMINI_MODELS = {\n  ...SUPPORTED_V1_MODELS,\n  ...SUPPORTED_V15_MODELS\n};\nfunction longestMatchingPrefix(version, potentialMatches) {\n  return potentialMatches.filter((p) => version.startsWith(p)).reduce(\n    (longest, current) => current.length > longest.length ? current : longest,\n    \"\"\n  );\n}\nfunction gemini(version, options = {}) {\n  const nearestModel = nearestGeminiModelRef(version);\n  return (0, import_model.modelRef)({\n    name: `googleai/${version}`,\n    config: options,\n    configSchema: GeminiConfigSchema,\n    info: {\n      ...nearestModel.info,\n      // If exact suffix match for a known model, use its label, otherwise create a new label\n      label: nearestModel.name.endsWith(version) ? nearestModel.info?.label : `Google AI - ${version}`\n    }\n  });\n}\nfunction nearestGeminiModelRef(version, options = {}) {\n  const matchingKey = longestMatchingPrefix(\n    version,\n    Object.keys(SUPPORTED_GEMINI_MODELS)\n  );\n  if (matchingKey) {\n    return SUPPORTED_GEMINI_MODELS[matchingKey].withConfig({\n      ...options,\n      version\n    });\n  }\n  return GENERIC_GEMINI_MODEL.withConfig({ ...options, version });\n}\nfunction toGeminiRole(role, model) {\n  switch (role) {\n    case \"user\":\n      return \"user\";\n    case \"model\":\n      return \"model\";\n    case \"system\":\n      if (model && SUPPORTED_V15_MODELS[model.name]) {\n        throw new Error(\n          \"system role is only supported for a single message in the first position\"\n        );\n      } else {\n        throw new Error(\"system role is not supported\");\n      }\n    case \"tool\":\n      return \"function\";\n    default:\n      return \"user\";\n  }\n}\nfunction convertSchemaProperty(property) {\n  if (!property || !property.type) {\n    return void 0;\n  }\n  const baseSchema = {};\n  if (property.description) {\n    baseSchema.description = property.description;\n  }\n  if (property.enum) {\n    baseSchema.type = import_generative_ai.SchemaType.STRING;\n    baseSchema.enum = property.enum;\n  }\n  if (property.nullable) {\n    baseSchema.nullable = property.nullable;\n  }\n  let propertyType;\n  if (Array.isArray(property.type)) {\n    const types = property.type;\n    if (types.includes(\"null\")) {\n      baseSchema.nullable = true;\n    }\n    propertyType = types.find((t) => t !== \"null\");\n  } else {\n    propertyType = property.type;\n  }\n  if (propertyType === \"object\") {\n    const nestedProperties = {};\n    Object.keys(property.properties).forEach((key) => {\n      nestedProperties[key] = convertSchemaProperty(property.properties[key]);\n    });\n    return {\n      ...baseSchema,\n      type: import_generative_ai.SchemaType.OBJECT,\n      properties: nestedProperties,\n      required: property.required\n    };\n  } else if (propertyType === \"array\") {\n    return {\n      ...baseSchema,\n      type: import_generative_ai.SchemaType.ARRAY,\n      items: convertSchemaProperty(property.items)\n    };\n  } else {\n    const schemaType = import_generative_ai.SchemaType[propertyType.toUpperCase()];\n    if (!schemaType) {\n      throw new import_genkit.GenkitError({\n        status: \"INVALID_ARGUMENT\",\n        message: `Unsupported property type ${propertyType.toUpperCase()}`\n      });\n    }\n    return {\n      ...baseSchema,\n      type: schemaType\n    };\n  }\n}\nfunction toGeminiTool(tool) {\n  const declaration = {\n    name: tool.name.replace(/\\//g, \"__\"),\n    // Gemini throws on '/' in tool name\n    description: tool.description,\n    parameters: convertSchemaProperty(tool.inputSchema)\n  };\n  return declaration;\n}\nfunction toInlineData(part) {\n  const dataUrl = part.media.url;\n  const b64Data = dataUrl.substring(dataUrl.indexOf(\",\") + 1);\n  const contentType = part.media.contentType || dataUrl.substring(dataUrl.indexOf(\":\") + 1, dataUrl.indexOf(\";\"));\n  return { inlineData: { mimeType: contentType, data: b64Data } };\n}\nfunction toFileData(part) {\n  if (!part.media.contentType)\n    throw new Error(\n      \"Must supply a `contentType` when sending File URIs to Gemini.\"\n    );\n  return {\n    fileData: { mimeType: part.media.contentType, fileUri: part.media.url }\n  };\n}\nfunction fromInlineData(inlinePart) {\n  if (!inlinePart.inlineData || !inlinePart.inlineData.hasOwnProperty(\"mimeType\") || !inlinePart.inlineData.hasOwnProperty(\"data\")) {\n    throw new Error(\"Invalid InlineDataPart: missing required properties\");\n  }\n  const { mimeType, data } = inlinePart.inlineData;\n  const dataUrl = `data:${mimeType};base64,${data}`;\n  return {\n    media: {\n      url: dataUrl,\n      contentType: mimeType\n    }\n  };\n}\nfunction toFunctionCall(part) {\n  if (!part?.toolRequest?.input) {\n    throw Error(\"Invalid ToolRequestPart: input was missing.\");\n  }\n  return {\n    functionCall: {\n      name: part.toolRequest.name,\n      args: part.toolRequest.input\n    }\n  };\n}\nfunction fromFunctionCall(part, ref) {\n  if (!part.functionCall) {\n    throw Error(\"Invalid FunctionCallPart\");\n  }\n  return {\n    toolRequest: {\n      name: part.functionCall.name,\n      input: part.functionCall.args,\n      ref\n    }\n  };\n}\nfunction toFunctionResponse(part) {\n  if (!part?.toolResponse?.output) {\n    throw Error(\"Invalid ToolResponsePart: output was missing.\");\n  }\n  return {\n    functionResponse: {\n      name: part.toolResponse.name,\n      response: {\n        name: part.toolResponse.name,\n        content: part.toolResponse.output\n      }\n    }\n  };\n}\nfunction fromFunctionResponse(part) {\n  if (!part.functionResponse) {\n    throw new Error(\"Invalid FunctionResponsePart.\");\n  }\n  return {\n    toolResponse: {\n      name: part.functionResponse.name.replace(/__/g, \"/\"),\n      // restore slashes\n      output: part.functionResponse.response\n    }\n  };\n}\nfunction fromExecutableCode(part) {\n  if (!part.executableCode) {\n    throw new Error(\"Invalid GeminiPart: missing executableCode\");\n  }\n  return {\n    custom: {\n      executableCode: {\n        language: part.executableCode.language,\n        code: part.executableCode.code\n      }\n    }\n  };\n}\nfunction fromCodeExecutionResult(part) {\n  if (!part.codeExecutionResult) {\n    throw new Error(\"Invalid GeminiPart: missing codeExecutionResult\");\n  }\n  return {\n    custom: {\n      codeExecutionResult: {\n        outcome: part.codeExecutionResult.outcome,\n        output: part.codeExecutionResult.output\n      }\n    }\n  };\n}\nfunction toCustomPart(part) {\n  if (!part.custom) {\n    throw new Error(\"Invalid GeminiPart: missing custom\");\n  }\n  if (part.custom.codeExecutionResult) {\n    return { codeExecutionResult: part.custom.codeExecutionResult };\n  }\n  if (part.custom.executableCode) {\n    return { executableCode: part.custom.executableCode };\n  }\n  throw new Error(\"Unsupported Custom Part type\");\n}\nfunction toGeminiPart(part) {\n  if (part.text !== void 0) return { text: part.text || \" \" };\n  if (part.media) {\n    if (part.media.url.startsWith(\"data:\")) return toInlineData(part);\n    return toFileData(part);\n  }\n  if (part.toolRequest) return toFunctionCall(part);\n  if (part.toolResponse) return toFunctionResponse(part);\n  if (part.custom) return toCustomPart(part);\n  throw new Error(\"Unsupported Part type\" + JSON.stringify(part));\n}\nfunction fromGeminiPart(part, jsonMode, ref) {\n  if (part.text !== void 0) return { text: part.text };\n  if (part.inlineData) return fromInlineData(part);\n  if (part.functionCall) return fromFunctionCall(part, ref);\n  if (part.functionResponse) return fromFunctionResponse(part);\n  if (part.executableCode) return fromExecutableCode(part);\n  if (part.codeExecutionResult) return fromCodeExecutionResult(part);\n  throw new Error(\"Unsupported GeminiPart type\");\n}\nfunction toGeminiMessage(message, model) {\n  let sortedParts = message.content;\n  if (message.role === \"tool\") {\n    sortedParts = [...message.content].sort((a, b) => {\n      const aRef = a.toolResponse?.ref;\n      const bRef = b.toolResponse?.ref;\n      if (!aRef && !bRef) return 0;\n      if (!aRef) return 1;\n      if (!bRef) return -1;\n      return parseInt(aRef, 10) - parseInt(bRef, 10);\n    });\n  }\n  return {\n    role: toGeminiRole(message.role, model),\n    parts: sortedParts.map(toGeminiPart)\n  };\n}\nfunction toGeminiSystemInstruction(message) {\n  return {\n    role: \"user\",\n    parts: message.content.map(toGeminiPart)\n  };\n}\nfunction fromGeminiFinishReason(reason) {\n  if (!reason) return \"unknown\";\n  switch (reason) {\n    case \"STOP\":\n      return \"stop\";\n    case \"MAX_TOKENS\":\n      return \"length\";\n    case \"SAFETY\":\n    // blocked for safety\n    case \"RECITATION\":\n      return \"blocked\";\n    default:\n      return \"unknown\";\n  }\n}\nfunction fromGeminiCandidate(candidate, jsonMode = false) {\n  const parts = candidate.content?.parts || [];\n  const genkitCandidate = {\n    index: candidate.index || 0,\n    message: {\n      role: \"model\",\n      content: parts.map(\n        (part, index) => fromGeminiPart(part, jsonMode, index.toString())\n      )\n    },\n    finishReason: fromGeminiFinishReason(candidate.finishReason),\n    finishMessage: candidate.finishMessage,\n    custom: {\n      safetyRatings: candidate.safetyRatings,\n      citationMetadata: candidate.citationMetadata\n    }\n  };\n  return genkitCandidate;\n}\nfunction cleanSchema(schema) {\n  const out = structuredClone(schema);\n  for (const key in out) {\n    if (key === \"$schema\" || key === \"additionalProperties\") {\n      delete out[key];\n      continue;\n    }\n    if (typeof out[key] === \"object\") {\n      out[key] = cleanSchema(out[key]);\n    }\n    if (key === \"type\" && Array.isArray(out[key])) {\n      out[key] = out[key].find((t) => t !== \"null\");\n    }\n  }\n  return out;\n}\nfunction defineGoogleAIModel({\n  ai,\n  name,\n  apiKey: apiKeyOption,\n  apiVersion,\n  baseUrl,\n  info,\n  defaultConfig,\n  debugTraces\n}) {\n  let apiKey;\n  if (apiKeyOption !== false) {\n    apiKey = apiKeyOption || (0, import_common.getApiKeyFromEnvVar)();\n    if (!apiKey) {\n      throw new import_genkit.GenkitError({\n        status: \"FAILED_PRECONDITION\",\n        message: \"Please pass in the API key or set the GEMINI_API_KEY or GOOGLE_API_KEY environment variable.\\nFor more details see https://firebase.google.com/docs/genkit/plugins/google-genai\"\n      });\n    }\n  }\n  const apiModelName = name.startsWith(\"googleai/\") ? name.substring(\"googleai/\".length) : name;\n  const model = SUPPORTED_GEMINI_MODELS[apiModelName] ?? (0, import_model.modelRef)({\n    name: `googleai/${apiModelName}`,\n    info: {\n      label: `Google AI - ${apiModelName}`,\n      supports: {\n        multiturn: true,\n        media: true,\n        tools: true,\n        systemRole: true,\n        output: [\"text\", \"json\"]\n      },\n      ...info\n    },\n    configSchema: GeminiConfigSchema\n  });\n  const middleware = [];\n  if (SUPPORTED_V1_MODELS[apiModelName]) {\n    middleware.push((0, import_middleware.simulateSystemPrompt)());\n  }\n  if (model.info?.supports?.media) {\n    middleware.push(\n      (0, import_middleware.downloadRequestMedia)({\n        maxBytes: 1024 * 1024 * 10,\n        // don't downlaod files that have been uploaded using the Files API\n        filter: (part) => {\n          try {\n            const url = new URL(part.media.url);\n            if (\n              // Gemini can handle these URLs\n              [\n                \"generativelanguage.googleapis.com\",\n                \"www.youtube.com\",\n                \"youtube.com\",\n                \"youtu.be\"\n              ].includes(url.hostname)\n            )\n              return false;\n          } catch {\n          }\n          return true;\n        }\n      })\n    );\n  }\n  return ai.defineModel(\n    {\n      name: model.name,\n      ...model.info,\n      configSchema: model.configSchema,\n      use: middleware\n    },\n    async (request, sendChunk) => {\n      const options = { apiClient: import_genkit.GENKIT_CLIENT_HEADER };\n      if (apiVersion) {\n        options.apiVersion = apiVersion;\n      }\n      if (apiVersion) {\n        options.baseUrl = baseUrl;\n      }\n      const requestConfig = {\n        ...defaultConfig,\n        ...request.config\n      };\n      const messages = [...request.messages];\n      if (messages.length === 0) throw new Error(\"No messages provided.\");\n      let systemInstruction = void 0;\n      if (SUPPORTED_V15_MODELS[apiModelName]) {\n        const systemMessage = messages.find((m) => m.role === \"system\");\n        if (systemMessage) {\n          messages.splice(messages.indexOf(systemMessage), 1);\n          systemInstruction = toGeminiSystemInstruction(systemMessage);\n        }\n      }\n      const tools = [];\n      if (request.tools?.length) {\n        tools.push({\n          functionDeclarations: request.tools.map(toGeminiTool)\n        });\n      }\n      const {\n        apiKey: apiKeyFromConfig,\n        safetySettings: safetySettingsFromConfig,\n        codeExecution: codeExecutionFromConfig,\n        version: versionFromConfig,\n        functionCallingConfig,\n        ...restOfConfigOptions\n      } = requestConfig;\n      if (codeExecutionFromConfig) {\n        tools.push({\n          codeExecution: request.config.codeExecution === true ? {} : request.config.codeExecution\n        });\n      }\n      let toolConfig;\n      if (functionCallingConfig) {\n        toolConfig = {\n          functionCallingConfig: {\n            allowedFunctionNames: functionCallingConfig.allowedFunctionNames,\n            mode: toFunctionModeEnum(functionCallingConfig.mode)\n          }\n        };\n      } else if (request.toolChoice) {\n        toolConfig = {\n          functionCallingConfig: {\n            mode: toGeminiFunctionModeEnum(request.toolChoice)\n          }\n        };\n      }\n      const jsonMode = request.output?.format === \"json\" || request.output?.contentType === \"application/json\" && tools.length === 0;\n      const generationConfig = {\n        ...restOfConfigOptions,\n        candidateCount: request.candidates || void 0,\n        responseMimeType: jsonMode ? \"application/json\" : void 0\n      };\n      if (request.output?.constrained && jsonMode) {\n        generationConfig.responseSchema = cleanSchema(request.output.schema);\n      }\n      const msg = toGeminiMessage(messages[messages.length - 1], model);\n      const fromJSONModeScopedGeminiCandidate = (candidate) => {\n        return fromGeminiCandidate(candidate, jsonMode);\n      };\n      let chatRequest = {\n        systemInstruction,\n        generationConfig,\n        tools: tools.length ? tools : void 0,\n        toolConfig,\n        history: messages.slice(0, -1).map((message) => toGeminiMessage(message, model)),\n        safetySettings: safetySettingsFromConfig\n      };\n      const modelVersion = versionFromConfig || model.version || apiModelName;\n      const cacheConfigDetails = (0, import_utils.extractCacheConfig)(request);\n      const { chatRequest: updatedChatRequest, cache } = await (0, import_context_caching.handleCacheIfNeeded)(\n        apiKey,\n        request,\n        chatRequest,\n        modelVersion,\n        cacheConfigDetails\n      );\n      if (!apiKeyFromConfig && !apiKey) {\n        throw new import_genkit.GenkitError({\n          status: \"INVALID_ARGUMENT\",\n          message: \"GoogleAI plugin was initialized with {apiKey: false} but no apiKey configuration was passed at call time.\"\n        });\n      }\n      const client = new import_generative_ai.GoogleGenerativeAI(apiKeyFromConfig || apiKey);\n      let genModel;\n      if (cache) {\n        genModel = client.getGenerativeModelFromCachedContent(\n          cache,\n          {\n            model: modelVersion\n          },\n          options\n        );\n      } else {\n        genModel = client.getGenerativeModel(\n          {\n            model: modelVersion\n          },\n          options\n        );\n      }\n      const callGemini = async () => {\n        let response;\n        if (sendChunk) {\n          const result = await genModel.startChat(updatedChatRequest).sendMessageStream(msg.parts, options);\n          for await (const item of result.stream) {\n            item.candidates?.forEach(\n              (candidate) => {\n                const c = fromJSONModeScopedGeminiCandidate(candidate);\n                sendChunk({\n                  index: c.index,\n                  content: c.message.content\n                });\n              }\n            );\n          }\n          response = await result.response;\n        } else {\n          const result = await genModel.startChat(updatedChatRequest).sendMessage(msg.parts, options);\n          response = result.response;\n        }\n        const candidates = response.candidates || [];\n        if (response.candidates?.[\"undefined\"]) {\n          candidates.push(response.candidates[\"undefined\"]);\n        }\n        if (!candidates.length) {\n          throw new import_genkit.GenkitError({\n            status: \"FAILED_PRECONDITION\",\n            message: \"No valid candidates returned.\"\n          });\n        }\n        const candidateData = candidates.map(fromJSONModeScopedGeminiCandidate) || [];\n        return {\n          candidates: candidateData,\n          custom: response,\n          usage: {\n            ...(0, import_model.getBasicUsageStats)(request.messages, candidateData),\n            inputTokens: response.usageMetadata?.promptTokenCount,\n            outputTokens: response.usageMetadata?.candidatesTokenCount,\n            totalTokens: response.usageMetadata?.totalTokenCount\n          }\n        };\n      };\n      return debugTraces ? await (0, import_tracing.runInNewSpan)(\n        ai.registry,\n        {\n          metadata: {\n            name: sendChunk ? \"sendMessageStream\" : \"sendMessage\"\n          }\n        },\n        async (metadata) => {\n          metadata.input = {\n            sdk: \"@google/generative-ai\",\n            cache,\n            model: genModel.model,\n            chatOptions: updatedChatRequest,\n            parts: msg.parts,\n            options\n          };\n          const response = await callGemini();\n          metadata.output = response.custom;\n          return response;\n        }\n      ) : await callGemini();\n    }\n  );\n}\nfunction toFunctionModeEnum(configEnum) {\n  if (configEnum === void 0) {\n    return void 0;\n  }\n  switch (configEnum) {\n    case \"MODE_UNSPECIFIED\": {\n      return import_generative_ai.FunctionCallingMode.MODE_UNSPECIFIED;\n    }\n    case \"ANY\": {\n      return import_generative_ai.FunctionCallingMode.ANY;\n    }\n    case \"AUTO\": {\n      return import_generative_ai.FunctionCallingMode.AUTO;\n    }\n    case \"NONE\": {\n      return import_generative_ai.FunctionCallingMode.NONE;\n    }\n    default:\n      throw new Error(`unsupported function calling mode: ${configEnum}`);\n  }\n}\nfunction toGeminiFunctionModeEnum(genkitMode) {\n  if (genkitMode === void 0) {\n    return void 0;\n  }\n  switch (genkitMode) {\n    case \"required\": {\n      return import_generative_ai.FunctionCallingMode.ANY;\n    }\n    case \"auto\": {\n      return import_generative_ai.FunctionCallingMode.AUTO;\n    }\n    case \"none\": {\n      return import_generative_ai.FunctionCallingMode.NONE;\n    }\n    default:\n      throw new Error(`unsupported function calling mode: ${genkitMode}`);\n  }\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=gemini.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9nZW1pbmkuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsa0NBQWtDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxrQkFBa0IsYUFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDJCQUEyQixtQkFBTyxDQUFDLGtHQUF1QjtBQUMxRCxvQkFBb0IsbUJBQU8sQ0FBQywyQkFBUTtBQUNwQyxtQkFBbUIsbUJBQU8sQ0FBQyx1Q0FBYztBQUN6Qyx3QkFBd0IsbUJBQU8sQ0FBQyx3REFBeUI7QUFDekQscUJBQXFCLG1CQUFPLENBQUMsc0NBQWdCO0FBQzdDLG9CQUFvQixtQkFBTyxDQUFDLG1GQUFVO0FBQ3RDLDZCQUE2QixtQkFBTyxDQUFDLDJHQUFtQjtBQUN4RCxtQkFBbUIsbUJBQU8sQ0FBQyxpSEFBeUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RkFBNEY7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQSxzQkFBc0IsUUFBUTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkZBQTZGLFFBQVE7QUFDckc7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDJDQUEyQyxxQkFBcUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsMkJBQTJCO0FBQ3pFLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhHQUE4RztBQUM5RyxXQUFXLGNBQWM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxpQkFBaUI7QUFDM0IsMEJBQTBCLFVBQVUsU0FBUyxLQUFLO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGFBQWE7QUFDbkM7QUFDQSw0QkFBNEIsYUFBYTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLG9FQUFvRTtBQUNwRSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHlDQUF5QztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsZUFBZTtBQUN6RSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxXQUFXO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsV0FBVztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxNQUFNLENBd0JMO0FBQ0QiLCJzb3VyY2VzIjpbIi9ob21lL3Byb2plY3Qvbm9kZV9tb2R1bGVzL0BnZW5raXQtYWkvZ29vZ2xlYWkvbGliL2dlbWluaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgZ2VtaW5pX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGdlbWluaV9leHBvcnRzLCB7XG4gIEdFTkVSSUNfR0VNSU5JX01PREVMOiAoKSA9PiBHRU5FUklDX0dFTUlOSV9NT0RFTCxcbiAgR2VtaW5pQ29uZmlnU2NoZW1hOiAoKSA9PiBHZW1pbmlDb25maWdTY2hlbWEsXG4gIFNVUFBPUlRFRF9HRU1JTklfTU9ERUxTOiAoKSA9PiBTVVBQT1JURURfR0VNSU5JX01PREVMUyxcbiAgU1VQUE9SVEVEX1YxNV9NT0RFTFM6ICgpID0+IFNVUFBPUlRFRF9WMTVfTU9ERUxTLFxuICBTVVBQT1JURURfVjFfTU9ERUxTOiAoKSA9PiBTVVBQT1JURURfVjFfTU9ERUxTLFxuICBjbGVhblNjaGVtYTogKCkgPT4gY2xlYW5TY2hlbWEsXG4gIGRlZmluZUdvb2dsZUFJTW9kZWw6ICgpID0+IGRlZmluZUdvb2dsZUFJTW9kZWwsXG4gIGZyb21HZW1pbmlDYW5kaWRhdGU6ICgpID0+IGZyb21HZW1pbmlDYW5kaWRhdGUsXG4gIGdlbWluaTogKCkgPT4gZ2VtaW5pLFxuICBnZW1pbmkxMFBybzogKCkgPT4gZ2VtaW5pMTBQcm8sXG4gIGdlbWluaTE1Rmxhc2g6ICgpID0+IGdlbWluaTE1Rmxhc2gsXG4gIGdlbWluaTE1Rmxhc2g4YjogKCkgPT4gZ2VtaW5pMTVGbGFzaDhiLFxuICBnZW1pbmkxNVBybzogKCkgPT4gZ2VtaW5pMTVQcm8sXG4gIGdlbWluaTIwRmxhc2g6ICgpID0+IGdlbWluaTIwRmxhc2gsXG4gIGdlbWluaTIwRmxhc2hFeHA6ICgpID0+IGdlbWluaTIwRmxhc2hFeHAsXG4gIGdlbWluaTIwRmxhc2hMaXRlOiAoKSA9PiBnZW1pbmkyMEZsYXNoTGl0ZSxcbiAgZ2VtaW5pMjBQcm9FeHAwMjA1OiAoKSA9PiBnZW1pbmkyMFByb0V4cDAyMDUsXG4gIGdlbWluaTI1Rmxhc2hQcmV2aWV3MDQxNzogKCkgPT4gZ2VtaW5pMjVGbGFzaFByZXZpZXcwNDE3LFxuICBnZW1pbmkyNVByb0V4cDAzMjU6ICgpID0+IGdlbWluaTI1UHJvRXhwMDMyNSxcbiAgZ2VtaW5pMjVQcm9QcmV2aWV3MDMyNTogKCkgPT4gZ2VtaW5pMjVQcm9QcmV2aWV3MDMyNSxcbiAgdG9HZW1pbmlNZXNzYWdlOiAoKSA9PiB0b0dlbWluaU1lc3NhZ2UsXG4gIHRvR2VtaW5pU3lzdGVtSW5zdHJ1Y3Rpb246ICgpID0+IHRvR2VtaW5pU3lzdGVtSW5zdHJ1Y3Rpb24sXG4gIHRvR2VtaW5pVG9vbDogKCkgPT4gdG9HZW1pbmlUb29sXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKGdlbWluaV9leHBvcnRzKTtcbnZhciBpbXBvcnRfZ2VuZXJhdGl2ZV9haSA9IHJlcXVpcmUoXCJAZ29vZ2xlL2dlbmVyYXRpdmUtYWlcIik7XG52YXIgaW1wb3J0X2dlbmtpdCA9IHJlcXVpcmUoXCJnZW5raXRcIik7XG52YXIgaW1wb3J0X21vZGVsID0gcmVxdWlyZShcImdlbmtpdC9tb2RlbFwiKTtcbnZhciBpbXBvcnRfbWlkZGxld2FyZSA9IHJlcXVpcmUoXCJnZW5raXQvbW9kZWwvbWlkZGxld2FyZVwiKTtcbnZhciBpbXBvcnRfdHJhY2luZyA9IHJlcXVpcmUoXCJnZW5raXQvdHJhY2luZ1wiKTtcbnZhciBpbXBvcnRfY29tbW9uID0gcmVxdWlyZShcIi4vY29tbW9uXCIpO1xudmFyIGltcG9ydF9jb250ZXh0X2NhY2hpbmcgPSByZXF1aXJlKFwiLi9jb250ZXh0LWNhY2hpbmdcIik7XG52YXIgaW1wb3J0X3V0aWxzID0gcmVxdWlyZShcIi4vY29udGV4dC1jYWNoaW5nL3V0aWxzXCIpO1xuY29uc3QgU2FmZXR5U2V0dGluZ3NTY2hlbWEgPSBpbXBvcnRfZ2Vua2l0Lnoub2JqZWN0KHtcbiAgY2F0ZWdvcnk6IGltcG9ydF9nZW5raXQuei5lbnVtKFtcbiAgICBcIkhBUk1fQ0FURUdPUllfVU5TUEVDSUZJRURcIixcbiAgICBcIkhBUk1fQ0FURUdPUllfSEFURV9TUEVFQ0hcIixcbiAgICBcIkhBUk1fQ0FURUdPUllfU0VYVUFMTFlfRVhQTElDSVRcIixcbiAgICBcIkhBUk1fQ0FURUdPUllfSEFSQVNTTUVOVFwiLFxuICAgIFwiSEFSTV9DQVRFR09SWV9EQU5HRVJPVVNfQ09OVEVOVFwiLFxuICAgIFwiSEFSTV9DQVRFR09SWV9DSVZJQ19JTlRFR1JJVFlcIlxuICBdKSxcbiAgdGhyZXNob2xkOiBpbXBvcnRfZ2Vua2l0LnouZW51bShbXG4gICAgXCJCTE9DS19MT1dfQU5EX0FCT1ZFXCIsXG4gICAgXCJCTE9DS19NRURJVU1fQU5EX0FCT1ZFXCIsXG4gICAgXCJCTE9DS19PTkxZX0hJR0hcIixcbiAgICBcIkJMT0NLX05PTkVcIlxuICBdKVxufSk7XG5jb25zdCBHZW1pbmlDb25maWdTY2hlbWEgPSBpbXBvcnRfbW9kZWwuR2VuZXJhdGlvbkNvbW1vbkNvbmZpZ1NjaGVtYS5leHRlbmQoe1xuICBhcGlLZXk6IGltcG9ydF9nZW5raXQuei5zdHJpbmcoKS5kZXNjcmliZShcIk92ZXJyaWRlcyB0aGUgcGx1Z2luLWNvbmZpZ3VyZWQgQVBJIGtleSwgaWYgc3BlY2lmaWVkLlwiKS5vcHRpb25hbCgpLFxuICBzYWZldHlTZXR0aW5nczogaW1wb3J0X2dlbmtpdC56LmFycmF5KFNhZmV0eVNldHRpbmdzU2NoZW1hKS5kZXNjcmliZShcbiAgICBcIkFkanVzdCBob3cgbGlrZWx5IHlvdSBhcmUgdG8gc2VlIHJlc3BvbnNlcyB0aGF0IGNvdWxkIGJlIGhhcm1mdWwuIENvbnRlbnQgaXMgYmxvY2tlZCBiYXNlZCBvbiB0aGUgcHJvYmFiaWxpdHkgdGhhdCBpdCBpcyBoYXJtZnVsLlwiXG4gICkub3B0aW9uYWwoKSxcbiAgY29kZUV4ZWN1dGlvbjogaW1wb3J0X2dlbmtpdC56LnVuaW9uKFtpbXBvcnRfZ2Vua2l0LnouYm9vbGVhbigpLCBpbXBvcnRfZ2Vua2l0Lnoub2JqZWN0KHt9KS5zdHJpY3QoKV0pLmRlc2NyaWJlKFwiRW5hYmxlcyB0aGUgbW9kZWwgdG8gZ2VuZXJhdGUgYW5kIHJ1biBjb2RlLlwiKS5vcHRpb25hbCgpLFxuICBjb250ZXh0Q2FjaGU6IGltcG9ydF9nZW5raXQuei5ib29sZWFuKCkuZGVzY3JpYmUoXG4gICAgXCJDb250ZXh0IGNhY2hpbmcgYWxsb3dzIHlvdSB0byBzYXZlIGFuZCByZXVzZSBwcmVjb21wdXRlZCBpbnB1dCB0b2tlbnMgdGhhdCB5b3Ugd2lzaCB0byB1c2UgcmVwZWF0ZWRseS5cIlxuICApLm9wdGlvbmFsKCksXG4gIGZ1bmN0aW9uQ2FsbGluZ0NvbmZpZzogaW1wb3J0X2dlbmtpdC56Lm9iamVjdCh7XG4gICAgbW9kZTogaW1wb3J0X2dlbmtpdC56LmVudW0oW1wiTU9ERV9VTlNQRUNJRklFRFwiLCBcIkFVVE9cIiwgXCJBTllcIiwgXCJOT05FXCJdKS5vcHRpb25hbCgpLFxuICAgIGFsbG93ZWRGdW5jdGlvbk5hbWVzOiBpbXBvcnRfZ2Vua2l0LnouYXJyYXkoaW1wb3J0X2dlbmtpdC56LnN0cmluZygpKS5vcHRpb25hbCgpXG4gIH0pLmRlc2NyaWJlKFxuICAgIFwiQ29udHJvbHMgaG93IHRoZSBtb2RlbCB1c2VzIHRoZSBwcm92aWRlZCB0b29scyAoZnVuY3Rpb24gZGVjbGFyYXRpb25zKS4gV2l0aCBBVVRPIChEZWZhdWx0KSBtb2RlLCB0aGUgbW9kZWwgZGVjaWRlcyB3aGV0aGVyIHRvIGdlbmVyYXRlIGEgbmF0dXJhbCBsYW5ndWFnZSByZXNwb25zZSBvciBzdWdnZXN0IGEgZnVuY3Rpb24gY2FsbCBiYXNlZCBvbiB0aGUgcHJvbXB0IGFuZCBjb250ZXh0LiBXaXRoIEFOWSwgdGhlIG1vZGVsIGlzIGNvbnN0cmFpbmVkIHRvIGFsd2F5cyBwcmVkaWN0IGEgZnVuY3Rpb24gY2FsbCBhbmQgZ3VhcmFudGVlIGZ1bmN0aW9uIHNjaGVtYSBhZGhlcmVuY2UuIFdpdGggTk9ORSwgdGhlIG1vZGVsIGlzIHByb2hpYml0ZWQgZnJvbSBtYWtpbmcgZnVuY3Rpb24gY2FsbHMuXCJcbiAgKS5vcHRpb25hbCgpLFxuICByZXNwb25zZU1vZGFsaXRpZXM6IGltcG9ydF9nZW5raXQuei5hcnJheShpbXBvcnRfZ2Vua2l0LnouZW51bShbXCJURVhUXCIsIFwiSU1BR0VcIiwgXCJBVURJT1wiXSkpLmRlc2NyaWJlKFxuICAgIFwiVGhlIG1vZGFsaXRpZXMgdG8gYmUgdXNlZCBpbiByZXNwb25zZS4gT25seSBzdXBwb3J0ZWQgZm9yICdnZW1pbmktMi4wLWZsYXNoLWV4cCcgbW9kZWwgYXQgcHJlc2VudC5cIlxuICApLm9wdGlvbmFsKClcbn0pLnBhc3N0aHJvdWdoKCk7XG5jb25zdCBnZW1pbmkxMFBybyA9ICgwLCBpbXBvcnRfbW9kZWwubW9kZWxSZWYpKHtcbiAgbmFtZTogXCJnb29nbGVhaS9nZW1pbmktMS4wLXByb1wiLFxuICBpbmZvOiB7XG4gICAgbGFiZWw6IFwiR29vZ2xlIEFJIC0gR2VtaW5pIFByb1wiLFxuICAgIHZlcnNpb25zOiBbXCJnZW1pbmktcHJvXCIsIFwiZ2VtaW5pLTEuMC1wcm8tbGF0ZXN0XCIsIFwiZ2VtaW5pLTEuMC1wcm8tMDAxXCJdLFxuICAgIHN1cHBvcnRzOiB7XG4gICAgICBtdWx0aXR1cm46IHRydWUsXG4gICAgICBtZWRpYTogZmFsc2UsXG4gICAgICB0b29sczogdHJ1ZSxcbiAgICAgIHRvb2xDaG9pY2U6IHRydWUsXG4gICAgICBzeXN0ZW1Sb2xlOiB0cnVlLFxuICAgICAgY29uc3RyYWluZWQ6IFwibm8tdG9vbHNcIlxuICAgIH1cbiAgfSxcbiAgY29uZmlnU2NoZW1hOiBHZW1pbmlDb25maWdTY2hlbWFcbn0pO1xuY29uc3QgZ2VtaW5pMTVQcm8gPSAoMCwgaW1wb3J0X21vZGVsLm1vZGVsUmVmKSh7XG4gIG5hbWU6IFwiZ29vZ2xlYWkvZ2VtaW5pLTEuNS1wcm9cIixcbiAgaW5mbzoge1xuICAgIGxhYmVsOiBcIkdvb2dsZSBBSSAtIEdlbWluaSAxLjUgUHJvXCIsXG4gICAgc3VwcG9ydHM6IHtcbiAgICAgIG11bHRpdHVybjogdHJ1ZSxcbiAgICAgIG1lZGlhOiB0cnVlLFxuICAgICAgdG9vbHM6IHRydWUsXG4gICAgICB0b29sQ2hvaWNlOiB0cnVlLFxuICAgICAgc3lzdGVtUm9sZTogdHJ1ZSxcbiAgICAgIGNvbnN0cmFpbmVkOiBcIm5vLXRvb2xzXCJcbiAgICB9LFxuICAgIHZlcnNpb25zOiBbXG4gICAgICBcImdlbWluaS0xLjUtcHJvLWxhdGVzdFwiLFxuICAgICAgXCJnZW1pbmktMS41LXByby0wMDFcIixcbiAgICAgIFwiZ2VtaW5pLTEuNS1wcm8tMDAyXCJcbiAgICBdXG4gIH0sXG4gIGNvbmZpZ1NjaGVtYTogR2VtaW5pQ29uZmlnU2NoZW1hXG59KTtcbmNvbnN0IGdlbWluaTE1Rmxhc2ggPSAoMCwgaW1wb3J0X21vZGVsLm1vZGVsUmVmKSh7XG4gIG5hbWU6IFwiZ29vZ2xlYWkvZ2VtaW5pLTEuNS1mbGFzaFwiLFxuICBpbmZvOiB7XG4gICAgbGFiZWw6IFwiR29vZ2xlIEFJIC0gR2VtaW5pIDEuNSBGbGFzaFwiLFxuICAgIHN1cHBvcnRzOiB7XG4gICAgICBtdWx0aXR1cm46IHRydWUsXG4gICAgICBtZWRpYTogdHJ1ZSxcbiAgICAgIHRvb2xzOiB0cnVlLFxuICAgICAgdG9vbENob2ljZTogdHJ1ZSxcbiAgICAgIHN5c3RlbVJvbGU6IHRydWUsXG4gICAgICBjb25zdHJhaW5lZDogXCJuby10b29sc1wiLFxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgY29udGV4dENhY2hlOiB0cnVlXG4gICAgfSxcbiAgICB2ZXJzaW9uczogW1xuICAgICAgXCJnZW1pbmktMS41LWZsYXNoLWxhdGVzdFwiLFxuICAgICAgXCJnZW1pbmktMS41LWZsYXNoLTAwMVwiLFxuICAgICAgXCJnZW1pbmktMS41LWZsYXNoLTAwMlwiXG4gICAgXVxuICB9LFxuICBjb25maWdTY2hlbWE6IEdlbWluaUNvbmZpZ1NjaGVtYVxufSk7XG5jb25zdCBnZW1pbmkxNUZsYXNoOGIgPSAoMCwgaW1wb3J0X21vZGVsLm1vZGVsUmVmKSh7XG4gIG5hbWU6IFwiZ29vZ2xlYWkvZ2VtaW5pLTEuNS1mbGFzaC04YlwiLFxuICBpbmZvOiB7XG4gICAgbGFiZWw6IFwiR29vZ2xlIEFJIC0gR2VtaW5pIDEuNSBGbGFzaFwiLFxuICAgIHN1cHBvcnRzOiB7XG4gICAgICBtdWx0aXR1cm46IHRydWUsXG4gICAgICBtZWRpYTogdHJ1ZSxcbiAgICAgIHRvb2xzOiB0cnVlLFxuICAgICAgdG9vbENob2ljZTogdHJ1ZSxcbiAgICAgIHN5c3RlbVJvbGU6IHRydWUsXG4gICAgICBjb25zdHJhaW5lZDogXCJuby10b29sc1wiXG4gICAgfSxcbiAgICB2ZXJzaW9uczogW1wiZ2VtaW5pLTEuNS1mbGFzaC04Yi1sYXRlc3RcIiwgXCJnZW1pbmktMS41LWZsYXNoLThiLTAwMVwiXVxuICB9LFxuICBjb25maWdTY2hlbWE6IEdlbWluaUNvbmZpZ1NjaGVtYVxufSk7XG5jb25zdCBnZW1pbmkyMEZsYXNoID0gKDAsIGltcG9ydF9tb2RlbC5tb2RlbFJlZikoe1xuICBuYW1lOiBcImdvb2dsZWFpL2dlbWluaS0yLjAtZmxhc2hcIixcbiAgaW5mbzoge1xuICAgIGxhYmVsOiBcIkdvb2dsZSBBSSAtIEdlbWluaSAyLjAgRmxhc2hcIixcbiAgICB2ZXJzaW9uczogW10sXG4gICAgc3VwcG9ydHM6IHtcbiAgICAgIG11bHRpdHVybjogdHJ1ZSxcbiAgICAgIG1lZGlhOiB0cnVlLFxuICAgICAgdG9vbHM6IHRydWUsXG4gICAgICB0b29sQ2hvaWNlOiB0cnVlLFxuICAgICAgc3lzdGVtUm9sZTogdHJ1ZSxcbiAgICAgIGNvbnN0cmFpbmVkOiBcIm5vLXRvb2xzXCJcbiAgICB9XG4gIH0sXG4gIGNvbmZpZ1NjaGVtYTogR2VtaW5pQ29uZmlnU2NoZW1hXG59KTtcbmNvbnN0IGdlbWluaTIwRmxhc2hFeHAgPSAoMCwgaW1wb3J0X21vZGVsLm1vZGVsUmVmKSh7XG4gIG5hbWU6IFwiZ29vZ2xlYWkvZ2VtaW5pLTIuMC1mbGFzaC1leHBcIixcbiAgaW5mbzoge1xuICAgIGxhYmVsOiBcIkdvb2dsZSBBSSAtIEdlbWluaSAyLjAgRmxhc2ggKEV4cGVyaW1lbnRhbClcIixcbiAgICB2ZXJzaW9uczogW10sXG4gICAgc3VwcG9ydHM6IHtcbiAgICAgIG11bHRpdHVybjogdHJ1ZSxcbiAgICAgIG1lZGlhOiB0cnVlLFxuICAgICAgdG9vbHM6IHRydWUsXG4gICAgICB0b29sQ2hvaWNlOiB0cnVlLFxuICAgICAgc3lzdGVtUm9sZTogdHJ1ZSxcbiAgICAgIGNvbnN0cmFpbmVkOiBcIm5vLXRvb2xzXCJcbiAgICB9XG4gIH0sXG4gIGNvbmZpZ1NjaGVtYTogR2VtaW5pQ29uZmlnU2NoZW1hXG59KTtcbmNvbnN0IGdlbWluaTIwRmxhc2hMaXRlID0gKDAsIGltcG9ydF9tb2RlbC5tb2RlbFJlZikoe1xuICBuYW1lOiBcImdvb2dsZWFpL2dlbWluaS0yLjAtZmxhc2gtbGl0ZVwiLFxuICBpbmZvOiB7XG4gICAgbGFiZWw6IFwiR29vZ2xlIEFJIC0gR2VtaW5pIDIuMCBGbGFzaCBMaXRlXCIsXG4gICAgdmVyc2lvbnM6IFtdLFxuICAgIHN1cHBvcnRzOiB7XG4gICAgICBtdWx0aXR1cm46IHRydWUsXG4gICAgICBtZWRpYTogdHJ1ZSxcbiAgICAgIHRvb2xzOiB0cnVlLFxuICAgICAgdG9vbENob2ljZTogdHJ1ZSxcbiAgICAgIHN5c3RlbVJvbGU6IHRydWUsXG4gICAgICBjb25zdHJhaW5lZDogXCJuby10b29sc1wiXG4gICAgfVxuICB9LFxuICBjb25maWdTY2hlbWE6IEdlbWluaUNvbmZpZ1NjaGVtYVxufSk7XG5jb25zdCBnZW1pbmkyMFByb0V4cDAyMDUgPSAoMCwgaW1wb3J0X21vZGVsLm1vZGVsUmVmKSh7XG4gIG5hbWU6IFwiZ29vZ2xlYWkvZ2VtaW5pLTIuMC1wcm8tZXhwLTAyLTA1XCIsXG4gIGluZm86IHtcbiAgICBsYWJlbDogXCJHb29nbGUgQUkgLSBHZW1pbmkgMi4wIFBybyBFeHAgMDItMDVcIixcbiAgICB2ZXJzaW9uczogW10sXG4gICAgc3VwcG9ydHM6IHtcbiAgICAgIG11bHRpdHVybjogdHJ1ZSxcbiAgICAgIG1lZGlhOiB0cnVlLFxuICAgICAgdG9vbHM6IHRydWUsXG4gICAgICB0b29sQ2hvaWNlOiB0cnVlLFxuICAgICAgc3lzdGVtUm9sZTogdHJ1ZSxcbiAgICAgIGNvbnN0cmFpbmVkOiBcIm5vLXRvb2xzXCJcbiAgICB9XG4gIH0sXG4gIGNvbmZpZ1NjaGVtYTogR2VtaW5pQ29uZmlnU2NoZW1hXG59KTtcbmNvbnN0IGdlbWluaTI1Rmxhc2hQcmV2aWV3MDQxNyA9ICgwLCBpbXBvcnRfbW9kZWwubW9kZWxSZWYpKHtcbiAgbmFtZTogXCJnb29nbGVhaS9nZW1pbmktMi41LWZsYXNoLXByZXZpZXctMDQtMTdcIixcbiAgaW5mbzoge1xuICAgIGxhYmVsOiBcIkdvb2dsZSBBSSAtIEdlbWluaSAyLjUgRmxhc2ggUHJldmlldyAwNC0xN1wiLFxuICAgIHZlcnNpb25zOiBbXSxcbiAgICBzdXBwb3J0czoge1xuICAgICAgbXVsdGl0dXJuOiB0cnVlLFxuICAgICAgbWVkaWE6IHRydWUsXG4gICAgICB0b29sczogdHJ1ZSxcbiAgICAgIHRvb2xDaG9pY2U6IHRydWUsXG4gICAgICBzeXN0ZW1Sb2xlOiB0cnVlLFxuICAgICAgY29uc3RyYWluZWQ6IFwibm8tdG9vbHNcIlxuICAgIH1cbiAgfSxcbiAgY29uZmlnU2NoZW1hOiBHZW1pbmlDb25maWdTY2hlbWFcbn0pO1xuY29uc3QgZ2VtaW5pMjVQcm9FeHAwMzI1ID0gKDAsIGltcG9ydF9tb2RlbC5tb2RlbFJlZikoe1xuICBuYW1lOiBcImdvb2dsZWFpL2dlbWluaS0yLjUtcHJvLWV4cC0wMy0yNVwiLFxuICBpbmZvOiB7XG4gICAgbGFiZWw6IFwiR29vZ2xlIEFJIC0gR2VtaW5pIDIuNSBQcm8gRXhwIDAzLTI1XCIsXG4gICAgdmVyc2lvbnM6IFtdLFxuICAgIHN1cHBvcnRzOiB7XG4gICAgICBtdWx0aXR1cm46IHRydWUsXG4gICAgICBtZWRpYTogdHJ1ZSxcbiAgICAgIHRvb2xzOiB0cnVlLFxuICAgICAgdG9vbENob2ljZTogdHJ1ZSxcbiAgICAgIHN5c3RlbVJvbGU6IHRydWUsXG4gICAgICBjb25zdHJhaW5lZDogXCJuby10b29sc1wiXG4gICAgfVxuICB9LFxuICBjb25maWdTY2hlbWE6IEdlbWluaUNvbmZpZ1NjaGVtYVxufSk7XG5jb25zdCBnZW1pbmkyNVByb1ByZXZpZXcwMzI1ID0gKDAsIGltcG9ydF9tb2RlbC5tb2RlbFJlZikoe1xuICBuYW1lOiBcImdvb2dsZWFpL2dlbWluaS0yLjUtcHJvLXByZXZpZXctMDMtMjVcIixcbiAgaW5mbzoge1xuICAgIGxhYmVsOiBcIkdvb2dsZSBBSSAtIEdlbWluaSAyLjUgUHJvIFByZXZpZXcgMDMtMjVcIixcbiAgICB2ZXJzaW9uczogW10sXG4gICAgc3VwcG9ydHM6IHtcbiAgICAgIG11bHRpdHVybjogdHJ1ZSxcbiAgICAgIG1lZGlhOiB0cnVlLFxuICAgICAgdG9vbHM6IHRydWUsXG4gICAgICB0b29sQ2hvaWNlOiB0cnVlLFxuICAgICAgc3lzdGVtUm9sZTogdHJ1ZSxcbiAgICAgIGNvbnN0cmFpbmVkOiBcIm5vLXRvb2xzXCJcbiAgICB9XG4gIH0sXG4gIGNvbmZpZ1NjaGVtYTogR2VtaW5pQ29uZmlnU2NoZW1hXG59KTtcbmNvbnN0IFNVUFBPUlRFRF9WMV9NT0RFTFMgPSB7XG4gIFwiZ2VtaW5pLTEuMC1wcm9cIjogZ2VtaW5pMTBQcm9cbn07XG5jb25zdCBTVVBQT1JURURfVjE1X01PREVMUyA9IHtcbiAgXCJnZW1pbmktMS41LXByb1wiOiBnZW1pbmkxNVBybyxcbiAgXCJnZW1pbmktMS41LWZsYXNoXCI6IGdlbWluaTE1Rmxhc2gsXG4gIFwiZ2VtaW5pLTEuNS1mbGFzaC04YlwiOiBnZW1pbmkxNUZsYXNoOGIsXG4gIFwiZ2VtaW5pLTIuMC1mbGFzaFwiOiBnZW1pbmkyMEZsYXNoLFxuICBcImdlbWluaS0yLjAtZmxhc2gtbGl0ZVwiOiBnZW1pbmkyMEZsYXNoTGl0ZSxcbiAgXCJnZW1pbmktMi4wLXByby1leHAtMDItMDVcIjogZ2VtaW5pMjBQcm9FeHAwMjA1LFxuICBcImdlbWluaS0yLjAtZmxhc2gtZXhwXCI6IGdlbWluaTIwRmxhc2hFeHAsXG4gIFwiZ2VtaW5pLTIuNS1wcm8tZXhwLTAzLTI1XCI6IGdlbWluaTI1UHJvRXhwMDMyNSxcbiAgXCJnZW1pbmktMi41LXByby1wcmV2aWV3LTAzLTI1XCI6IGdlbWluaTI1UHJvUHJldmlldzAzMjUsXG4gIFwiZ2VtaW5pLTIuNS1mbGFzaC1wcmV2aWV3LTA0LTE3XCI6IGdlbWluaTI1Rmxhc2hQcmV2aWV3MDQxN1xufTtcbmNvbnN0IEdFTkVSSUNfR0VNSU5JX01PREVMID0gKDAsIGltcG9ydF9tb2RlbC5tb2RlbFJlZikoe1xuICBuYW1lOiBcImdvb2dsZWFpL2dlbWluaVwiLFxuICBjb25maWdTY2hlbWE6IEdlbWluaUNvbmZpZ1NjaGVtYSxcbiAgaW5mbzoge1xuICAgIGxhYmVsOiBcIkdvb2dsZSBHZW1pbmlcIixcbiAgICBzdXBwb3J0czoge1xuICAgICAgbXVsdGl0dXJuOiB0cnVlLFxuICAgICAgbWVkaWE6IHRydWUsXG4gICAgICB0b29sczogdHJ1ZSxcbiAgICAgIHRvb2xDaG9pY2U6IHRydWUsXG4gICAgICBzeXN0ZW1Sb2xlOiB0cnVlLFxuICAgICAgY29uc3RyYWluZWQ6IFwibm8tdG9vbHNcIlxuICAgIH1cbiAgfVxufSk7XG5jb25zdCBTVVBQT1JURURfR0VNSU5JX01PREVMUyA9IHtcbiAgLi4uU1VQUE9SVEVEX1YxX01PREVMUyxcbiAgLi4uU1VQUE9SVEVEX1YxNV9NT0RFTFNcbn07XG5mdW5jdGlvbiBsb25nZXN0TWF0Y2hpbmdQcmVmaXgodmVyc2lvbiwgcG90ZW50aWFsTWF0Y2hlcykge1xuICByZXR1cm4gcG90ZW50aWFsTWF0Y2hlcy5maWx0ZXIoKHApID0+IHZlcnNpb24uc3RhcnRzV2l0aChwKSkucmVkdWNlKFxuICAgIChsb25nZXN0LCBjdXJyZW50KSA9PiBjdXJyZW50Lmxlbmd0aCA+IGxvbmdlc3QubGVuZ3RoID8gY3VycmVudCA6IGxvbmdlc3QsXG4gICAgXCJcIlxuICApO1xufVxuZnVuY3Rpb24gZ2VtaW5pKHZlcnNpb24sIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBuZWFyZXN0TW9kZWwgPSBuZWFyZXN0R2VtaW5pTW9kZWxSZWYodmVyc2lvbik7XG4gIHJldHVybiAoMCwgaW1wb3J0X21vZGVsLm1vZGVsUmVmKSh7XG4gICAgbmFtZTogYGdvb2dsZWFpLyR7dmVyc2lvbn1gLFxuICAgIGNvbmZpZzogb3B0aW9ucyxcbiAgICBjb25maWdTY2hlbWE6IEdlbWluaUNvbmZpZ1NjaGVtYSxcbiAgICBpbmZvOiB7XG4gICAgICAuLi5uZWFyZXN0TW9kZWwuaW5mbyxcbiAgICAgIC8vIElmIGV4YWN0IHN1ZmZpeCBtYXRjaCBmb3IgYSBrbm93biBtb2RlbCwgdXNlIGl0cyBsYWJlbCwgb3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBsYWJlbFxuICAgICAgbGFiZWw6IG5lYXJlc3RNb2RlbC5uYW1lLmVuZHNXaXRoKHZlcnNpb24pID8gbmVhcmVzdE1vZGVsLmluZm8/LmxhYmVsIDogYEdvb2dsZSBBSSAtICR7dmVyc2lvbn1gXG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIG5lYXJlc3RHZW1pbmlNb2RlbFJlZih2ZXJzaW9uLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgbWF0Y2hpbmdLZXkgPSBsb25nZXN0TWF0Y2hpbmdQcmVmaXgoXG4gICAgdmVyc2lvbixcbiAgICBPYmplY3Qua2V5cyhTVVBQT1JURURfR0VNSU5JX01PREVMUylcbiAgKTtcbiAgaWYgKG1hdGNoaW5nS2V5KSB7XG4gICAgcmV0dXJuIFNVUFBPUlRFRF9HRU1JTklfTU9ERUxTW21hdGNoaW5nS2V5XS53aXRoQ29uZmlnKHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICB2ZXJzaW9uXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIEdFTkVSSUNfR0VNSU5JX01PREVMLndpdGhDb25maWcoeyAuLi5vcHRpb25zLCB2ZXJzaW9uIH0pO1xufVxuZnVuY3Rpb24gdG9HZW1pbmlSb2xlKHJvbGUsIG1vZGVsKSB7XG4gIHN3aXRjaCAocm9sZSkge1xuICAgIGNhc2UgXCJ1c2VyXCI6XG4gICAgICByZXR1cm4gXCJ1c2VyXCI7XG4gICAgY2FzZSBcIm1vZGVsXCI6XG4gICAgICByZXR1cm4gXCJtb2RlbFwiO1xuICAgIGNhc2UgXCJzeXN0ZW1cIjpcbiAgICAgIGlmIChtb2RlbCAmJiBTVVBQT1JURURfVjE1X01PREVMU1ttb2RlbC5uYW1lXSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJzeXN0ZW0gcm9sZSBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgYSBzaW5nbGUgbWVzc2FnZSBpbiB0aGUgZmlyc3QgcG9zaXRpb25cIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwic3lzdGVtIHJvbGUgaXMgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgIH1cbiAgICBjYXNlIFwidG9vbFwiOlxuICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwidXNlclwiO1xuICB9XG59XG5mdW5jdGlvbiBjb252ZXJ0U2NoZW1hUHJvcGVydHkocHJvcGVydHkpIHtcbiAgaWYgKCFwcm9wZXJ0eSB8fCAhcHJvcGVydHkudHlwZSkge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgY29uc3QgYmFzZVNjaGVtYSA9IHt9O1xuICBpZiAocHJvcGVydHkuZGVzY3JpcHRpb24pIHtcbiAgICBiYXNlU2NoZW1hLmRlc2NyaXB0aW9uID0gcHJvcGVydHkuZGVzY3JpcHRpb247XG4gIH1cbiAgaWYgKHByb3BlcnR5LmVudW0pIHtcbiAgICBiYXNlU2NoZW1hLnR5cGUgPSBpbXBvcnRfZ2VuZXJhdGl2ZV9haS5TY2hlbWFUeXBlLlNUUklORztcbiAgICBiYXNlU2NoZW1hLmVudW0gPSBwcm9wZXJ0eS5lbnVtO1xuICB9XG4gIGlmIChwcm9wZXJ0eS5udWxsYWJsZSkge1xuICAgIGJhc2VTY2hlbWEubnVsbGFibGUgPSBwcm9wZXJ0eS5udWxsYWJsZTtcbiAgfVxuICBsZXQgcHJvcGVydHlUeXBlO1xuICBpZiAoQXJyYXkuaXNBcnJheShwcm9wZXJ0eS50eXBlKSkge1xuICAgIGNvbnN0IHR5cGVzID0gcHJvcGVydHkudHlwZTtcbiAgICBpZiAodHlwZXMuaW5jbHVkZXMoXCJudWxsXCIpKSB7XG4gICAgICBiYXNlU2NoZW1hLm51bGxhYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgcHJvcGVydHlUeXBlID0gdHlwZXMuZmluZCgodCkgPT4gdCAhPT0gXCJudWxsXCIpO1xuICB9IGVsc2Uge1xuICAgIHByb3BlcnR5VHlwZSA9IHByb3BlcnR5LnR5cGU7XG4gIH1cbiAgaWYgKHByb3BlcnR5VHlwZSA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IG5lc3RlZFByb3BlcnRpZXMgPSB7fTtcbiAgICBPYmplY3Qua2V5cyhwcm9wZXJ0eS5wcm9wZXJ0aWVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIG5lc3RlZFByb3BlcnRpZXNba2V5XSA9IGNvbnZlcnRTY2hlbWFQcm9wZXJ0eShwcm9wZXJ0eS5wcm9wZXJ0aWVzW2tleV0pO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5iYXNlU2NoZW1hLFxuICAgICAgdHlwZTogaW1wb3J0X2dlbmVyYXRpdmVfYWkuU2NoZW1hVHlwZS5PQkpFQ1QsXG4gICAgICBwcm9wZXJ0aWVzOiBuZXN0ZWRQcm9wZXJ0aWVzLFxuICAgICAgcmVxdWlyZWQ6IHByb3BlcnR5LnJlcXVpcmVkXG4gICAgfTtcbiAgfSBlbHNlIGlmIChwcm9wZXJ0eVR5cGUgPT09IFwiYXJyYXlcIikge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5iYXNlU2NoZW1hLFxuICAgICAgdHlwZTogaW1wb3J0X2dlbmVyYXRpdmVfYWkuU2NoZW1hVHlwZS5BUlJBWSxcbiAgICAgIGl0ZW1zOiBjb252ZXJ0U2NoZW1hUHJvcGVydHkocHJvcGVydHkuaXRlbXMpXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBzY2hlbWFUeXBlID0gaW1wb3J0X2dlbmVyYXRpdmVfYWkuU2NoZW1hVHlwZVtwcm9wZXJ0eVR5cGUudG9VcHBlckNhc2UoKV07XG4gICAgaWYgKCFzY2hlbWFUeXBlKSB7XG4gICAgICB0aHJvdyBuZXcgaW1wb3J0X2dlbmtpdC5HZW5raXRFcnJvcih7XG4gICAgICAgIHN0YXR1czogXCJJTlZBTElEX0FSR1VNRU5UXCIsXG4gICAgICAgIG1lc3NhZ2U6IGBVbnN1cHBvcnRlZCBwcm9wZXJ0eSB0eXBlICR7cHJvcGVydHlUeXBlLnRvVXBwZXJDYXNlKCl9YFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAuLi5iYXNlU2NoZW1hLFxuICAgICAgdHlwZTogc2NoZW1hVHlwZVxuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIHRvR2VtaW5pVG9vbCh0b29sKSB7XG4gIGNvbnN0IGRlY2xhcmF0aW9uID0ge1xuICAgIG5hbWU6IHRvb2wubmFtZS5yZXBsYWNlKC9cXC8vZywgXCJfX1wiKSxcbiAgICAvLyBHZW1pbmkgdGhyb3dzIG9uICcvJyBpbiB0b29sIG5hbWVcbiAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICBwYXJhbWV0ZXJzOiBjb252ZXJ0U2NoZW1hUHJvcGVydHkodG9vbC5pbnB1dFNjaGVtYSlcbiAgfTtcbiAgcmV0dXJuIGRlY2xhcmF0aW9uO1xufVxuZnVuY3Rpb24gdG9JbmxpbmVEYXRhKHBhcnQpIHtcbiAgY29uc3QgZGF0YVVybCA9IHBhcnQubWVkaWEudXJsO1xuICBjb25zdCBiNjREYXRhID0gZGF0YVVybC5zdWJzdHJpbmcoZGF0YVVybC5pbmRleE9mKFwiLFwiKSArIDEpO1xuICBjb25zdCBjb250ZW50VHlwZSA9IHBhcnQubWVkaWEuY29udGVudFR5cGUgfHwgZGF0YVVybC5zdWJzdHJpbmcoZGF0YVVybC5pbmRleE9mKFwiOlwiKSArIDEsIGRhdGFVcmwuaW5kZXhPZihcIjtcIikpO1xuICByZXR1cm4geyBpbmxpbmVEYXRhOiB7IG1pbWVUeXBlOiBjb250ZW50VHlwZSwgZGF0YTogYjY0RGF0YSB9IH07XG59XG5mdW5jdGlvbiB0b0ZpbGVEYXRhKHBhcnQpIHtcbiAgaWYgKCFwYXJ0Lm1lZGlhLmNvbnRlbnRUeXBlKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiTXVzdCBzdXBwbHkgYSBgY29udGVudFR5cGVgIHdoZW4gc2VuZGluZyBGaWxlIFVSSXMgdG8gR2VtaW5pLlwiXG4gICAgKTtcbiAgcmV0dXJuIHtcbiAgICBmaWxlRGF0YTogeyBtaW1lVHlwZTogcGFydC5tZWRpYS5jb250ZW50VHlwZSwgZmlsZVVyaTogcGFydC5tZWRpYS51cmwgfVxuICB9O1xufVxuZnVuY3Rpb24gZnJvbUlubGluZURhdGEoaW5saW5lUGFydCkge1xuICBpZiAoIWlubGluZVBhcnQuaW5saW5lRGF0YSB8fCAhaW5saW5lUGFydC5pbmxpbmVEYXRhLmhhc093blByb3BlcnR5KFwibWltZVR5cGVcIikgfHwgIWlubGluZVBhcnQuaW5saW5lRGF0YS5oYXNPd25Qcm9wZXJ0eShcImRhdGFcIikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIElubGluZURhdGFQYXJ0OiBtaXNzaW5nIHJlcXVpcmVkIHByb3BlcnRpZXNcIik7XG4gIH1cbiAgY29uc3QgeyBtaW1lVHlwZSwgZGF0YSB9ID0gaW5saW5lUGFydC5pbmxpbmVEYXRhO1xuICBjb25zdCBkYXRhVXJsID0gYGRhdGE6JHttaW1lVHlwZX07YmFzZTY0LCR7ZGF0YX1gO1xuICByZXR1cm4ge1xuICAgIG1lZGlhOiB7XG4gICAgICB1cmw6IGRhdGFVcmwsXG4gICAgICBjb250ZW50VHlwZTogbWltZVR5cGVcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiB0b0Z1bmN0aW9uQ2FsbChwYXJ0KSB7XG4gIGlmICghcGFydD8udG9vbFJlcXVlc3Q/LmlucHV0KSB7XG4gICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIFRvb2xSZXF1ZXN0UGFydDogaW5wdXQgd2FzIG1pc3NpbmcuXCIpO1xuICB9XG4gIHJldHVybiB7XG4gICAgZnVuY3Rpb25DYWxsOiB7XG4gICAgICBuYW1lOiBwYXJ0LnRvb2xSZXF1ZXN0Lm5hbWUsXG4gICAgICBhcmdzOiBwYXJ0LnRvb2xSZXF1ZXN0LmlucHV0XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gZnJvbUZ1bmN0aW9uQ2FsbChwYXJ0LCByZWYpIHtcbiAgaWYgKCFwYXJ0LmZ1bmN0aW9uQ2FsbCkge1xuICAgIHRocm93IEVycm9yKFwiSW52YWxpZCBGdW5jdGlvbkNhbGxQYXJ0XCIpO1xuICB9XG4gIHJldHVybiB7XG4gICAgdG9vbFJlcXVlc3Q6IHtcbiAgICAgIG5hbWU6IHBhcnQuZnVuY3Rpb25DYWxsLm5hbWUsXG4gICAgICBpbnB1dDogcGFydC5mdW5jdGlvbkNhbGwuYXJncyxcbiAgICAgIHJlZlxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIHRvRnVuY3Rpb25SZXNwb25zZShwYXJ0KSB7XG4gIGlmICghcGFydD8udG9vbFJlc3BvbnNlPy5vdXRwdXQpIHtcbiAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgVG9vbFJlc3BvbnNlUGFydDogb3V0cHV0IHdhcyBtaXNzaW5nLlwiKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGZ1bmN0aW9uUmVzcG9uc2U6IHtcbiAgICAgIG5hbWU6IHBhcnQudG9vbFJlc3BvbnNlLm5hbWUsXG4gICAgICByZXNwb25zZToge1xuICAgICAgICBuYW1lOiBwYXJ0LnRvb2xSZXNwb25zZS5uYW1lLFxuICAgICAgICBjb250ZW50OiBwYXJ0LnRvb2xSZXNwb25zZS5vdXRwdXRcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBmcm9tRnVuY3Rpb25SZXNwb25zZShwYXJ0KSB7XG4gIGlmICghcGFydC5mdW5jdGlvblJlc3BvbnNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBGdW5jdGlvblJlc3BvbnNlUGFydC5cIik7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB0b29sUmVzcG9uc2U6IHtcbiAgICAgIG5hbWU6IHBhcnQuZnVuY3Rpb25SZXNwb25zZS5uYW1lLnJlcGxhY2UoL19fL2csIFwiL1wiKSxcbiAgICAgIC8vIHJlc3RvcmUgc2xhc2hlc1xuICAgICAgb3V0cHV0OiBwYXJ0LmZ1bmN0aW9uUmVzcG9uc2UucmVzcG9uc2VcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBmcm9tRXhlY3V0YWJsZUNvZGUocGFydCkge1xuICBpZiAoIXBhcnQuZXhlY3V0YWJsZUNvZGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEdlbWluaVBhcnQ6IG1pc3NpbmcgZXhlY3V0YWJsZUNvZGVcIik7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjdXN0b206IHtcbiAgICAgIGV4ZWN1dGFibGVDb2RlOiB7XG4gICAgICAgIGxhbmd1YWdlOiBwYXJ0LmV4ZWN1dGFibGVDb2RlLmxhbmd1YWdlLFxuICAgICAgICBjb2RlOiBwYXJ0LmV4ZWN1dGFibGVDb2RlLmNvZGVcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBmcm9tQ29kZUV4ZWN1dGlvblJlc3VsdChwYXJ0KSB7XG4gIGlmICghcGFydC5jb2RlRXhlY3V0aW9uUmVzdWx0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBHZW1pbmlQYXJ0OiBtaXNzaW5nIGNvZGVFeGVjdXRpb25SZXN1bHRcIik7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjdXN0b206IHtcbiAgICAgIGNvZGVFeGVjdXRpb25SZXN1bHQ6IHtcbiAgICAgICAgb3V0Y29tZTogcGFydC5jb2RlRXhlY3V0aW9uUmVzdWx0Lm91dGNvbWUsXG4gICAgICAgIG91dHB1dDogcGFydC5jb2RlRXhlY3V0aW9uUmVzdWx0Lm91dHB1dFxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIHRvQ3VzdG9tUGFydChwYXJ0KSB7XG4gIGlmICghcGFydC5jdXN0b20pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEdlbWluaVBhcnQ6IG1pc3NpbmcgY3VzdG9tXCIpO1xuICB9XG4gIGlmIChwYXJ0LmN1c3RvbS5jb2RlRXhlY3V0aW9uUmVzdWx0KSB7XG4gICAgcmV0dXJuIHsgY29kZUV4ZWN1dGlvblJlc3VsdDogcGFydC5jdXN0b20uY29kZUV4ZWN1dGlvblJlc3VsdCB9O1xuICB9XG4gIGlmIChwYXJ0LmN1c3RvbS5leGVjdXRhYmxlQ29kZSkge1xuICAgIHJldHVybiB7IGV4ZWN1dGFibGVDb2RlOiBwYXJ0LmN1c3RvbS5leGVjdXRhYmxlQ29kZSB9O1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIEN1c3RvbSBQYXJ0IHR5cGVcIik7XG59XG5mdW5jdGlvbiB0b0dlbWluaVBhcnQocGFydCkge1xuICBpZiAocGFydC50ZXh0ICE9PSB2b2lkIDApIHJldHVybiB7IHRleHQ6IHBhcnQudGV4dCB8fCBcIiBcIiB9O1xuICBpZiAocGFydC5tZWRpYSkge1xuICAgIGlmIChwYXJ0Lm1lZGlhLnVybC5zdGFydHNXaXRoKFwiZGF0YTpcIikpIHJldHVybiB0b0lubGluZURhdGEocGFydCk7XG4gICAgcmV0dXJuIHRvRmlsZURhdGEocGFydCk7XG4gIH1cbiAgaWYgKHBhcnQudG9vbFJlcXVlc3QpIHJldHVybiB0b0Z1bmN0aW9uQ2FsbChwYXJ0KTtcbiAgaWYgKHBhcnQudG9vbFJlc3BvbnNlKSByZXR1cm4gdG9GdW5jdGlvblJlc3BvbnNlKHBhcnQpO1xuICBpZiAocGFydC5jdXN0b20pIHJldHVybiB0b0N1c3RvbVBhcnQocGFydCk7XG4gIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIFBhcnQgdHlwZVwiICsgSlNPTi5zdHJpbmdpZnkocGFydCkpO1xufVxuZnVuY3Rpb24gZnJvbUdlbWluaVBhcnQocGFydCwganNvbk1vZGUsIHJlZikge1xuICBpZiAocGFydC50ZXh0ICE9PSB2b2lkIDApIHJldHVybiB7IHRleHQ6IHBhcnQudGV4dCB9O1xuICBpZiAocGFydC5pbmxpbmVEYXRhKSByZXR1cm4gZnJvbUlubGluZURhdGEocGFydCk7XG4gIGlmIChwYXJ0LmZ1bmN0aW9uQ2FsbCkgcmV0dXJuIGZyb21GdW5jdGlvbkNhbGwocGFydCwgcmVmKTtcbiAgaWYgKHBhcnQuZnVuY3Rpb25SZXNwb25zZSkgcmV0dXJuIGZyb21GdW5jdGlvblJlc3BvbnNlKHBhcnQpO1xuICBpZiAocGFydC5leGVjdXRhYmxlQ29kZSkgcmV0dXJuIGZyb21FeGVjdXRhYmxlQ29kZShwYXJ0KTtcbiAgaWYgKHBhcnQuY29kZUV4ZWN1dGlvblJlc3VsdCkgcmV0dXJuIGZyb21Db2RlRXhlY3V0aW9uUmVzdWx0KHBhcnQpO1xuICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBHZW1pbmlQYXJ0IHR5cGVcIik7XG59XG5mdW5jdGlvbiB0b0dlbWluaU1lc3NhZ2UobWVzc2FnZSwgbW9kZWwpIHtcbiAgbGV0IHNvcnRlZFBhcnRzID0gbWVzc2FnZS5jb250ZW50O1xuICBpZiAobWVzc2FnZS5yb2xlID09PSBcInRvb2xcIikge1xuICAgIHNvcnRlZFBhcnRzID0gWy4uLm1lc3NhZ2UuY29udGVudF0uc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgYVJlZiA9IGEudG9vbFJlc3BvbnNlPy5yZWY7XG4gICAgICBjb25zdCBiUmVmID0gYi50b29sUmVzcG9uc2U/LnJlZjtcbiAgICAgIGlmICghYVJlZiAmJiAhYlJlZikgcmV0dXJuIDA7XG4gICAgICBpZiAoIWFSZWYpIHJldHVybiAxO1xuICAgICAgaWYgKCFiUmVmKSByZXR1cm4gLTE7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoYVJlZiwgMTApIC0gcGFyc2VJbnQoYlJlZiwgMTApO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB7XG4gICAgcm9sZTogdG9HZW1pbmlSb2xlKG1lc3NhZ2Uucm9sZSwgbW9kZWwpLFxuICAgIHBhcnRzOiBzb3J0ZWRQYXJ0cy5tYXAodG9HZW1pbmlQYXJ0KVxuICB9O1xufVxuZnVuY3Rpb24gdG9HZW1pbmlTeXN0ZW1JbnN0cnVjdGlvbihtZXNzYWdlKSB7XG4gIHJldHVybiB7XG4gICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgcGFydHM6IG1lc3NhZ2UuY29udGVudC5tYXAodG9HZW1pbmlQYXJ0KVxuICB9O1xufVxuZnVuY3Rpb24gZnJvbUdlbWluaUZpbmlzaFJlYXNvbihyZWFzb24pIHtcbiAgaWYgKCFyZWFzb24pIHJldHVybiBcInVua25vd25cIjtcbiAgc3dpdGNoIChyZWFzb24pIHtcbiAgICBjYXNlIFwiU1RPUFwiOlxuICAgICAgcmV0dXJuIFwic3RvcFwiO1xuICAgIGNhc2UgXCJNQVhfVE9LRU5TXCI6XG4gICAgICByZXR1cm4gXCJsZW5ndGhcIjtcbiAgICBjYXNlIFwiU0FGRVRZXCI6XG4gICAgLy8gYmxvY2tlZCBmb3Igc2FmZXR5XG4gICAgY2FzZSBcIlJFQ0lUQVRJT05cIjpcbiAgICAgIHJldHVybiBcImJsb2NrZWRcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwidW5rbm93blwiO1xuICB9XG59XG5mdW5jdGlvbiBmcm9tR2VtaW5pQ2FuZGlkYXRlKGNhbmRpZGF0ZSwganNvbk1vZGUgPSBmYWxzZSkge1xuICBjb25zdCBwYXJ0cyA9IGNhbmRpZGF0ZS5jb250ZW50Py5wYXJ0cyB8fCBbXTtcbiAgY29uc3QgZ2Vua2l0Q2FuZGlkYXRlID0ge1xuICAgIGluZGV4OiBjYW5kaWRhdGUuaW5kZXggfHwgMCxcbiAgICBtZXNzYWdlOiB7XG4gICAgICByb2xlOiBcIm1vZGVsXCIsXG4gICAgICBjb250ZW50OiBwYXJ0cy5tYXAoXG4gICAgICAgIChwYXJ0LCBpbmRleCkgPT4gZnJvbUdlbWluaVBhcnQocGFydCwganNvbk1vZGUsIGluZGV4LnRvU3RyaW5nKCkpXG4gICAgICApXG4gICAgfSxcbiAgICBmaW5pc2hSZWFzb246IGZyb21HZW1pbmlGaW5pc2hSZWFzb24oY2FuZGlkYXRlLmZpbmlzaFJlYXNvbiksXG4gICAgZmluaXNoTWVzc2FnZTogY2FuZGlkYXRlLmZpbmlzaE1lc3NhZ2UsXG4gICAgY3VzdG9tOiB7XG4gICAgICBzYWZldHlSYXRpbmdzOiBjYW5kaWRhdGUuc2FmZXR5UmF0aW5ncyxcbiAgICAgIGNpdGF0aW9uTWV0YWRhdGE6IGNhbmRpZGF0ZS5jaXRhdGlvbk1ldGFkYXRhXG4gICAgfVxuICB9O1xuICByZXR1cm4gZ2Vua2l0Q2FuZGlkYXRlO1xufVxuZnVuY3Rpb24gY2xlYW5TY2hlbWEoc2NoZW1hKSB7XG4gIGNvbnN0IG91dCA9IHN0cnVjdHVyZWRDbG9uZShzY2hlbWEpO1xuICBmb3IgKGNvbnN0IGtleSBpbiBvdXQpIHtcbiAgICBpZiAoa2V5ID09PSBcIiRzY2hlbWFcIiB8fCBrZXkgPT09IFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIikge1xuICAgICAgZGVsZXRlIG91dFtrZXldO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3V0W2tleV0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIG91dFtrZXldID0gY2xlYW5TY2hlbWEob3V0W2tleV0pO1xuICAgIH1cbiAgICBpZiAoa2V5ID09PSBcInR5cGVcIiAmJiBBcnJheS5pc0FycmF5KG91dFtrZXldKSkge1xuICAgICAgb3V0W2tleV0gPSBvdXRba2V5XS5maW5kKCh0KSA9PiB0ICE9PSBcIm51bGxcIik7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXQ7XG59XG5mdW5jdGlvbiBkZWZpbmVHb29nbGVBSU1vZGVsKHtcbiAgYWksXG4gIG5hbWUsXG4gIGFwaUtleTogYXBpS2V5T3B0aW9uLFxuICBhcGlWZXJzaW9uLFxuICBiYXNlVXJsLFxuICBpbmZvLFxuICBkZWZhdWx0Q29uZmlnLFxuICBkZWJ1Z1RyYWNlc1xufSkge1xuICBsZXQgYXBpS2V5O1xuICBpZiAoYXBpS2V5T3B0aW9uICE9PSBmYWxzZSkge1xuICAgIGFwaUtleSA9IGFwaUtleU9wdGlvbiB8fCAoMCwgaW1wb3J0X2NvbW1vbi5nZXRBcGlLZXlGcm9tRW52VmFyKSgpO1xuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgaW1wb3J0X2dlbmtpdC5HZW5raXRFcnJvcih7XG4gICAgICAgIHN0YXR1czogXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiUGxlYXNlIHBhc3MgaW4gdGhlIEFQSSBrZXkgb3Igc2V0IHRoZSBHRU1JTklfQVBJX0tFWSBvciBHT09HTEVfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZS5cXG5Gb3IgbW9yZSBkZXRhaWxzIHNlZSBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9nZW5raXQvcGx1Z2lucy9nb29nbGUtZ2VuYWlcIlxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGFwaU1vZGVsTmFtZSA9IG5hbWUuc3RhcnRzV2l0aChcImdvb2dsZWFpL1wiKSA/IG5hbWUuc3Vic3RyaW5nKFwiZ29vZ2xlYWkvXCIubGVuZ3RoKSA6IG5hbWU7XG4gIGNvbnN0IG1vZGVsID0gU1VQUE9SVEVEX0dFTUlOSV9NT0RFTFNbYXBpTW9kZWxOYW1lXSA/PyAoMCwgaW1wb3J0X21vZGVsLm1vZGVsUmVmKSh7XG4gICAgbmFtZTogYGdvb2dsZWFpLyR7YXBpTW9kZWxOYW1lfWAsXG4gICAgaW5mbzoge1xuICAgICAgbGFiZWw6IGBHb29nbGUgQUkgLSAke2FwaU1vZGVsTmFtZX1gLFxuICAgICAgc3VwcG9ydHM6IHtcbiAgICAgICAgbXVsdGl0dXJuOiB0cnVlLFxuICAgICAgICBtZWRpYTogdHJ1ZSxcbiAgICAgICAgdG9vbHM6IHRydWUsXG4gICAgICAgIHN5c3RlbVJvbGU6IHRydWUsXG4gICAgICAgIG91dHB1dDogW1widGV4dFwiLCBcImpzb25cIl1cbiAgICAgIH0sXG4gICAgICAuLi5pbmZvXG4gICAgfSxcbiAgICBjb25maWdTY2hlbWE6IEdlbWluaUNvbmZpZ1NjaGVtYVxuICB9KTtcbiAgY29uc3QgbWlkZGxld2FyZSA9IFtdO1xuICBpZiAoU1VQUE9SVEVEX1YxX01PREVMU1thcGlNb2RlbE5hbWVdKSB7XG4gICAgbWlkZGxld2FyZS5wdXNoKCgwLCBpbXBvcnRfbWlkZGxld2FyZS5zaW11bGF0ZVN5c3RlbVByb21wdCkoKSk7XG4gIH1cbiAgaWYgKG1vZGVsLmluZm8/LnN1cHBvcnRzPy5tZWRpYSkge1xuICAgIG1pZGRsZXdhcmUucHVzaChcbiAgICAgICgwLCBpbXBvcnRfbWlkZGxld2FyZS5kb3dubG9hZFJlcXVlc3RNZWRpYSkoe1xuICAgICAgICBtYXhCeXRlczogMTAyNCAqIDEwMjQgKiAxMCxcbiAgICAgICAgLy8gZG9uJ3QgZG93bmxhb2QgZmlsZXMgdGhhdCBoYXZlIGJlZW4gdXBsb2FkZWQgdXNpbmcgdGhlIEZpbGVzIEFQSVxuICAgICAgICBmaWx0ZXI6IChwYXJ0KSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocGFydC5tZWRpYS51cmwpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAvLyBHZW1pbmkgY2FuIGhhbmRsZSB0aGVzZSBVUkxzXG4gICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBcImdlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbVwiLFxuICAgICAgICAgICAgICAgIFwid3d3LnlvdXR1YmUuY29tXCIsXG4gICAgICAgICAgICAgICAgXCJ5b3V0dWJlLmNvbVwiLFxuICAgICAgICAgICAgICAgIFwieW91dHUuYmVcIlxuICAgICAgICAgICAgICBdLmluY2x1ZGVzKHVybC5ob3N0bmFtZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICB9XG4gIHJldHVybiBhaS5kZWZpbmVNb2RlbChcbiAgICB7XG4gICAgICBuYW1lOiBtb2RlbC5uYW1lLFxuICAgICAgLi4ubW9kZWwuaW5mbyxcbiAgICAgIGNvbmZpZ1NjaGVtYTogbW9kZWwuY29uZmlnU2NoZW1hLFxuICAgICAgdXNlOiBtaWRkbGV3YXJlXG4gICAgfSxcbiAgICBhc3luYyAocmVxdWVzdCwgc2VuZENodW5rKSA9PiB7XG4gICAgICBjb25zdCBvcHRpb25zID0geyBhcGlDbGllbnQ6IGltcG9ydF9nZW5raXQuR0VOS0lUX0NMSUVOVF9IRUFERVIgfTtcbiAgICAgIGlmIChhcGlWZXJzaW9uKSB7XG4gICAgICAgIG9wdGlvbnMuYXBpVmVyc2lvbiA9IGFwaVZlcnNpb247XG4gICAgICB9XG4gICAgICBpZiAoYXBpVmVyc2lvbikge1xuICAgICAgICBvcHRpb25zLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVxdWVzdENvbmZpZyA9IHtcbiAgICAgICAgLi4uZGVmYXVsdENvbmZpZyxcbiAgICAgICAgLi4ucmVxdWVzdC5jb25maWdcbiAgICAgIH07XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IFsuLi5yZXF1ZXN0Lm1lc3NhZ2VzXTtcbiAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPT09IDApIHRocm93IG5ldyBFcnJvcihcIk5vIG1lc3NhZ2VzIHByb3ZpZGVkLlwiKTtcbiAgICAgIGxldCBzeXN0ZW1JbnN0cnVjdGlvbiA9IHZvaWQgMDtcbiAgICAgIGlmIChTVVBQT1JURURfVjE1X01PREVMU1thcGlNb2RlbE5hbWVdKSB7XG4gICAgICAgIGNvbnN0IHN5c3RlbU1lc3NhZ2UgPSBtZXNzYWdlcy5maW5kKChtKSA9PiBtLnJvbGUgPT09IFwic3lzdGVtXCIpO1xuICAgICAgICBpZiAoc3lzdGVtTWVzc2FnZSkge1xuICAgICAgICAgIG1lc3NhZ2VzLnNwbGljZShtZXNzYWdlcy5pbmRleE9mKHN5c3RlbU1lc3NhZ2UpLCAxKTtcbiAgICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbiA9IHRvR2VtaW5pU3lzdGVtSW5zdHJ1Y3Rpb24oc3lzdGVtTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHRvb2xzID0gW107XG4gICAgICBpZiAocmVxdWVzdC50b29scz8ubGVuZ3RoKSB7XG4gICAgICAgIHRvb2xzLnB1c2goe1xuICAgICAgICAgIGZ1bmN0aW9uRGVjbGFyYXRpb25zOiByZXF1ZXN0LnRvb2xzLm1hcCh0b0dlbWluaVRvb2wpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3Qge1xuICAgICAgICBhcGlLZXk6IGFwaUtleUZyb21Db25maWcsXG4gICAgICAgIHNhZmV0eVNldHRpbmdzOiBzYWZldHlTZXR0aW5nc0Zyb21Db25maWcsXG4gICAgICAgIGNvZGVFeGVjdXRpb246IGNvZGVFeGVjdXRpb25Gcm9tQ29uZmlnLFxuICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uRnJvbUNvbmZpZyxcbiAgICAgICAgZnVuY3Rpb25DYWxsaW5nQ29uZmlnLFxuICAgICAgICAuLi5yZXN0T2ZDb25maWdPcHRpb25zXG4gICAgICB9ID0gcmVxdWVzdENvbmZpZztcbiAgICAgIGlmIChjb2RlRXhlY3V0aW9uRnJvbUNvbmZpZykge1xuICAgICAgICB0b29scy5wdXNoKHtcbiAgICAgICAgICBjb2RlRXhlY3V0aW9uOiByZXF1ZXN0LmNvbmZpZy5jb2RlRXhlY3V0aW9uID09PSB0cnVlID8ge30gOiByZXF1ZXN0LmNvbmZpZy5jb2RlRXhlY3V0aW9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbGV0IHRvb2xDb25maWc7XG4gICAgICBpZiAoZnVuY3Rpb25DYWxsaW5nQ29uZmlnKSB7XG4gICAgICAgIHRvb2xDb25maWcgPSB7XG4gICAgICAgICAgZnVuY3Rpb25DYWxsaW5nQ29uZmlnOiB7XG4gICAgICAgICAgICBhbGxvd2VkRnVuY3Rpb25OYW1lczogZnVuY3Rpb25DYWxsaW5nQ29uZmlnLmFsbG93ZWRGdW5jdGlvbk5hbWVzLFxuICAgICAgICAgICAgbW9kZTogdG9GdW5jdGlvbk1vZGVFbnVtKGZ1bmN0aW9uQ2FsbGluZ0NvbmZpZy5tb2RlKVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSBpZiAocmVxdWVzdC50b29sQ2hvaWNlKSB7XG4gICAgICAgIHRvb2xDb25maWcgPSB7XG4gICAgICAgICAgZnVuY3Rpb25DYWxsaW5nQ29uZmlnOiB7XG4gICAgICAgICAgICBtb2RlOiB0b0dlbWluaUZ1bmN0aW9uTW9kZUVudW0ocmVxdWVzdC50b29sQ2hvaWNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGpzb25Nb2RlID0gcmVxdWVzdC5vdXRwdXQ/LmZvcm1hdCA9PT0gXCJqc29uXCIgfHwgcmVxdWVzdC5vdXRwdXQ/LmNvbnRlbnRUeXBlID09PSBcImFwcGxpY2F0aW9uL2pzb25cIiAmJiB0b29scy5sZW5ndGggPT09IDA7XG4gICAgICBjb25zdCBnZW5lcmF0aW9uQ29uZmlnID0ge1xuICAgICAgICAuLi5yZXN0T2ZDb25maWdPcHRpb25zLFxuICAgICAgICBjYW5kaWRhdGVDb3VudDogcmVxdWVzdC5jYW5kaWRhdGVzIHx8IHZvaWQgMCxcbiAgICAgICAgcmVzcG9uc2VNaW1lVHlwZToganNvbk1vZGUgPyBcImFwcGxpY2F0aW9uL2pzb25cIiA6IHZvaWQgMFxuICAgICAgfTtcbiAgICAgIGlmIChyZXF1ZXN0Lm91dHB1dD8uY29uc3RyYWluZWQgJiYganNvbk1vZGUpIHtcbiAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZy5yZXNwb25zZVNjaGVtYSA9IGNsZWFuU2NoZW1hKHJlcXVlc3Qub3V0cHV0LnNjaGVtYSk7XG4gICAgICB9XG4gICAgICBjb25zdCBtc2cgPSB0b0dlbWluaU1lc3NhZ2UobWVzc2FnZXNbbWVzc2FnZXMubGVuZ3RoIC0gMV0sIG1vZGVsKTtcbiAgICAgIGNvbnN0IGZyb21KU09OTW9kZVNjb3BlZEdlbWluaUNhbmRpZGF0ZSA9IChjYW5kaWRhdGUpID0+IHtcbiAgICAgICAgcmV0dXJuIGZyb21HZW1pbmlDYW5kaWRhdGUoY2FuZGlkYXRlLCBqc29uTW9kZSk7XG4gICAgICB9O1xuICAgICAgbGV0IGNoYXRSZXF1ZXN0ID0ge1xuICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbixcbiAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZyxcbiAgICAgICAgdG9vbHM6IHRvb2xzLmxlbmd0aCA/IHRvb2xzIDogdm9pZCAwLFxuICAgICAgICB0b29sQ29uZmlnLFxuICAgICAgICBoaXN0b3J5OiBtZXNzYWdlcy5zbGljZSgwLCAtMSkubWFwKChtZXNzYWdlKSA9PiB0b0dlbWluaU1lc3NhZ2UobWVzc2FnZSwgbW9kZWwpKSxcbiAgICAgICAgc2FmZXR5U2V0dGluZ3M6IHNhZmV0eVNldHRpbmdzRnJvbUNvbmZpZ1xuICAgICAgfTtcbiAgICAgIGNvbnN0IG1vZGVsVmVyc2lvbiA9IHZlcnNpb25Gcm9tQ29uZmlnIHx8IG1vZGVsLnZlcnNpb24gfHwgYXBpTW9kZWxOYW1lO1xuICAgICAgY29uc3QgY2FjaGVDb25maWdEZXRhaWxzID0gKDAsIGltcG9ydF91dGlscy5leHRyYWN0Q2FjaGVDb25maWcpKHJlcXVlc3QpO1xuICAgICAgY29uc3QgeyBjaGF0UmVxdWVzdDogdXBkYXRlZENoYXRSZXF1ZXN0LCBjYWNoZSB9ID0gYXdhaXQgKDAsIGltcG9ydF9jb250ZXh0X2NhY2hpbmcuaGFuZGxlQ2FjaGVJZk5lZWRlZCkoXG4gICAgICAgIGFwaUtleSxcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgY2hhdFJlcXVlc3QsXG4gICAgICAgIG1vZGVsVmVyc2lvbixcbiAgICAgICAgY2FjaGVDb25maWdEZXRhaWxzXG4gICAgICApO1xuICAgICAgaWYgKCFhcGlLZXlGcm9tQ29uZmlnICYmICFhcGlLZXkpIHtcbiAgICAgICAgdGhyb3cgbmV3IGltcG9ydF9nZW5raXQuR2Vua2l0RXJyb3Ioe1xuICAgICAgICAgIHN0YXR1czogXCJJTlZBTElEX0FSR1VNRU5UXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJHb29nbGVBSSBwbHVnaW4gd2FzIGluaXRpYWxpemVkIHdpdGgge2FwaUtleTogZmFsc2V9IGJ1dCBubyBhcGlLZXkgY29uZmlndXJhdGlvbiB3YXMgcGFzc2VkIGF0IGNhbGwgdGltZS5cIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBpbXBvcnRfZ2VuZXJhdGl2ZV9haS5Hb29nbGVHZW5lcmF0aXZlQUkoYXBpS2V5RnJvbUNvbmZpZyB8fCBhcGlLZXkpO1xuICAgICAgbGV0IGdlbk1vZGVsO1xuICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGdlbk1vZGVsID0gY2xpZW50LmdldEdlbmVyYXRpdmVNb2RlbEZyb21DYWNoZWRDb250ZW50KFxuICAgICAgICAgIGNhY2hlLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1vZGVsOiBtb2RlbFZlcnNpb25cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdlbk1vZGVsID0gY2xpZW50LmdldEdlbmVyYXRpdmVNb2RlbChcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtb2RlbDogbW9kZWxWZXJzaW9uXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcHRpb25zXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBjYWxsR2VtaW5pID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICAgIGlmIChzZW5kQ2h1bmspIHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW5Nb2RlbC5zdGFydENoYXQodXBkYXRlZENoYXRSZXF1ZXN0KS5zZW5kTWVzc2FnZVN0cmVhbShtc2cucGFydHMsIG9wdGlvbnMpO1xuICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiByZXN1bHQuc3RyZWFtKSB7XG4gICAgICAgICAgICBpdGVtLmNhbmRpZGF0ZXM/LmZvckVhY2goXG4gICAgICAgICAgICAgIChjYW5kaWRhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gZnJvbUpTT05Nb2RlU2NvcGVkR2VtaW5pQ2FuZGlkYXRlKGNhbmRpZGF0ZSk7XG4gICAgICAgICAgICAgICAgc2VuZENodW5rKHtcbiAgICAgICAgICAgICAgICAgIGluZGV4OiBjLmluZGV4LFxuICAgICAgICAgICAgICAgICAgY29udGVudDogYy5tZXNzYWdlLmNvbnRlbnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCByZXN1bHQucmVzcG9uc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2VuTW9kZWwuc3RhcnRDaGF0KHVwZGF0ZWRDaGF0UmVxdWVzdCkuc2VuZE1lc3NhZ2UobXNnLnBhcnRzLCBvcHRpb25zKTtcbiAgICAgICAgICByZXNwb25zZSA9IHJlc3VsdC5yZXNwb25zZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYW5kaWRhdGVzID0gcmVzcG9uc2UuY2FuZGlkYXRlcyB8fCBbXTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmNhbmRpZGF0ZXM/LltcInVuZGVmaW5lZFwiXSkge1xuICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChyZXNwb25zZS5jYW5kaWRhdGVzW1widW5kZWZpbmVkXCJdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNhbmRpZGF0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IGltcG9ydF9nZW5raXQuR2Vua2l0RXJyb3Ioe1xuICAgICAgICAgICAgc3RhdHVzOiBcIkZBSUxFRF9QUkVDT05ESVRJT05cIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTm8gdmFsaWQgY2FuZGlkYXRlcyByZXR1cm5lZC5cIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZURhdGEgPSBjYW5kaWRhdGVzLm1hcChmcm9tSlNPTk1vZGVTY29wZWRHZW1pbmlDYW5kaWRhdGUpIHx8IFtdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNhbmRpZGF0ZXM6IGNhbmRpZGF0ZURhdGEsXG4gICAgICAgICAgY3VzdG9tOiByZXNwb25zZSxcbiAgICAgICAgICB1c2FnZToge1xuICAgICAgICAgICAgLi4uKDAsIGltcG9ydF9tb2RlbC5nZXRCYXNpY1VzYWdlU3RhdHMpKHJlcXVlc3QubWVzc2FnZXMsIGNhbmRpZGF0ZURhdGEpLFxuICAgICAgICAgICAgaW5wdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlTWV0YWRhdGE/LnByb21wdFRva2VuQ291bnQsXG4gICAgICAgICAgICBvdXRwdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlTWV0YWRhdGE/LmNhbmRpZGF0ZXNUb2tlbkNvdW50LFxuICAgICAgICAgICAgdG90YWxUb2tlbnM6IHJlc3BvbnNlLnVzYWdlTWV0YWRhdGE/LnRvdGFsVG9rZW5Db3VudFxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gZGVidWdUcmFjZXMgPyBhd2FpdCAoMCwgaW1wb3J0X3RyYWNpbmcucnVuSW5OZXdTcGFuKShcbiAgICAgICAgYWkucmVnaXN0cnksXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgbmFtZTogc2VuZENodW5rID8gXCJzZW5kTWVzc2FnZVN0cmVhbVwiIDogXCJzZW5kTWVzc2FnZVwiXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhc3luYyAobWV0YWRhdGEpID0+IHtcbiAgICAgICAgICBtZXRhZGF0YS5pbnB1dCA9IHtcbiAgICAgICAgICAgIHNkazogXCJAZ29vZ2xlL2dlbmVyYXRpdmUtYWlcIixcbiAgICAgICAgICAgIGNhY2hlLFxuICAgICAgICAgICAgbW9kZWw6IGdlbk1vZGVsLm1vZGVsLFxuICAgICAgICAgICAgY2hhdE9wdGlvbnM6IHVwZGF0ZWRDaGF0UmVxdWVzdCxcbiAgICAgICAgICAgIHBhcnRzOiBtc2cucGFydHMsXG4gICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNhbGxHZW1pbmkoKTtcbiAgICAgICAgICBtZXRhZGF0YS5vdXRwdXQgPSByZXNwb25zZS5jdXN0b207XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9XG4gICAgICApIDogYXdhaXQgY2FsbEdlbWluaSgpO1xuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIHRvRnVuY3Rpb25Nb2RlRW51bShjb25maWdFbnVtKSB7XG4gIGlmIChjb25maWdFbnVtID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIHN3aXRjaCAoY29uZmlnRW51bSkge1xuICAgIGNhc2UgXCJNT0RFX1VOU1BFQ0lGSUVEXCI6IHtcbiAgICAgIHJldHVybiBpbXBvcnRfZ2VuZXJhdGl2ZV9haS5GdW5jdGlvbkNhbGxpbmdNb2RlLk1PREVfVU5TUEVDSUZJRUQ7XG4gICAgfVxuICAgIGNhc2UgXCJBTllcIjoge1xuICAgICAgcmV0dXJuIGltcG9ydF9nZW5lcmF0aXZlX2FpLkZ1bmN0aW9uQ2FsbGluZ01vZGUuQU5ZO1xuICAgIH1cbiAgICBjYXNlIFwiQVVUT1wiOiB7XG4gICAgICByZXR1cm4gaW1wb3J0X2dlbmVyYXRpdmVfYWkuRnVuY3Rpb25DYWxsaW5nTW9kZS5BVVRPO1xuICAgIH1cbiAgICBjYXNlIFwiTk9ORVwiOiB7XG4gICAgICByZXR1cm4gaW1wb3J0X2dlbmVyYXRpdmVfYWkuRnVuY3Rpb25DYWxsaW5nTW9kZS5OT05FO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bnN1cHBvcnRlZCBmdW5jdGlvbiBjYWxsaW5nIG1vZGU6ICR7Y29uZmlnRW51bX1gKTtcbiAgfVxufVxuZnVuY3Rpb24gdG9HZW1pbmlGdW5jdGlvbk1vZGVFbnVtKGdlbmtpdE1vZGUpIHtcbiAgaWYgKGdlbmtpdE1vZGUgPT09IHZvaWQgMCkge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgc3dpdGNoIChnZW5raXRNb2RlKSB7XG4gICAgY2FzZSBcInJlcXVpcmVkXCI6IHtcbiAgICAgIHJldHVybiBpbXBvcnRfZ2VuZXJhdGl2ZV9haS5GdW5jdGlvbkNhbGxpbmdNb2RlLkFOWTtcbiAgICB9XG4gICAgY2FzZSBcImF1dG9cIjoge1xuICAgICAgcmV0dXJuIGltcG9ydF9nZW5lcmF0aXZlX2FpLkZ1bmN0aW9uQ2FsbGluZ01vZGUuQVVUTztcbiAgICB9XG4gICAgY2FzZSBcIm5vbmVcIjoge1xuICAgICAgcmV0dXJuIGltcG9ydF9nZW5lcmF0aXZlX2FpLkZ1bmN0aW9uQ2FsbGluZ01vZGUuTk9ORTtcbiAgICB9XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5zdXBwb3J0ZWQgZnVuY3Rpb24gY2FsbGluZyBtb2RlOiAke2dlbmtpdE1vZGV9YCk7XG4gIH1cbn1cbi8vIEFubm90YXRlIHRoZSBDb21tb25KUyBleHBvcnQgbmFtZXMgZm9yIEVTTSBpbXBvcnQgaW4gbm9kZTpcbjAgJiYgKG1vZHVsZS5leHBvcnRzID0ge1xuICBHRU5FUklDX0dFTUlOSV9NT0RFTCxcbiAgR2VtaW5pQ29uZmlnU2NoZW1hLFxuICBTVVBQT1JURURfR0VNSU5JX01PREVMUyxcbiAgU1VQUE9SVEVEX1YxNV9NT0RFTFMsXG4gIFNVUFBPUlRFRF9WMV9NT0RFTFMsXG4gIGNsZWFuU2NoZW1hLFxuICBkZWZpbmVHb29nbGVBSU1vZGVsLFxuICBmcm9tR2VtaW5pQ2FuZGlkYXRlLFxuICBnZW1pbmksXG4gIGdlbWluaTEwUHJvLFxuICBnZW1pbmkxNUZsYXNoLFxuICBnZW1pbmkxNUZsYXNoOGIsXG4gIGdlbWluaTE1UHJvLFxuICBnZW1pbmkyMEZsYXNoLFxuICBnZW1pbmkyMEZsYXNoRXhwLFxuICBnZW1pbmkyMEZsYXNoTGl0ZSxcbiAgZ2VtaW5pMjBQcm9FeHAwMjA1LFxuICBnZW1pbmkyNUZsYXNoUHJldmlldzA0MTcsXG4gIGdlbWluaTI1UHJvRXhwMDMyNSxcbiAgZ2VtaW5pMjVQcm9QcmV2aWV3MDMyNSxcbiAgdG9HZW1pbmlNZXNzYWdlLFxuICB0b0dlbWluaVN5c3RlbUluc3RydWN0aW9uLFxuICB0b0dlbWluaVRvb2xcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2VtaW5pLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@genkit-ai/googleai/lib/gemini.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@genkit-ai/googleai/lib/index.mjs":
/*!********************************************************!*\
  !*** ./node_modules/@genkit-ai/googleai/lib/index.mjs ***!
  \********************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ src_default),\n/* harmony export */   gemini: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini),\n/* harmony export */   gemini10Pro: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini10Pro),\n/* harmony export */   gemini15Flash: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini15Flash),\n/* harmony export */   gemini15Flash8b: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini15Flash8b),\n/* harmony export */   gemini15Pro: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini15Pro),\n/* harmony export */   gemini20Flash: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini20Flash),\n/* harmony export */   gemini20FlashExp: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini20FlashExp),\n/* harmony export */   gemini20FlashLite: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini20FlashLite),\n/* harmony export */   gemini20ProExp0205: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini20ProExp0205),\n/* harmony export */   gemini25FlashPreview0417: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini25FlashPreview0417),\n/* harmony export */   gemini25ProExp0325: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini25ProExp0325),\n/* harmony export */   gemini25ProPreview0325: () => (/* reexport safe */ _gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini25ProPreview0325),\n/* harmony export */   googleAI: () => (/* binding */ googleAI),\n/* harmony export */   googleAIPlugin: () => (/* binding */ googleAIPlugin),\n/* harmony export */   textEmbedding004: () => (/* reexport safe */ _embedder_js__WEBPACK_IMPORTED_MODULE_5__.textEmbedding004),\n/* harmony export */   textEmbeddingGecko001: () => (/* reexport safe */ _embedder_js__WEBPACK_IMPORTED_MODULE_5__.textEmbeddingGecko001)\n/* harmony export */ });\n/* harmony import */ var genkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! genkit */ \"genkit?d90a\");\n/* harmony import */ var genkit_logging__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! genkit/logging */ \"genkit/logging?fc07\");\n/* harmony import */ var genkit_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! genkit/model */ \"genkit/model?ffd7\");\n/* harmony import */ var genkit_plugin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! genkit/plugin */ \"genkit/plugin\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common.js */ \"(action-browser)/./node_modules/@genkit-ai/googleai/lib/common.js\");\n/* harmony import */ var _embedder_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./embedder.js */ \"(action-browser)/./node_modules/@genkit-ai/googleai/lib/embedder.js\");\n/* harmony import */ var _gemini_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./gemini.js */ \"(action-browser)/./node_modules/@genkit-ai/googleai/lib/gemini.js\");\n/* harmony import */ var _list_models_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./list-models.js */ \"(action-browser)/./node_modules/@genkit-ai/googleai/lib/list-models.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([genkit__WEBPACK_IMPORTED_MODULE_0__, genkit_logging__WEBPACK_IMPORTED_MODULE_1__, genkit_model__WEBPACK_IMPORTED_MODULE_2__, genkit_plugin__WEBPACK_IMPORTED_MODULE_3__]);\n([genkit__WEBPACK_IMPORTED_MODULE_0__, genkit_logging__WEBPACK_IMPORTED_MODULE_1__, genkit_model__WEBPACK_IMPORTED_MODULE_2__, genkit_plugin__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nasync function initializer(ai, options) {\n  let apiVersions = [\"v1\"];\n  if (options?.apiVersion) {\n    if (Array.isArray(options?.apiVersion)) {\n      apiVersions = options?.apiVersion;\n    } else {\n      apiVersions = [options?.apiVersion];\n    }\n  }\n  if (apiVersions.includes(\"v1beta\")) {\n    Object.keys(_gemini_js__WEBPACK_IMPORTED_MODULE_6__.SUPPORTED_V15_MODELS).forEach(\n      (name) => (0,_gemini_js__WEBPACK_IMPORTED_MODULE_6__.defineGoogleAIModel)({\n        ai,\n        name,\n        apiKey: options?.apiKey,\n        apiVersion: \"v1beta\",\n        baseUrl: options?.baseUrl,\n        debugTraces: options?.experimental_debugTraces\n      })\n    );\n  }\n  if (apiVersions.includes(\"v1\")) {\n    Object.keys(_gemini_js__WEBPACK_IMPORTED_MODULE_6__.SUPPORTED_V1_MODELS).forEach(\n      (name) => (0,_gemini_js__WEBPACK_IMPORTED_MODULE_6__.defineGoogleAIModel)({\n        ai,\n        name,\n        apiKey: options?.apiKey,\n        apiVersion: void 0,\n        baseUrl: options?.baseUrl,\n        debugTraces: options?.experimental_debugTraces\n      })\n    );\n    Object.keys(_gemini_js__WEBPACK_IMPORTED_MODULE_6__.SUPPORTED_V15_MODELS).forEach(\n      (name) => (0,_gemini_js__WEBPACK_IMPORTED_MODULE_6__.defineGoogleAIModel)({\n        ai,\n        name,\n        apiKey: options?.apiKey,\n        apiVersion: void 0,\n        baseUrl: options?.baseUrl,\n        debugTraces: options?.experimental_debugTraces\n      })\n    );\n    Object.keys(_embedder_js__WEBPACK_IMPORTED_MODULE_5__.SUPPORTED_MODELS).forEach(\n      (name) => (0,_embedder_js__WEBPACK_IMPORTED_MODULE_5__.defineGoogleAIEmbedder)(ai, name, { apiKey: options?.apiKey })\n    );\n  }\n  if (options?.models) {\n    for (const modelOrRef of options?.models) {\n      const modelName = typeof modelOrRef === \"string\" ? modelOrRef : (\n        // strip out the `googleai/` prefix\n        modelOrRef.name.split(\"/\")[1]\n      );\n      const modelRef2 = typeof modelOrRef === \"string\" ? (0,_gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini)(modelOrRef) : modelOrRef;\n      (0,_gemini_js__WEBPACK_IMPORTED_MODULE_6__.defineGoogleAIModel)({\n        ai,\n        name: modelName,\n        apiKey: options?.apiKey,\n        baseUrl: options?.baseUrl,\n        info: {\n          ...modelRef2.info,\n          label: `Google AI - ${modelName}`\n        },\n        debugTraces: options?.experimental_debugTraces\n      });\n    }\n  }\n}\nasync function resolver(ai, actionType, actionName, options) {\n  switch (actionType) {\n    case \"model\":\n      resolveModel(ai, actionName, options);\n      break;\n    case \"embedder\":\n      resolveEmbedder(ai, actionName, options);\n      break;\n    default:\n  }\n}\nfunction resolveModel(ai, actionName, options) {\n  const modelRef2 = (0,_gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini)(actionName);\n  (0,_gemini_js__WEBPACK_IMPORTED_MODULE_6__.defineGoogleAIModel)({\n    ai,\n    name: modelRef2.name,\n    apiKey: options?.apiKey,\n    baseUrl: options?.baseUrl,\n    info: {\n      ...modelRef2.info,\n      label: `Google AI - ${actionName}`\n    },\n    debugTraces: options?.experimental_debugTraces\n  });\n}\nfunction resolveEmbedder(ai, actionName, options) {\n  (0,_embedder_js__WEBPACK_IMPORTED_MODULE_5__.defineGoogleAIEmbedder)(ai, `googleai/${actionName}`, {\n    apiKey: options?.apiKey\n  });\n}\nasync function listActions(options) {\n  const apiKey = options?.apiKey || (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.getApiKeyFromEnvVar)();\n  if (!apiKey) {\n    genkit_logging__WEBPACK_IMPORTED_MODULE_1__.logger.error(\n      \"Pass in the API key or set the GEMINI_API_KEY or GOOGLE_API_KEY environment variable.\"\n    );\n    return [];\n  }\n  const models = await (0,_list_models_js__WEBPACK_IMPORTED_MODULE_7__.listModels)(\n    options?.baseUrl || \"https://generativelanguage.googleapis.com\",\n    apiKey\n  );\n  return [\n    // Models\n    ...models.filter((m) => m.supportedGenerationMethods.includes(\"generateContent\")).filter((m) => !m.description || !m.description.includes(\"deprecated\")).map((m) => {\n      const ref = (0,_gemini_js__WEBPACK_IMPORTED_MODULE_6__.gemini)(\n        m.name.startsWith(\"models/\") ? m.name.substring(\"models/\".length) : m.name\n      );\n      return (0,genkit__WEBPACK_IMPORTED_MODULE_0__.modelActionMetadata)({\n        name: ref.name,\n        info: ref.info,\n        configSchema: _gemini_js__WEBPACK_IMPORTED_MODULE_6__.GeminiConfigSchema\n      });\n    }),\n    // Embedders\n    ...models.filter((m) => m.supportedGenerationMethods.includes(\"embedContent\")).filter((m) => !m.description || !m.description.includes(\"deprecated\")).map((m) => {\n      const name = \"googleai/\" + (m.name.startsWith(\"models/\") ? m.name.substring(\"models/\".length) : m.name);\n      return (0,genkit__WEBPACK_IMPORTED_MODULE_0__.embedderActionMetadata)({\n        name,\n        configSchema: _embedder_js__WEBPACK_IMPORTED_MODULE_5__.GeminiEmbeddingConfigSchema,\n        info: {\n          dimensions: 768,\n          label: `Google Gen AI - ${name}`,\n          supports: {\n            input: [\"text\"]\n          }\n        }\n      });\n    })\n  ];\n}\nfunction googleAIPlugin(options) {\n  let listActionsCache;\n  return (0,genkit_plugin__WEBPACK_IMPORTED_MODULE_3__.genkitPlugin)(\n    \"googleai\",\n    async (ai) => await initializer(ai, options),\n    async (ai, actionType, actionName) => await resolver(ai, actionType, actionName, options),\n    async () => {\n      if (listActionsCache) return listActionsCache;\n      listActionsCache = await listActions(options);\n      return listActionsCache;\n    }\n  );\n}\nconst googleAI = googleAIPlugin;\ngoogleAI.model = (name, config) => {\n  return (0,genkit_model__WEBPACK_IMPORTED_MODULE_2__.modelRef)({\n    name: `googleai/${name}`,\n    config,\n    configSchema: _gemini_js__WEBPACK_IMPORTED_MODULE_6__.GeminiConfigSchema\n  });\n};\ngoogleAI.embedder = (name, config) => {\n  return (0,genkit__WEBPACK_IMPORTED_MODULE_0__.embedderRef)({\n    name: `googleai/${name}`,\n    config,\n    configSchema: _embedder_js__WEBPACK_IMPORTED_MODULE_5__.GeminiEmbeddingConfigSchema\n  });\n};\nvar src_default = googleAI;\n\n//# sourceMappingURL=index.mjs.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUlnQjtBQUN3QjtBQUNBO0FBQ0s7QUFDSztBQU8zQjtBQWtCRjtBQUN5QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDREQUFvQjtBQUNwQyxnQkFBZ0IsK0RBQW1CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkRBQW1CO0FBQ25DLGdCQUFnQiwrREFBbUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsZ0JBQWdCLDREQUFvQjtBQUNwQyxnQkFBZ0IsK0RBQW1CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLGdCQUFnQiwwREFBZTtBQUMvQixnQkFBZ0Isb0VBQXNCLGFBQWEseUJBQXlCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsa0RBQU07QUFDL0QsTUFBTSwrREFBbUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFVBQVU7QUFDMUMsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrREFBTTtBQUMxQixFQUFFLCtEQUFtQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsV0FBVztBQUN2QyxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUUsb0VBQXNCLGlCQUFpQixXQUFXO0FBQ3BEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxvQ0FBb0MsK0RBQW1CO0FBQ3ZEO0FBQ0EsSUFBSSxrREFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJEQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrREFBTTtBQUN4QjtBQUNBO0FBQ0EsYUFBYSwyREFBbUI7QUFDaEM7QUFDQTtBQUNBLHNCQUFzQiwwREFBa0I7QUFDeEMsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxhQUFhLDhEQUFzQjtBQUNuQztBQUNBLHNCQUFzQixxRUFBMkI7QUFDakQ7QUFDQTtBQUNBLG9DQUFvQyxLQUFLO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkRBQVk7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxzREFBUTtBQUNqQixzQkFBc0IsS0FBSztBQUMzQjtBQUNBLGtCQUFrQiwwREFBa0I7QUFDcEMsR0FBRztBQUNIO0FBQ0E7QUFDQSxTQUFTLG1EQUFXO0FBQ3BCLHNCQUFzQixLQUFLO0FBQzNCO0FBQ0Esa0JBQWtCLHFFQUEyQjtBQUM3QyxHQUFHO0FBQ0g7QUFDQTtBQW1CRTtBQUNGLGtDIiwic291cmNlcyI6WyIvaG9tZS9wcm9qZWN0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZW1iZWRkZXJBY3Rpb25NZXRhZGF0YSxcbiAgZW1iZWRkZXJSZWYsXG4gIG1vZGVsQWN0aW9uTWV0YWRhdGFcbn0gZnJvbSBcImdlbmtpdFwiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcImdlbmtpdC9sb2dnaW5nXCI7XG5pbXBvcnQgeyBtb2RlbFJlZiB9IGZyb20gXCJnZW5raXQvbW9kZWxcIjtcbmltcG9ydCB7IGdlbmtpdFBsdWdpbiB9IGZyb20gXCJnZW5raXQvcGx1Z2luXCI7XG5pbXBvcnQgeyBnZXRBcGlLZXlGcm9tRW52VmFyIH0gZnJvbSBcIi4vY29tbW9uLmpzXCI7XG5pbXBvcnQge1xuICBkZWZpbmVHb29nbGVBSUVtYmVkZGVyLFxuICBTVVBQT1JURURfTU9ERUxTIGFzIEVNQkVEREVSX01PREVMUyxcbiAgR2VtaW5pRW1iZWRkaW5nQ29uZmlnU2NoZW1hLFxuICB0ZXh0RW1iZWRkaW5nMDA0LFxuICB0ZXh0RW1iZWRkaW5nR2Vja28wMDFcbn0gZnJvbSBcIi4vZW1iZWRkZXIuanNcIjtcbmltcG9ydCB7XG4gIGRlZmluZUdvb2dsZUFJTW9kZWwsXG4gIGdlbWluaSxcbiAgZ2VtaW5pMTBQcm8sXG4gIGdlbWluaTE1Rmxhc2gsXG4gIGdlbWluaTE1Rmxhc2g4YixcbiAgZ2VtaW5pMTVQcm8sXG4gIGdlbWluaTIwRmxhc2gsXG4gIGdlbWluaTIwRmxhc2hFeHAsXG4gIGdlbWluaTIwRmxhc2hMaXRlLFxuICBnZW1pbmkyMFByb0V4cDAyMDUsXG4gIGdlbWluaTI1Rmxhc2hQcmV2aWV3MDQxNyxcbiAgZ2VtaW5pMjVQcm9FeHAwMzI1LFxuICBnZW1pbmkyNVByb1ByZXZpZXcwMzI1LFxuICBHZW1pbmlDb25maWdTY2hlbWEsXG4gIFNVUFBPUlRFRF9WMTVfTU9ERUxTLFxuICBTVVBQT1JURURfVjFfTU9ERUxTXG59IGZyb20gXCIuL2dlbWluaS5qc1wiO1xuaW1wb3J0IHsgbGlzdE1vZGVscyB9IGZyb20gXCIuL2xpc3QtbW9kZWxzLmpzXCI7XG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplcihhaSwgb3B0aW9ucykge1xuICBsZXQgYXBpVmVyc2lvbnMgPSBbXCJ2MVwiXTtcbiAgaWYgKG9wdGlvbnM/LmFwaVZlcnNpb24pIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zPy5hcGlWZXJzaW9uKSkge1xuICAgICAgYXBpVmVyc2lvbnMgPSBvcHRpb25zPy5hcGlWZXJzaW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcGlWZXJzaW9ucyA9IFtvcHRpb25zPy5hcGlWZXJzaW9uXTtcbiAgICB9XG4gIH1cbiAgaWYgKGFwaVZlcnNpb25zLmluY2x1ZGVzKFwidjFiZXRhXCIpKSB7XG4gICAgT2JqZWN0LmtleXMoU1VQUE9SVEVEX1YxNV9NT0RFTFMpLmZvckVhY2goXG4gICAgICAobmFtZSkgPT4gZGVmaW5lR29vZ2xlQUlNb2RlbCh7XG4gICAgICAgIGFpLFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcGlLZXk6IG9wdGlvbnM/LmFwaUtleSxcbiAgICAgICAgYXBpVmVyc2lvbjogXCJ2MWJldGFcIixcbiAgICAgICAgYmFzZVVybDogb3B0aW9ucz8uYmFzZVVybCxcbiAgICAgICAgZGVidWdUcmFjZXM6IG9wdGlvbnM/LmV4cGVyaW1lbnRhbF9kZWJ1Z1RyYWNlc1xuICAgICAgfSlcbiAgICApO1xuICB9XG4gIGlmIChhcGlWZXJzaW9ucy5pbmNsdWRlcyhcInYxXCIpKSB7XG4gICAgT2JqZWN0LmtleXMoU1VQUE9SVEVEX1YxX01PREVMUykuZm9yRWFjaChcbiAgICAgIChuYW1lKSA9PiBkZWZpbmVHb29nbGVBSU1vZGVsKHtcbiAgICAgICAgYWksXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFwaUtleTogb3B0aW9ucz8uYXBpS2V5LFxuICAgICAgICBhcGlWZXJzaW9uOiB2b2lkIDAsXG4gICAgICAgIGJhc2VVcmw6IG9wdGlvbnM/LmJhc2VVcmwsXG4gICAgICAgIGRlYnVnVHJhY2VzOiBvcHRpb25zPy5leHBlcmltZW50YWxfZGVidWdUcmFjZXNcbiAgICAgIH0pXG4gICAgKTtcbiAgICBPYmplY3Qua2V5cyhTVVBQT1JURURfVjE1X01PREVMUykuZm9yRWFjaChcbiAgICAgIChuYW1lKSA9PiBkZWZpbmVHb29nbGVBSU1vZGVsKHtcbiAgICAgICAgYWksXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFwaUtleTogb3B0aW9ucz8uYXBpS2V5LFxuICAgICAgICBhcGlWZXJzaW9uOiB2b2lkIDAsXG4gICAgICAgIGJhc2VVcmw6IG9wdGlvbnM/LmJhc2VVcmwsXG4gICAgICAgIGRlYnVnVHJhY2VzOiBvcHRpb25zPy5leHBlcmltZW50YWxfZGVidWdUcmFjZXNcbiAgICAgIH0pXG4gICAgKTtcbiAgICBPYmplY3Qua2V5cyhFTUJFRERFUl9NT0RFTFMpLmZvckVhY2goXG4gICAgICAobmFtZSkgPT4gZGVmaW5lR29vZ2xlQUlFbWJlZGRlcihhaSwgbmFtZSwgeyBhcGlLZXk6IG9wdGlvbnM/LmFwaUtleSB9KVxuICAgICk7XG4gIH1cbiAgaWYgKG9wdGlvbnM/Lm1vZGVscykge1xuICAgIGZvciAoY29uc3QgbW9kZWxPclJlZiBvZiBvcHRpb25zPy5tb2RlbHMpIHtcbiAgICAgIGNvbnN0IG1vZGVsTmFtZSA9IHR5cGVvZiBtb2RlbE9yUmVmID09PSBcInN0cmluZ1wiID8gbW9kZWxPclJlZiA6IChcbiAgICAgICAgLy8gc3RyaXAgb3V0IHRoZSBgZ29vZ2xlYWkvYCBwcmVmaXhcbiAgICAgICAgbW9kZWxPclJlZi5uYW1lLnNwbGl0KFwiL1wiKVsxXVxuICAgICAgKTtcbiAgICAgIGNvbnN0IG1vZGVsUmVmMiA9IHR5cGVvZiBtb2RlbE9yUmVmID09PSBcInN0cmluZ1wiID8gZ2VtaW5pKG1vZGVsT3JSZWYpIDogbW9kZWxPclJlZjtcbiAgICAgIGRlZmluZUdvb2dsZUFJTW9kZWwoe1xuICAgICAgICBhaSxcbiAgICAgICAgbmFtZTogbW9kZWxOYW1lLFxuICAgICAgICBhcGlLZXk6IG9wdGlvbnM/LmFwaUtleSxcbiAgICAgICAgYmFzZVVybDogb3B0aW9ucz8uYmFzZVVybCxcbiAgICAgICAgaW5mbzoge1xuICAgICAgICAgIC4uLm1vZGVsUmVmMi5pbmZvLFxuICAgICAgICAgIGxhYmVsOiBgR29vZ2xlIEFJIC0gJHttb2RlbE5hbWV9YFxuICAgICAgICB9LFxuICAgICAgICBkZWJ1Z1RyYWNlczogb3B0aW9ucz8uZXhwZXJpbWVudGFsX2RlYnVnVHJhY2VzXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIHJlc29sdmVyKGFpLCBhY3Rpb25UeXBlLCBhY3Rpb25OYW1lLCBvcHRpb25zKSB7XG4gIHN3aXRjaCAoYWN0aW9uVHlwZSkge1xuICAgIGNhc2UgXCJtb2RlbFwiOlxuICAgICAgcmVzb2x2ZU1vZGVsKGFpLCBhY3Rpb25OYW1lLCBvcHRpb25zKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJlbWJlZGRlclwiOlxuICAgICAgcmVzb2x2ZUVtYmVkZGVyKGFpLCBhY3Rpb25OYW1lLCBvcHRpb25zKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gIH1cbn1cbmZ1bmN0aW9uIHJlc29sdmVNb2RlbChhaSwgYWN0aW9uTmFtZSwgb3B0aW9ucykge1xuICBjb25zdCBtb2RlbFJlZjIgPSBnZW1pbmkoYWN0aW9uTmFtZSk7XG4gIGRlZmluZUdvb2dsZUFJTW9kZWwoe1xuICAgIGFpLFxuICAgIG5hbWU6IG1vZGVsUmVmMi5uYW1lLFxuICAgIGFwaUtleTogb3B0aW9ucz8uYXBpS2V5LFxuICAgIGJhc2VVcmw6IG9wdGlvbnM/LmJhc2VVcmwsXG4gICAgaW5mbzoge1xuICAgICAgLi4ubW9kZWxSZWYyLmluZm8sXG4gICAgICBsYWJlbDogYEdvb2dsZSBBSSAtICR7YWN0aW9uTmFtZX1gXG4gICAgfSxcbiAgICBkZWJ1Z1RyYWNlczogb3B0aW9ucz8uZXhwZXJpbWVudGFsX2RlYnVnVHJhY2VzXG4gIH0pO1xufVxuZnVuY3Rpb24gcmVzb2x2ZUVtYmVkZGVyKGFpLCBhY3Rpb25OYW1lLCBvcHRpb25zKSB7XG4gIGRlZmluZUdvb2dsZUFJRW1iZWRkZXIoYWksIGBnb29nbGVhaS8ke2FjdGlvbk5hbWV9YCwge1xuICAgIGFwaUtleTogb3B0aW9ucz8uYXBpS2V5XG4gIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gbGlzdEFjdGlvbnMob3B0aW9ucykge1xuICBjb25zdCBhcGlLZXkgPSBvcHRpb25zPy5hcGlLZXkgfHwgZ2V0QXBpS2V5RnJvbUVudlZhcigpO1xuICBpZiAoIWFwaUtleSkge1xuICAgIGxvZ2dlci5lcnJvcihcbiAgICAgIFwiUGFzcyBpbiB0aGUgQVBJIGtleSBvciBzZXQgdGhlIEdFTUlOSV9BUElfS0VZIG9yIEdPT0dMRV9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlLlwiXG4gICAgKTtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgbW9kZWxzID0gYXdhaXQgbGlzdE1vZGVscyhcbiAgICBvcHRpb25zPy5iYXNlVXJsIHx8IFwiaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb21cIixcbiAgICBhcGlLZXlcbiAgKTtcbiAgcmV0dXJuIFtcbiAgICAvLyBNb2RlbHNcbiAgICAuLi5tb2RlbHMuZmlsdGVyKChtKSA9PiBtLnN1cHBvcnRlZEdlbmVyYXRpb25NZXRob2RzLmluY2x1ZGVzKFwiZ2VuZXJhdGVDb250ZW50XCIpKS5maWx0ZXIoKG0pID0+ICFtLmRlc2NyaXB0aW9uIHx8ICFtLmRlc2NyaXB0aW9uLmluY2x1ZGVzKFwiZGVwcmVjYXRlZFwiKSkubWFwKChtKSA9PiB7XG4gICAgICBjb25zdCByZWYgPSBnZW1pbmkoXG4gICAgICAgIG0ubmFtZS5zdGFydHNXaXRoKFwibW9kZWxzL1wiKSA/IG0ubmFtZS5zdWJzdHJpbmcoXCJtb2RlbHMvXCIubGVuZ3RoKSA6IG0ubmFtZVxuICAgICAgKTtcbiAgICAgIHJldHVybiBtb2RlbEFjdGlvbk1ldGFkYXRhKHtcbiAgICAgICAgbmFtZTogcmVmLm5hbWUsXG4gICAgICAgIGluZm86IHJlZi5pbmZvLFxuICAgICAgICBjb25maWdTY2hlbWE6IEdlbWluaUNvbmZpZ1NjaGVtYVxuICAgICAgfSk7XG4gICAgfSksXG4gICAgLy8gRW1iZWRkZXJzXG4gICAgLi4ubW9kZWxzLmZpbHRlcigobSkgPT4gbS5zdXBwb3J0ZWRHZW5lcmF0aW9uTWV0aG9kcy5pbmNsdWRlcyhcImVtYmVkQ29udGVudFwiKSkuZmlsdGVyKChtKSA9PiAhbS5kZXNjcmlwdGlvbiB8fCAhbS5kZXNjcmlwdGlvbi5pbmNsdWRlcyhcImRlcHJlY2F0ZWRcIikpLm1hcCgobSkgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IFwiZ29vZ2xlYWkvXCIgKyAobS5uYW1lLnN0YXJ0c1dpdGgoXCJtb2RlbHMvXCIpID8gbS5uYW1lLnN1YnN0cmluZyhcIm1vZGVscy9cIi5sZW5ndGgpIDogbS5uYW1lKTtcbiAgICAgIHJldHVybiBlbWJlZGRlckFjdGlvbk1ldGFkYXRhKHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgY29uZmlnU2NoZW1hOiBHZW1pbmlFbWJlZGRpbmdDb25maWdTY2hlbWEsXG4gICAgICAgIGluZm86IHtcbiAgICAgICAgICBkaW1lbnNpb25zOiA3NjgsXG4gICAgICAgICAgbGFiZWw6IGBHb29nbGUgR2VuIEFJIC0gJHtuYW1lfWAsXG4gICAgICAgICAgc3VwcG9ydHM6IHtcbiAgICAgICAgICAgIGlucHV0OiBbXCJ0ZXh0XCJdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KVxuICBdO1xufVxuZnVuY3Rpb24gZ29vZ2xlQUlQbHVnaW4ob3B0aW9ucykge1xuICBsZXQgbGlzdEFjdGlvbnNDYWNoZTtcbiAgcmV0dXJuIGdlbmtpdFBsdWdpbihcbiAgICBcImdvb2dsZWFpXCIsXG4gICAgYXN5bmMgKGFpKSA9PiBhd2FpdCBpbml0aWFsaXplcihhaSwgb3B0aW9ucyksXG4gICAgYXN5bmMgKGFpLCBhY3Rpb25UeXBlLCBhY3Rpb25OYW1lKSA9PiBhd2FpdCByZXNvbHZlcihhaSwgYWN0aW9uVHlwZSwgYWN0aW9uTmFtZSwgb3B0aW9ucyksXG4gICAgYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGxpc3RBY3Rpb25zQ2FjaGUpIHJldHVybiBsaXN0QWN0aW9uc0NhY2hlO1xuICAgICAgbGlzdEFjdGlvbnNDYWNoZSA9IGF3YWl0IGxpc3RBY3Rpb25zKG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGxpc3RBY3Rpb25zQ2FjaGU7XG4gICAgfVxuICApO1xufVxuY29uc3QgZ29vZ2xlQUkgPSBnb29nbGVBSVBsdWdpbjtcbmdvb2dsZUFJLm1vZGVsID0gKG5hbWUsIGNvbmZpZykgPT4ge1xuICByZXR1cm4gbW9kZWxSZWYoe1xuICAgIG5hbWU6IGBnb29nbGVhaS8ke25hbWV9YCxcbiAgICBjb25maWcsXG4gICAgY29uZmlnU2NoZW1hOiBHZW1pbmlDb25maWdTY2hlbWFcbiAgfSk7XG59O1xuZ29vZ2xlQUkuZW1iZWRkZXIgPSAobmFtZSwgY29uZmlnKSA9PiB7XG4gIHJldHVybiBlbWJlZGRlclJlZih7XG4gICAgbmFtZTogYGdvb2dsZWFpLyR7bmFtZX1gLFxuICAgIGNvbmZpZyxcbiAgICBjb25maWdTY2hlbWE6IEdlbWluaUVtYmVkZGluZ0NvbmZpZ1NjaGVtYVxuICB9KTtcbn07XG52YXIgc3JjX2RlZmF1bHQgPSBnb29nbGVBSTtcbmV4cG9ydCB7XG4gIHNyY19kZWZhdWx0IGFzIGRlZmF1bHQsXG4gIGdlbWluaSxcbiAgZ2VtaW5pMTBQcm8sXG4gIGdlbWluaTE1Rmxhc2gsXG4gIGdlbWluaTE1Rmxhc2g4YixcbiAgZ2VtaW5pMTVQcm8sXG4gIGdlbWluaTIwRmxhc2gsXG4gIGdlbWluaTIwRmxhc2hFeHAsXG4gIGdlbWluaTIwRmxhc2hMaXRlLFxuICBnZW1pbmkyMFByb0V4cDAyMDUsXG4gIGdlbWluaTI1Rmxhc2hQcmV2aWV3MDQxNyxcbiAgZ2VtaW5pMjVQcm9FeHAwMzI1LFxuICBnZW1pbmkyNVByb1ByZXZpZXcwMzI1LFxuICBnb29nbGVBSSxcbiAgZ29vZ2xlQUlQbHVnaW4sXG4gIHRleHRFbWJlZGRpbmcwMDQsXG4gIHRleHRFbWJlZGRpbmdHZWNrbzAwMVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@genkit-ai/googleai/lib/index.mjs\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@genkit-ai/googleai/lib/list-models.js":
/*!*************************************************************!*\
  !*** ./node_modules/@genkit-ai/googleai/lib/list-models.js ***!
  \*************************************************************/
/***/ ((module) => {

eval("\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar list_models_exports = {};\n__export(list_models_exports, {\n  listModels: () => listModels\n});\nmodule.exports = __toCommonJS(list_models_exports);\nasync function listModels(baseUrl, apiKey) {\n  const res = await fetch(\n    `${baseUrl}/v1beta/models?pageSize=1000&key=${apiKey}`,\n    {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }\n  );\n  const modelResponse = JSON.parse(await res.text());\n  return modelResponse.models;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (0);\n//# sourceMappingURL=list-models.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9saXN0LW1vZGVscy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGtCQUFrQixhQUFhO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxPQUFPLFFBQVEsbUNBQW1DLE9BQU87QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sQ0FFTDtBQUNEIiwic291cmNlcyI6WyIvaG9tZS9wcm9qZWN0L25vZGVfbW9kdWxlcy9AZ2Vua2l0LWFpL2dvb2dsZWFpL2xpYi9saXN0LW1vZGVscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF9fZXhwb3J0ID0gKHRhcmdldCwgYWxsKSA9PiB7XG4gIGZvciAodmFyIG5hbWUgaW4gYWxsKVxuICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSksIG1vZCk7XG52YXIgbGlzdF9tb2RlbHNfZXhwb3J0cyA9IHt9O1xuX19leHBvcnQobGlzdF9tb2RlbHNfZXhwb3J0cywge1xuICBsaXN0TW9kZWxzOiAoKSA9PiBsaXN0TW9kZWxzXG59KTtcbm1vZHVsZS5leHBvcnRzID0gX190b0NvbW1vbkpTKGxpc3RfbW9kZWxzX2V4cG9ydHMpO1xuYXN5bmMgZnVuY3Rpb24gbGlzdE1vZGVscyhiYXNlVXJsLCBhcGlLZXkpIHtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7YmFzZVVybH0vdjFiZXRhL21vZGVscz9wYWdlU2l6ZT0xMDAwJmtleT0ke2FwaUtleX1gLFxuICAgIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIGNvbnN0IG1vZGVsUmVzcG9uc2UgPSBKU09OLnBhcnNlKGF3YWl0IHJlcy50ZXh0KCkpO1xuICByZXR1cm4gbW9kZWxSZXNwb25zZS5tb2RlbHM7XG59XG4vLyBBbm5vdGF0ZSB0aGUgQ29tbW9uSlMgZXhwb3J0IG5hbWVzIGZvciBFU00gaW1wb3J0IGluIG5vZGU6XG4wICYmIChtb2R1bGUuZXhwb3J0cyA9IHtcbiAgbGlzdE1vZGVsc1xufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXN0LW1vZGVscy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@genkit-ai/googleai/lib/list-models.js\n");

/***/ })

};
;